!function(){"use strict";var t="http://www.w3.org/1999/xhtml",e={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function n(t){var n=t+="",r=n.indexOf(":");return r>=0&&"xmlns"!==(n=t.slice(0,r))&&(t=t.slice(r+1)),e.hasOwnProperty(n)?{space:e[n],local:t}:t}function r(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(r,e)}}function o(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i(t){var e=n(t);return(e.local?o:r)(e)}function a(){}function s(t){return null==t?a:function(){return this.querySelector(t)}}function l(){return[]}function c(t){return null==t?l:function(){return this.querySelectorAll(t)}}function u(t){return function(){return this.matches(t)}}function f(t){return new Array(t.length)}function h(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}h.prototype={constructor:h,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var p="$";function d(t,e,n,r,o,i){for(var a,s=0,l=e.length,c=i.length;s<c;++s)(a=e[s])?(a.__data__=i[s],r[s]=a):n[s]=new h(t,i[s]);for(;s<l;++s)(a=e[s])&&(o[s]=a)}function g(t,e,n,r,o,i,a){var s,l,c,u={},f=e.length,d=i.length,g=new Array(f);for(s=0;s<f;++s)(l=e[s])&&(g[s]=c=p+a.call(l,l.__data__,s,e),c in u?o[s]=l:u[c]=l);for(s=0;s<d;++s)(l=u[c=p+a.call(t,i[s],s,i)])?(r[s]=l,l.__data__=i[s],u[c]=null):n[s]=new h(t,i[s]);for(s=0;s<f;++s)(l=e[s])&&u[g[s]]===l&&(o[s]=l)}function m(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function v(t){return function(){this.removeAttribute(t)}}function y(t){return function(){this.removeAttributeNS(t.space,t.local)}}function b(t,e){return function(){this.setAttribute(t,e)}}function x(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function w(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function _(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function k(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function M(t){return function(){this.style.removeProperty(t)}}function E(t,e,n){return function(){this.style.setProperty(t,e,n)}}function A(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function T(t,e){return t.style.getPropertyValue(e)||k(t).getComputedStyle(t,null).getPropertyValue(e)}function $(t){return function(){delete this[t]}}function S(t,e){return function(){this[t]=e}}function N(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function O(t){return t.trim().split(/^|\s+/)}function L(t){return t.classList||new z(t)}function z(t){this._node=t,this._names=O(t.getAttribute("class")||"")}function C(t,e){for(var n=L(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function R(t,e){for(var n=L(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function D(t){return function(){C(this,t)}}function P(t){return function(){R(this,t)}}function j(t,e){return function(){(e.apply(this,arguments)?C:R)(this,t)}}function I(){this.textContent=""}function F(t){return function(){this.textContent=t}}function H(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function B(){this.innerHTML=""}function U(t){return function(){this.innerHTML=t}}function q(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function Y(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G(){return null}function X(){var t=this.parentNode;t&&t.removeChild(this)}function V(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Z(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}z.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var K={},J=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(K={mouseenter:"mouseover",mouseleave:"mouseout"}));function Q(t,e,n){return t=tt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function tt(t,e,n){return function(r){var o=J;J=r;try{t.call(this,this.__data__,e,n)}finally{J=o}}}function et(t){return function(){var e=this.__on;if(e){for(var n,r=0,o=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function nt(t,e,n){var r=K.hasOwnProperty(t.type)?Q:tt;return function(o,i,a){var s,l=this.__on,c=r(e,i,a);if(l)for(var u=0,f=l.length;u<f;++u)if((s=l[u]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function rt(t,e,n){var r=k(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function ot(t,e){return function(){return rt(this,t,e)}}function it(t,e){return function(){return rt(this,t,e.apply(this,arguments))}}var at=[null];function st(t,e){this._groups=t,this._parents=e}function lt(){return new st([[document.documentElement]],at)}function ct(t){return"string"==typeof t?new st([[document.querySelector(t)]],[document.documentElement]):new st([[t]],at)}function ut(){for(var t,e=J;t=e.sourceEvent;)e=t;return e}function ft(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function ht(t){var e=ut();return e.changedTouches&&(e=e.changedTouches[0]),ft(t,e)}function pt(t,e,n){arguments.length<3&&(n=e,e=ut().changedTouches);for(var r,o=0,i=e?e.length:0;o<i;++o)if((r=e[o]).identifier===n)return ft(t,r);return null}function dt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gt(t){let e=t,n=t;function r(t,e,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const i=r+o>>>1;n(t[i],e)<0?r=i+1:o=i}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>dt(t(e),n)}(t)),{left:r,center:function(t,n,o,i){null==o&&(o=0),null==i&&(i=t.length);const a=r(t,n,o,i-1);return a>o&&e(t[a-1],n)>-e(t[a],n)?a-1:a},right:function(t,e,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const i=r+o>>>1;n(t[i],e)>0?o=i:r=i+1}return r}}}function mt(t){return null===t?NaN:+t}st.prototype=lt.prototype={constructor:st,select:function(t){"function"!=typeof t&&(t=s(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a,l=e[o],c=l.length,u=r[o]=new Array(c),f=0;f<c;++f)(i=l[f])&&(a=t.call(i,i.__data__,f,l))&&("__data__"in i&&(a.__data__=i.__data__),u[f]=a);return new st(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var a,s=e[i],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(t.call(a,a.__data__,u,s)),o.push(a));return new st(r,o)},filter:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a=e[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&t.call(i,i.__data__,c,a)&&l.push(i);return new st(r,this._parents)},data:function(t,e){if(!t)return m=new Array(this.size()),u=-1,this.each((function(t){m[++u]=t})),m;var n,r=e?g:d,o=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=i.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var f=o[u],h=i[u],p=h.length,m=t.call(f,f&&f.__data__,u,o),v=m.length,y=l[u]=new Array(v),b=s[u]=new Array(v);r(f,h,y,b,c[u]=new Array(p),m,e);for(var x,w,_=0,k=0;_<v;++_)if(x=y[_]){for(_>=k&&(k=_+1);!(w=b[k])&&++k<v;);x._next=w||null}}return(s=new st(s,o))._enter=l,s._exit=c,s},enter:function(){return new st(this._enter||this._groups.map(f),this._parents)},exit:function(){return new st(this._exit||this._groups.map(f),this._parents)},join:function(t,e,n){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(o=e(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=e[s],u=n[s],f=c.length,h=a[s]=new Array(f),p=0;p<f;++p)(l=c[p]||u[p])&&(h[p]=l);for(;s<r;++s)a[s]=e[s];return new st(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,o=t[e],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=m);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,c=o[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(e)}return new st(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o,i=e[n],a=0,s=i.length;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this},attr:function(t,e){var r=n(t);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((null==e?r.local?y:v:"function"==typeof e?r.local?_:w:r.local?x:b)(r,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?M:"function"==typeof e?A:E)(t,e,null==n?"":n)):T(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?$:"function"==typeof e?N:S)(t,e)):this.node()[t]},classed:function(t,e){var n=O(t+"");if(arguments.length<2){for(var r=L(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?j:e?D:P)(n,e))},text:function(t){return arguments.length?this.each(null==t?I:("function"==typeof t?H:F)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?B:("function"==typeof t?q:U)(t)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(Y)},append:function(t){var e="function"==typeof t?t:i(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:i(t),r=null==e?G:"function"==typeof e?e:s(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(X)},clone:function(t){return this.select(t?Z:V)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,o,i=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=i.length;if(!(arguments.length<2)){for(s=e?nt:et,null==n&&(n=!1),r=0;r<a;++r)this.each(s(i[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?it:ot)(t,e))}};const vt=gt(dt).right;gt(mt).center;var yt=vt;class bt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const o=e[r],i=t+o,a=Math.abs(t)<Math.abs(o)?t-(i-o):o-(i-t);a&&(e[n++]=a),t=i}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,o=this._n,i=0;if(o>0){for(i=t[--o];o>0&&(e=i,n=t[--o],i=e+n,r=n-(i-e),!r););o>0&&(r<0&&t[o-1]<0||r>0&&t[o-1]>0)&&(n=2*r,e=i+n,n==e-i&&(i=e))}return i}}class xt extends Map{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(wt(this,t))}has(t){return super.has(wt(this,t))}set(t,e){return super.set(function(t,e){let{_intern:n,_key:r}=t;const o=r(e);return n.has(o)?n.get(o):(n.set(o,e),e)}(this,t),e)}delete(t){return super.delete(function(t,e){let{_intern:n,_key:r}=t;const o=r(e);n.has(o)&&(e=n.get(e),n.delete(o));return e}(this,t))}}function wt(t,e){let{_intern:n,_key:r}=t;const o=r(e);return n.has(o)?n.get(o):e}function _t(t){return null!==t&&"object"==typeof t?t.valueOf():t}var kt=Math.sqrt(50),Mt=Math.sqrt(10),Et=Math.sqrt(2);function At(t,e,n){var r,o,i,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(a=Tt(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),r=Math.round(e/a);for(n*a<t&&++n,r*a>e&&--r,i=new Array(o=r-n+1);++s<o;)i[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),r=Math.round(e*a);for(n/a<t&&++n,r/a>e&&--r,i=new Array(o=r-n+1);++s<o;)i[s]=(n+s)/a}return r&&i.reverse(),i}function Tt(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return o>=0?(i>=kt?10:i>=Mt?5:i>=Et?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=kt?10:i>=Mt?5:i>=Et?2:1)}function $t(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o;return i>=kt?o*=10:i>=Mt?o*=5:i>=Et&&(o*=2),e<t?-o:o}function St(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mt;if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,i=Math.floor(o),a=+n(t[i],i,t);return a+(+n(t[i+1],i+1,t)-a)*(o-i)}}function Nt(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function Ot(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(o);++r<o;)i[r]=t+r*n;return i}function Lt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const zt=Symbol("implicit");function Ct(){var t=new xt,e=[],n=[],r=zt;function o(o){let i=t.get(o);if(void 0===i){if(r!==zt)return r;t.set(o,i=e.push(o)-1)}return n[i%n.length]}return o.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new xt;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return o},o.range=function(t){return arguments.length?(n=Array.from(t),o):n.slice()},o.unknown=function(t){return arguments.length?(r=t,o):r},o.copy=function(){return Ct(e,n).unknown(r)},Lt.apply(o,arguments),o}function Rt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Dt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Pt(){}var jt=.7,It=1/jt,Ft="\\s*([+-]?\\d+)\\s*",Ht="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ut=/^#([0-9a-f]{3,8})$/,qt=new RegExp("^rgb\\("+[Ft,Ft,Ft]+"\\)$"),Wt=new RegExp("^rgb\\("+[Bt,Bt,Bt]+"\\)$"),Yt=new RegExp("^rgba\\("+[Ft,Ft,Ft,Ht]+"\\)$"),Gt=new RegExp("^rgba\\("+[Bt,Bt,Bt,Ht]+"\\)$"),Xt=new RegExp("^hsl\\("+[Ht,Bt,Bt]+"\\)$"),Vt=new RegExp("^hsla\\("+[Ht,Bt,Bt,Ht]+"\\)$"),Zt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Kt(){return this.rgb().formatHex()}function Jt(){return this.rgb().formatRgb()}function Qt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ut.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?te(e):3===n?new oe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ee(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ee(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=qt.exec(t))?new oe(e[1],e[2],e[3],1):(e=Wt.exec(t))?new oe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Yt.exec(t))?ee(e[1],e[2],e[3],e[4]):(e=Gt.exec(t))?ee(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Xt.exec(t))?le(e[1],e[2]/100,e[3]/100,1):(e=Vt.exec(t))?le(e[1],e[2]/100,e[3]/100,e[4]):Zt.hasOwnProperty(t)?te(Zt[t]):"transparent"===t?new oe(NaN,NaN,NaN,0):null}function te(t){return new oe(t>>16&255,t>>8&255,255&t,1)}function ee(t,e,n,r){return r<=0&&(t=e=n=NaN),new oe(t,e,n,r)}function ne(t){return t instanceof Pt||(t=Qt(t)),t?new oe((t=t.rgb()).r,t.g,t.b,t.opacity):new oe}function re(t,e,n,r){return 1===arguments.length?ne(t):new oe(t,e,n,null==r?1:r)}function oe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ie(){return"#"+se(this.r)+se(this.g)+se(this.b)}function ae(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function se(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function le(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ue(t,e,n,r)}function ce(t){if(t instanceof ue)return new ue(t.h,t.s,t.l,t.opacity);if(t instanceof Pt||(t=Qt(t)),!t)return new ue;if(t instanceof ue)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=e===i?(n-r)/s+6*(n<r):n===i?(r-e)/s+2:(e-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new ue(a,s,l,t.opacity)}function ue(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function fe(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Rt(Pt,Qt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Kt,formatHex:Kt,formatHsl:function(){return ce(this).formatHsl()},formatRgb:Jt,toString:Jt}),Rt(oe,re,Dt(Pt,{brighter:function(t){return t=null==t?It:Math.pow(It,t),new oe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?jt:Math.pow(jt,t),new oe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ie,formatHex:ie,formatRgb:ae,toString:ae})),Rt(ue,(function(t,e,n,r){return 1===arguments.length?ce(t):new ue(t,e,n,null==r?1:r)}),Dt(Pt,{brighter:function(t){return t=null==t?It:Math.pow(It,t),new ue(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?jt:Math.pow(jt,t),new ue(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new oe(fe(t>=240?t-240:t+120,o,r),fe(t,o,r),fe(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var he=Math.PI/180,pe=180/Math.PI,de=.96422,ge=1,me=.82521,ve=4/29,ye=6/29,be=3*ye*ye,xe=ye*ye*ye;function we(t){if(t instanceof ke)return new ke(t.l,t.a,t.b,t.opacity);if(t instanceof $e)return Se(t);t instanceof oe||(t=ne(t));var e,n,r=Te(t.r),o=Te(t.g),i=Te(t.b),a=Me((.2225045*r+.7168786*o+.0606169*i)/ge);return r===o&&o===i?e=n=a:(e=Me((.4360747*r+.3850649*o+.1430804*i)/de),n=Me((.0139322*r+.0971045*o+.7141733*i)/me)),new ke(116*a-16,500*(e-a),200*(a-n),t.opacity)}function _e(t,e,n,r){return 1===arguments.length?we(t):new ke(t,e,n,null==r?1:r)}function ke(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Me(t){return t>xe?Math.pow(t,1/3):t/be+ve}function Ee(t){return t>ye?t*t*t:be*(t-ve)}function Ae(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Te(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $e(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Se(t){if(isNaN(t.h))return new ke(t.l,0,0,t.opacity);var e=t.h*he;return new ke(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Ne(t){return function(){return t}}function Oe(t){return 1==(t=+t)?Le:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Ne(isNaN(e)?n:e)}}function Le(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Ne(isNaN(t)?e:t)}Rt(ke,_e,Dt(Pt,{brighter:function(t){return new ke(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ke(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new oe(Ae(3.1338561*(e=de*Ee(e))-1.6168667*(t=ge*Ee(t))-.4906146*(n=me*Ee(n))),Ae(-.9787684*e+1.9161415*t+.033454*n),Ae(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Rt($e,(function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof $e)return new $e(t.h,t.c,t.l,t.opacity);if(t instanceof ke||(t=we(t)),0===t.a&&0===t.b)return new $e(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*pe;return new $e(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new $e(t,e,n,null==r?1:r)}),Dt(Pt,{brighter:function(t){return new $e(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new $e(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Se(this).rgb()}}));var ze=function t(e){var n=Oe(e);function r(t,e){var r=n((t=re(t)).r,(e=re(e)).r),o=n(t.g,e.g),i=n(t.b,e.b),a=Le(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=i(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Ce(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,o=e.slice();return function(i){for(n=0;n<r;++n)o[n]=t[n]*(1-i)+e[n]*i;return o}}function Re(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,i=new Array(o),a=new Array(r);for(n=0;n<o;++n)i[n]=Be(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<o;++n)a[n]=i[n](t);return a}}function De(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Pe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function je(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Be(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}var Ie=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fe=new RegExp(Ie.source,"g");function He(t,e){var n,r,o,i=Ie.lastIndex=Fe.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Ie.exec(t))&&(r=Fe.exec(e));)(o=r.index)>i&&(o=e.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Pe(n,r)})),i=Fe.lastIndex;return i<e.length&&(o=e.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function Be(t,e){var n,r,o=typeof e;return null==e||"boolean"===o?Ne(e):("number"===o?Pe:"string"===o?(n=Qt(e))?(e=n,ze):He:e instanceof Qt?ze:e instanceof Date?De:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?Re:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?je:Pe:Ce))(t,e)}function Ue(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var qe,We,Ye,Ge,Xe=180/Math.PI,Ve={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ze(t,e,n,r,o,i){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*Xe,skewX:Math.atan(l)*Xe,scaleX:a,scaleY:s}}function Ke(t,e,n,r){function o(t){return t.length?t.pop()+" ":""}return function(i,a){var s=[],l=[];return i=t(i),a=t(a),function(t,r,o,i,a,s){if(t!==o||r!==i){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:Pe(t,o)},{i:l-2,x:Pe(r,i)})}else(o||i)&&a.push("translate("+o+e+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Pe(t,e)})):e&&n.push(o(n)+"rotate("+e+r)}(i.rotate,a.rotate,s,l),function(t,e,n,i){t!==e?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Pe(t,e)}):e&&n.push(o(n)+"skewX("+e+r)}(i.skewX,a.skewX,s,l),function(t,e,n,r,i,a){if(t!==n||e!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:Pe(t,n)},{i:s-2,x:Pe(e,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Je=Ke((function(t){return"none"===t?Ve:(qe||(qe=document.createElement("DIV"),We=document.documentElement,Ye=document.defaultView),qe.style.transform=t,t=Ye.getComputedStyle(We.appendChild(qe),null).getPropertyValue("transform"),We.removeChild(qe),Ze(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Qe=Ke((function(t){return null==t?Ve:(Ge||(Ge=document.createElementNS("http://www.w3.org/2000/svg","g")),Ge.setAttribute("transform",t),(t=Ge.transform.baseVal.consolidate())?Ze((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ve)}),", ",")",")"),tn=Math.SQRT2,en=2,nn=4,rn=1e-12;function on(t){return((t=Math.exp(t))+1/t)/2}function an(t,e){var n,r,o=t[0],i=t[1],a=t[2],s=e[0],l=e[1],c=e[2],u=s-o,f=l-i,h=u*u+f*f;if(h<rn)r=Math.log(c/a)/tn,n=function(t){return[o+t*u,i+t*f,a*Math.exp(tn*t*r)]};else{var p=Math.sqrt(h),d=(c*c-a*a+nn*h)/(2*a*en*p),g=(c*c-a*a-nn*h)/(2*c*en*p),m=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/tn,n=function(t){var e,n=t*r,s=on(m),l=a/(en*p)*(s*(e=tn*n+m,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[o+l*u,i+l*f,a*s/on(tn*n+m)]}}return n.duration=1e3*r,n}function sn(t){return+t}var ln=[0,1];function cn(t){return t}function un(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function fn(t,e,n){var r=t[0],o=t[1],i=e[0],a=e[1];return o<r?(r=un(o,r),i=n(a,i)):(r=un(r,o),i=n(i,a)),function(t){return i(r(t))}}function hn(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),i=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)o[a]=un(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(e){var n=yt(t,e,1,r)-1;return i[n](o[n](e))}}function pn(){var t,e,n,r,o,i,a=ln,s=ln,l=Be,c=cn;function u(){var t,e,n,l=Math.min(a.length,s.length);return c!==cn&&(t=a[0],e=a[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=l>2?hn:fn,o=i=null,f}function f(e){return null==e||isNaN(e=+e)?n:(o||(o=r(a.map(t),s,l)))(t(c(e)))}return f.invert=function(n){return c(e((i||(i=r(s,a.map(t),Pe)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,sn),u()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),l=Ue,u()},f.clamp=function(t){return arguments.length?(c=!!t||cn,u()):c!==cn},f.interpolate=function(t){return arguments.length?(l=t,u()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,u()}}function dn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function gn(t){return(t=dn(Math.abs(t)))?t[1]:NaN}var mn,vn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yn(t){if(!(e=vn.exec(t)))throw new Error("invalid format: "+t);var e;return new bn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function bn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function xn(t,e){var n=dn(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}yn.prototype=bn.prototype,bn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var wn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return xn(100*t,e)},r:xn,s:function(t,e){var n=dn(t,e);if(!n)return t+"";var r=n[0],o=n[1],i=o-(mn=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+dn(t,Math.max(0,e+i-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function _n(t){return t}var kn,Mn,En,An=Array.prototype.map,Tn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $n(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?_n:(e=An.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var o=t.length,i=[],a=0,s=e[0],l=0;o>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(t.substring(o-=s,o+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return i.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?_n:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(An.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=yn(t)).fill,n=t.align,f=t.sign,h=t.symbol,p=t.zero,d=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):wn[y]||(void 0===m&&(m=12),v=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var b="$"===h?o:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?i:/[%p]/.test(y)?l:"",w=wn[y],_=/[defgprs%]/.test(y);function k(t){var o,i,l,h=b,k=x;if("c"===y)k=w(t)+k,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,r=1,o=-1;r<n;++r)switch(t[r]){case".":o=e=r;break;case"0":0===o&&(o=r),e=r;break;default:if(!+t[r])break t;o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t}(t)),M&&0==+t&&"+"!==f&&(M=!1),h=(M?"("===f?f:c:"-"===f||"("===f?"":f)+h,k=("s"===y?Tn[8+mn/3]:"")+k+(M&&"("===f?")":""),_)for(o=-1,i=t.length;++o<i;)if(48>(l=t.charCodeAt(o))||l>57){k=(46===l?a+t.slice(o+1):t.slice(o))+k,t=t.slice(0,o);break}}g&&!p&&(t=r(t,1/0));var E=h.length+t.length+k.length,A=E<d?new Array(d-E+1).join(e):"";switch(g&&p&&(t=r(A+t,A.length?d-k.length:1/0),A=""),n){case"<":t=h+t+k+A;break;case"=":t=h+A+t+k;break;case"^":t=A.slice(0,E=A.length>>1)+h+t+k+A.slice(E);break;default:t=A+h+t+k}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=yn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(gn(e)/3))),o=Math.pow(10,-r),i=Tn[8+r/3];return function(t){return n(o*t)+i}}}}function Sn(t){return Math.max(0,-gn(Math.abs(t)))}function Nn(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(gn(e)/3)))-gn(Math.abs(t)))}function On(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,gn(e)-gn(t))+1}function Ln(t){var e=t.domain;return t.ticks=function(t){var n=e();return At(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var o,i=$t(t,e,n);switch((r=yn(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=Nn(i,a))||(r.precision=o),En(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=On(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=Sn(i))||(r.precision=o-2*("%"===r.type))}return Mn(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o,i=e(),a=0,s=i.length-1,l=i[a],c=i[s],u=10;for(c<l&&(o=l,l=c,c=o,o=a,a=s,s=o);u-- >0;){if((o=Tt(l,c,n))===r)return i[a]=l,i[s]=c,e(i);if(o>0)l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o}r=o}return t},t}function zn(){var t=pn()(cn,cn);return t.copy=function(){return e=t,zn().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},Lt.apply(t,arguments),Ln(t)}kn=$n({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Mn=kn.format,En=kn.formatPrefix;var Cn={value:function(){}};function Rn(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Dn(r)}function Dn(t){this._=t}function Pn(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function jn(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=Cn,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function In(){J.preventDefault(),J.stopImmediatePropagation()}Dn.prototype=Rn.prototype={constructor:Dn,on:function(t,e){var n,r,o=this._,i=(r=o,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=i[a]).type)o[n]=jn(o[n],t.name,e);else if(null==e)for(n in o)o[n]=jn(o[n],t.name,null);return this}for(;++a<s;)if((n=(t=i[a]).type)&&(n=Pn(o[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dn(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var Fn,Hn,Bn=0,Un=0,qn=0,Wn=1e3,Yn=0,Gn=0,Xn=0,Vn="object"==typeof performance&&performance.now?performance:Date,Zn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Kn(){return Gn||(Zn(Jn),Gn=Vn.now()+Xn)}function Jn(){Gn=0}function Qn(){this._call=this._time=this._next=null}function tr(t,e,n){var r=new Qn;return r.restart(t,e,n),r}function er(){Gn=(Yn=Vn.now())+Xn,Bn=Un=0;try{!function(){Kn(),++Bn;for(var t,e=Fn;e;)(t=Gn-e._time)>=0&&e._call.call(null,t),e=e._next;--Bn}()}finally{Bn=0,function(){var t,e,n=Fn,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Fn=e);Hn=t,rr(r)}(),Gn=0}}function nr(){var t=Vn.now(),e=t-Yn;e>Wn&&(Xn-=e,Yn=t)}function rr(t){Bn||(Un&&(Un=clearTimeout(Un)),t-Gn>24?(t<1/0&&(Un=setTimeout(er,t-Vn.now()-Xn)),qn&&(qn=clearInterval(qn))):(qn||(Yn=Vn.now(),qn=setInterval(nr,Wn)),Bn=1,Zn(er)))}function or(t,e,n){var r=new Qn;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}Qn.prototype=tr.prototype={constructor:Qn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Kn():+n)+(null==e?0:+e),this._next||Hn===this||(Hn?Hn._next=this:Fn=this,Hn=this),this._call=t,this._time=n,rr()},stop:function(){this._call&&(this._call=null,this._time=1/0,rr())}};var ir=Rn("start","end","cancel","interrupt"),ar=[],sr=0,lr=1,cr=2,ur=3,fr=4,hr=5,pr=6;function dr(t,e,n,r,o,i){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,o=t.__transition;function i(t){n.state=lr,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(i){var c,u,f,h;if(n.state!==lr)return l();for(c in o)if((h=o[c]).name===n.name){if(h.state===ur)return or(a);h.state===fr?(h.state=pr,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete o[c]):+c<e&&(h.state=pr,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete o[c])}if(or((function(){n.state===ur&&(n.state=fr,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=cr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===cr){for(n.state=ur,r=new Array(f=n.tween.length),c=0,u=-1;c<f;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function s(e){for(var o=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=hr,1),i=-1,a=r.length;++i<a;)r[i].call(t,o);n.state===hr&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=pr,n.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=n,n.timer=tr(i,0,n.time)}(t,n,{name:e,index:r,group:o,on:ir,tween:ar,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:sr})}function gr(t,e){var n=vr(t,e);if(n.state>sr)throw new Error("too late; already scheduled");return n}function mr(t,e){var n=vr(t,e);if(n.state>ur)throw new Error("too late; already running");return n}function vr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function yr(t,e){var n,r,o,i=t.__transition,a=!0;if(i){for(o in e=null==e?null:e+"",i)(n=i[o]).name===e?(r=n.state>cr&&n.state<hr,n.state=pr,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete t.__transition}}function br(t,e){var n,r;return function(){var o=mr(this,t),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}o.tween=r}}function xr(t,e,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=mr(this,t),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:e,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===e){o[l]=s;break}l===c&&o.push(s)}i.tween=o}}function wr(t,e,n){var r=t._id;return t.each((function(){var t=mr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return vr(t,r).value[e]}}function _r(t,e){var n;return("number"==typeof e?Pe:e instanceof Qt?ze:(n=Qt(e))?(e=n,ze):He)(t,e)}function kr(t){return function(){this.removeAttribute(t)}}function Mr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Er(t,e,n){var r,o,i=n+"";return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Ar(t,e,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function Tr(t,e,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=e(r=a,l));this.removeAttribute(t)}}function $r(t,e,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=e(r=a,l));this.removeAttributeNS(t.space,t.local)}}function Sr(t,e){var n,r;function o(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,o)),n}return o._value=e,o}function Nr(t,e){var n,r;function o(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,o)),n}return o._value=e,o}function Or(t,e){return function(){gr(this,t).delay=+e.apply(this,arguments)}}function Lr(t,e){return e=+e,function(){gr(this,t).delay=e}}function zr(t,e){return function(){mr(this,t).duration=+e.apply(this,arguments)}}function Cr(t,e){return e=+e,function(){mr(this,t).duration=e}}var Rr=lt.prototype.constructor;function Dr(t){return function(){this.style.removeProperty(t)}}var Pr=0;function jr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ir(t){return lt().transition(t)}function Fr(){return++Pr}var Hr=lt.prototype;jr.prototype=Ir.prototype={constructor:jr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=s(t));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var l,c,u=r[a],f=u.length,h=i[a]=new Array(f),p=0;p<f;++p)(l=u[p])&&(c=t.call(l,l.__data__,p,u))&&("__data__"in l&&(c.__data__=l.__data__),h[p]=c,dr(h[p],e,n,p,h,vr(l,n)));return new jr(i,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=c(t));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l,u=r[s],f=u.length,h=0;h<f;++h)if(l=u[h]){for(var p,d=t.call(l,l.__data__,h,u),g=vr(l,n),m=0,v=d.length;m<v;++m)(p=d[m])&&dr(p,e,n,m,d,g);i.push(d),a.push(l)}return new jr(i,a,e,n)},filter:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a=e[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&t.call(i,i.__data__,c,a)&&l.push(i);return new jr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=e[s],u=n[s],f=c.length,h=a[s]=new Array(f),p=0;p<f;++p)(l=c[p]||u[p])&&(h[p]=l);for(;s<r;++s)a[s]=e[s];return new jr(a,this._parents,this._name,this._id)},selection:function(){return new Rr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Fr(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=vr(a,e);dr(a,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new jr(r,this._parents,t,n)},call:Hr.call,nodes:Hr.nodes,node:Hr.node,size:Hr.size,empty:Hr.empty,each:Hr.each,on:function(t,e){var n=this._id;return arguments.length<2?vr(this.node(),n).on.on(t):this.each(function(t,e,n){var r,o,i=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?gr:mr;return function(){var a=i(this,t),s=a.on;s!==r&&(o=(r=s).copy()).on(e,n),a.on=o}}(n,t,e))},attr:function(t,e){var r=n(t),o="transform"===r?Qe:_r;return this.attrTween(t,"function"==typeof e?(r.local?$r:Tr)(r,o,wr(this,"attr."+t,e)):null==e?(r.local?Mr:kr)(r):(r.local?Ar:Er)(r,o,e))},attrTween:function(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;var o=n(t);return this.tween(r,(o.local?Sr:Nr)(o,e))},style:function(t,e,n){var r="transform"==(t+="")?Je:_r;return null==e?this.styleTween(t,function(t,e){var n,r,o;return function(){var i=T(this,t),a=(this.style.removeProperty(t),T(this,t));return i===a?null:i===n&&a===r?o:o=e(n=i,r=a)}}(t,r)).on("end.style."+t,Dr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,o,i;return function(){var a=T(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=T(this,t)),a===l?null:a===r&&l===o?i:(o=l,i=e(r=a,s))}}(t,r,wr(this,"style."+t,e))).each(function(t,e){var n,r,o,i,a="style."+e,s="end."+a;return function(){var l=mr(this,t),c=l.on,u=null==l.value[a]?i||(i=Dr(e)):void 0;c===n&&o===u||(r=(n=c).copy()).on(s,o=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,o,i=n+"";return function(){var a=T(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,o;function i(){var i=e.apply(this,arguments);return i!==o&&(r=(o=i)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,i,n)),r}return i._value=e,i}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(wr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,o=vr(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===t)return r.value;return null}return this.each((null==e?br:xr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Or:Lr)(e,t)):vr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?zr:Cr)(e,t)):vr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){mr(this,t).ease=e}}(e,t)):vr(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,o=n.size();return new Promise((function(i,a){var s={value:a},l={value:function(){0==--o&&i()}};n.each((function(){var n=mr(this,r),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e}))}))}};var Br={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ur(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Br.time=Kn(),Br;return n}function qr(t){return function(){return t}}function Wr(t,e,n){this.target=t,this.type=e,this.transform=n}function Yr(t,e,n){this.k=t,this.x=e,this.y=n}lt.prototype.interrupt=function(t){return this.each((function(){yr(this,t)}))},lt.prototype.transition=function(t){var e,n;t instanceof jr?(e=t._id,t=t._name):(e=Fr(),(n=Br).time=Kn(),t=null==t?null:t+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)(a=s[c])&&dr(a,t,e,c,s,n||Ur(a,e));return new jr(r,this._parents,t,e)},Yr.prototype={constructor:Yr,scale:function(t){return 1===t?this:new Yr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Yr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gr=new Yr(1,0,0);function Xr(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Gr;return t.__zoom}function Vr(){J.stopImmediatePropagation()}function Zr(){J.preventDefault(),J.stopImmediatePropagation()}function Kr(){return!J.ctrlKey&&!J.button}function Jr(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Qr(){return this.__zoom||Gr}function to(){return-J.deltaY*(1===J.deltaMode?.05:J.deltaMode?1:.002)}function eo(){return navigator.maxTouchPoints||"ontouchstart"in this}function no(t,e,n){var r=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function ro(){var t,e,n=Kr,r=Jr,o=no,i=to,a=eo,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,u=an,f=Rn("start","zoom","end"),h=500,p=150,d=0;function g(t){t.property("__zoom",Qr).on("wheel.zoom",_).on("mousedown.zoom",k).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",E).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new Yr(e,t.x,t.y)}function v(t,e,n){var r=e[0]-n[0]*t.k,o=e[1]-n[1]*t.k;return r===t.x&&o===t.y?t:new Yr(t.k,r,o)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n){t.on("start.zoom",(function(){x(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).end()})).tween("zoom",(function(){var t=this,o=arguments,i=x(t,o),a=r.apply(t,o),s=null==n?y(a):"function"==typeof n?n.apply(t,o):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,f="function"==typeof e?e.apply(t,o):e,h=u(c.invert(s).concat(l/c.k),f.invert(s).concat(l/f.k));return function(t){if(1===t)t=f;else{var e=h(t),n=l/e[2];t=new Yr(n,s[0]-e[0]*n,s[1]-e[1]*n)}i.zoom(null,t)}}))}function x(t,e,n){return!n&&t.__zooming||new w(t,e)}function w(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function _(){if(n.apply(this,arguments)){var t=x(this,arguments),e=this.__zoom,r=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,i.apply(this,arguments)))),a=ht(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[a,e.invert(a)],yr(this),t.start()}Zr(),t.wheel=setTimeout((function(){t.wheel=null,t.end()}),p),t.zoom("mouse",o(v(m(e,r),t.mouse[0],t.mouse[1]),t.extent,l))}}function k(){if(!e&&n.apply(this,arguments)){var t=x(this,arguments,!0),r=ct(J.view).on("mousemove.zoom",(function(){if(Zr(),!t.moved){var e=J.clientX-a,n=J.clientY-s;t.moved=e*e+n*n>d}t.zoom("mouse",o(v(t.that.__zoom,t.mouse[0]=ht(t.that),t.mouse[1]),t.extent,l))}),!0).on("mouseup.zoom",(function(){r.on("mousemove.zoom mouseup.zoom",null),function(t,e){var n=t.document.documentElement,r=ct(t).on("dragstart.drag",null);e&&(r.on("click.drag",In,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(J.view,t.moved),Zr(),t.end()}),!0),i=ht(this),a=J.clientX,s=J.clientY;!function(t){var e=t.document.documentElement,n=ct(t).on("dragstart.drag",In,!0);"onselectstart"in e?n.on("selectstart.drag",In,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(J.view),Vr(),t.mouse=[i,this.__zoom.invert(i)],yr(this),t.start()}}function M(){if(n.apply(this,arguments)){var t=this.__zoom,e=ht(this),i=t.invert(e),a=t.k*(J.shiftKey?.5:2),s=o(v(m(t,a),e,i),r.apply(this,arguments),l);Zr(),c>0?ct(this).transition().duration(c).call(b,s,e):ct(this).call(g.transform,s)}}function E(){if(n.apply(this,arguments)){var e,r,o,i,a=J.touches,s=a.length,l=x(this,arguments,J.changedTouches.length===s);for(Vr(),r=0;r<s;++r)i=[i=pt(this,a,(o=a[r]).identifier),this.__zoom.invert(i),o.identifier],l.touch0?l.touch1||l.touch0[2]===i[2]||(l.touch1=i,l.taps=0):(l.touch0=i,e=!0,l.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(l.taps<2&&(t=setTimeout((function(){t=null}),h)),yr(this),l.start())}}function A(){if(this.__zooming){var e,n,r,i,a=x(this,arguments),s=J.changedTouches,c=s.length;for(Zr(),t&&(t=clearTimeout(t)),a.taps=0,e=0;e<c;++e)r=pt(this,s,(n=s[e]).identifier),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=r);if(n=a.that.__zoom,a.touch1){var u=a.touch0[0],f=a.touch0[1],h=a.touch1[0],p=a.touch1[1],d=(d=h[0]-u[0])*d+(d=h[1]-u[1])*d,g=(g=p[0]-f[0])*g+(g=p[1]-f[1])*g;n=m(n,Math.sqrt(d/g)),r=[(u[0]+h[0])/2,(u[1]+h[1])/2],i=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],i=a.touch0[1]}a.zoom("touch",o(v(n,r,i),a.extent,l))}}function T(){if(this.__zooming){var t,n,r=x(this,arguments),o=J.changedTouches,i=o.length;for(Vr(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),h),t=0;t<i;++t)n=o[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var a=ct(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}}return g.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",Qr),t!==r?b(t,e,n):r.interrupt().each((function(){x(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},g.scaleBy=function(t,e,n){g.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n)},g.scaleTo=function(t,e,n){g.transform(t,(function(){var t=r.apply(this,arguments),i=this.__zoom,a=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,s=i.invert(a),c="function"==typeof e?e.apply(this,arguments):e;return o(v(m(i,c),a,s),t,l)}),n)},g.translateBy=function(t,e,n){g.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),l)}))},g.translateTo=function(t,e,n,i){g.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,s=null==i?y(t):"function"==typeof i?i.apply(this,arguments):i;return o(Gr.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)}),i)},w.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){!function(t,e,n,r){var o=J;t.sourceEvent=J,J=t;try{return e.apply(n,r)}finally{J=o}}(new Wr(g,t,this.that.__zoom),f.apply,f,[t,this.that,this.args])}},g.wheelDelta=function(t){return arguments.length?(i="function"==typeof t?t:qr(+t),g):i},g.filter=function(t){return arguments.length?(n="function"==typeof t?t:qr(!!t),g):n},g.touchable=function(t){return arguments.length?(a="function"==typeof t?t:qr(!!t),g):a},g.extent=function(t){return arguments.length?(r="function"==typeof t?t:qr([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):r},g.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],g):[s[0],s[1]]},g.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],g):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},g.constrain=function(t){return arguments.length?(o=t,g):o},g.duration=function(t){return arguments.length?(c=+t,g):c},g.interpolate=function(t){return arguments.length?(u=t,g):u},g.on=function(){var t=f.on.apply(f,arguments);return t===f?g:t},g.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,g):Math.sqrt(d)},g}Xr.prototype=Yr.prototype;var oo="$";function io(){}function ao(t,e){var n=new io;if(t instanceof io)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,o=-1,i=t.length;if(null==e)for(;++o<i;)n.set(o,t[o]);else for(;++o<i;)n.set(e(r=t[o],o,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function so(){}io.prototype=ao.prototype={constructor:io,has:function(t){return oo+t in this},get:function(t){return this[oo+t]},set:function(t,e){return this[oo+t]=e,this},remove:function(t){var e=oo+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===oo&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===oo&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===oo&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===oo&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===oo&&++t;return t},empty:function(){for(var t in this)if(t[0]===oo)return!1;return!0},each:function(t){for(var e in this)e[0]===oo&&t(this[e],e.slice(1),this)}};var lo=ao.prototype;function co(t){var e=[];for(var n in t)e.push(t[n]);return e}function uo(){for(var t=arguments,e=0,n=t.length;e<n;)"string"!=typeof t[e]&&"number"!=typeof t[e]||(t[e]=function(t){return function(e){return e[t]}}(t[e])),e++;return function(e){for(var n=0,r=t.length;n++<r;)e=t[n-1].call(this,e);return e}}so.prototype={constructor:so,has:lo.has,add:function(t){return this[oo+(t+="")]=t,this},remove:lo.remove,clear:lo.clear,values:lo.keys,size:lo.size,empty:lo.empty,each:lo.each},uo.not=function(t){return!t},uo.run=function(t){return t()},uo.objToFn=function(t,e){return 1==arguments.length&&(e=void 0),function(n){return void 0!==t[n]?t[n]:e}};const fo=/^(allowReorder|attributeName|attributeType|autoReverse|baseFrequency|baseProfile|calcMode|clipPathUnits|contentScriptType|contentStyleType|diffuseConstant|edgeMode|externalResourcesRequired|filterRes|filterUnits|glyphRef|gradientTransform|gradientUnits|kernelMatrix|kernelUnitLength|keyPoints|keySplines|keyTimes|lengthAdjust|limitingConeAngle|markerHeight|markerUnits|markerWidth|maskContentUnits|maskUnits|numOctaves|pathLength|patternContentUnits|patternTransform|patternUnits|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|referrerPolicy|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|specularConstant|specularExponent|spreadMethod|startOffset|stdDeviation|stitchTiles|surfaceScale|systemLanguage|tableValues|targetX|targetY|textLength|viewBox|viewTarget|xChannelSelector|yChannelSelector|zoomAndPan)$/;function ho(t,e){if("object"==typeof t){for(var n in t)this.attr(fo.test(n)?n:n.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),t[n]);return this}return 1==arguments.length?this.attr(t):this.attr(t,e)}function po(t){if("string"==typeof t){var e,n={},r=t.split(/([\.#])/g);for(t=r.shift();e=r.shift();)"."==e?n.class=n.class?n.class+" "+r.shift():r.shift():"#"==e&&(n.id=r.shift());return{tag:t,attr:n}}return t}function go(t){var e,n;"function"==typeof t?e=t:(n=po(t),e=i(n.tag));var r=this.select((function(){return this.appendChild(e.apply(this,arguments))}));if(n)for(var o in n.attr)r.attr(o,n.attr[o]);return r}function mo(t,e){var n=this.node();return n?n.getBBox?this.attr("transform",(function(n,r){var o="function"==typeof t?t.call(this,n,r):t;return 0===e?o=[o,0]:1===e&&(o=[0,o]),"translate("+o[0]+","+o[1]+")"})):this.style("transform",(function(n,r){var o="function"==typeof t?t.call(this,n,r):t;return 0===e?o=[o,0]:1===e&&(o=[0,o]),"translate("+o[0]+"px,"+o[1]+"px)"})):this}function vo(t,e){return this.selectAll("tspan").data((function(e,n){return("function"==typeof t?t.call(this,e,n):t).map((function(t){return{line:t,parent:e}}))})).enter().append("tspan").text((function(t){return t.line})).attr("x",0).attr("dy",(function(t,n){return n?("function"==typeof e?e.call(this,t.parent,t.line,n):e)||15:0}))}var yo=1e-6,bo=1e-12,xo=Math.PI,wo=xo/2,_o=xo/4,ko=2*xo,Mo=180/xo,Eo=xo/180,Ao=Math.abs,To=Math.atan,$o=Math.atan2,So=Math.cos,No=Math.ceil,Oo=Math.exp,Lo=Math.hypot,zo=Math.log,Co=Math.pow,Ro=Math.sin,Do=Math.sign||function(t){return t>0?1:t<0?-1:0},Po=Math.sqrt,jo=Math.tan;function Io(t){return t>1?0:t<-1?xo:Math.acos(t)}function Fo(t){return t>1?wo:t<-1?-wo:Math.asin(t)}function Ho(t){return(t=Ro(t/2))*t}function Bo(){}function Uo(t,e){t&&Wo.hasOwnProperty(t.type)&&Wo[t.type](t,e)}var qo={Feature:function(t,e){Uo(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)Uo(n[r].geometry,e)}},Wo={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Yo(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)Yo(n[r],e,0)},Polygon:function(t,e){Go(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)Go(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)Uo(n[r],e)}};function Yo(t,e,n){var r,o=-1,i=t.length-n;for(e.lineStart();++o<i;)r=t[o],e.point(r[0],r[1],r[2]);e.lineEnd()}function Go(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Yo(t[n],e,1);e.polygonEnd()}function Xo(t,e){t&&qo.hasOwnProperty(t.type)?qo[t.type](t,e):Uo(t,e)}var Vo,Zo,Ko,Jo,Qo,ti,ei,ni,ri,oi,ii,ai,si,li,ci,ui,fi=new bt,hi=new bt,pi={point:Bo,lineStart:Bo,lineEnd:Bo,polygonStart:function(){fi=new bt,pi.lineStart=di,pi.lineEnd=gi},polygonEnd:function(){var t=+fi;hi.add(t<0?ko+t:t),this.lineStart=this.lineEnd=this.point=Bo},sphere:function(){hi.add(ko)}};function di(){pi.point=mi}function gi(){vi(Vo,Zo)}function mi(t,e){pi.point=vi,Vo=t,Zo=e,Ko=t*=Eo,Jo=So(e=(e*=Eo)/2+_o),Qo=Ro(e)}function vi(t,e){var n=(t*=Eo)-Ko,r=n>=0?1:-1,o=r*n,i=So(e=(e*=Eo)/2+_o),a=Ro(e),s=Qo*a,l=Jo*i+s*So(o),c=s*r*Ro(o);fi.add($o(c,l)),Ko=t,Jo=i,Qo=a}function yi(t){return[$o(t[1],t[0]),Fo(t[2])]}function bi(t){var e=t[0],n=t[1],r=So(n);return[r*So(e),r*Ro(e),Ro(n)]}function xi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function wi(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function _i(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ki(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Mi(t){var e=Po(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Ei,Ai,Ti,$i,Si,Ni,Oi,Li,zi,Ci,Ri,Di,Pi,ji,Ii,Fi,Hi={point:Bi,lineStart:qi,lineEnd:Wi,polygonStart:function(){Hi.point=Yi,Hi.lineStart=Gi,Hi.lineEnd=Xi,li=new bt,pi.polygonStart()},polygonEnd:function(){pi.polygonEnd(),Hi.point=Bi,Hi.lineStart=qi,Hi.lineEnd=Wi,fi<0?(ti=-(ni=180),ei=-(ri=90)):li>yo?ri=90:li<-yo&&(ei=-90),ui[0]=ti,ui[1]=ni},sphere:function(){ti=-(ni=180),ei=-(ri=90)}};function Bi(t,e){ci.push(ui=[ti=t,ni=t]),e<ei&&(ei=e),e>ri&&(ri=e)}function Ui(t,e){var n=bi([t*Eo,e*Eo]);if(si){var r=wi(si,n),o=wi([r[1],-r[0],0],r);Mi(o),o=yi(o);var i,a=t-oi,s=a>0?1:-1,l=o[0]*Mo*s,c=Ao(a)>180;c^(s*oi<l&&l<s*t)?(i=o[1]*Mo)>ri&&(ri=i):c^(s*oi<(l=(l+360)%360-180)&&l<s*t)?(i=-o[1]*Mo)<ei&&(ei=i):(e<ei&&(ei=e),e>ri&&(ri=e)),c?t<oi?Vi(ti,t)>Vi(ti,ni)&&(ni=t):Vi(t,ni)>Vi(ti,ni)&&(ti=t):ni>=ti?(t<ti&&(ti=t),t>ni&&(ni=t)):t>oi?Vi(ti,t)>Vi(ti,ni)&&(ni=t):Vi(t,ni)>Vi(ti,ni)&&(ti=t)}else ci.push(ui=[ti=t,ni=t]);e<ei&&(ei=e),e>ri&&(ri=e),si=n,oi=t}function qi(){Hi.point=Ui}function Wi(){ui[0]=ti,ui[1]=ni,Hi.point=Bi,si=null}function Yi(t,e){if(si){var n=t-oi;li.add(Ao(n)>180?n+(n>0?360:-360):n)}else ii=t,ai=e;pi.point(t,e),Ui(t,e)}function Gi(){pi.lineStart()}function Xi(){Yi(ii,ai),pi.lineEnd(),Ao(li)>yo&&(ti=-(ni=180)),ui[0]=ti,ui[1]=ni,si=null}function Vi(t,e){return(e-=t)<0?e+360:e}function Zi(t,e){return t[0]-e[0]}function Ki(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Ji={sphere:Bo,point:Qi,lineStart:ea,lineEnd:oa,polygonStart:function(){Ji.lineStart=ia,Ji.lineEnd=aa},polygonEnd:function(){Ji.lineStart=ea,Ji.lineEnd=oa}};function Qi(t,e){t*=Eo;var n=So(e*=Eo);ta(n*So(t),n*Ro(t),Ro(e))}function ta(t,e,n){++Ei,Ti+=(t-Ti)/Ei,$i+=(e-$i)/Ei,Si+=(n-Si)/Ei}function ea(){Ji.point=na}function na(t,e){t*=Eo;var n=So(e*=Eo);ji=n*So(t),Ii=n*Ro(t),Fi=Ro(e),Ji.point=ra,ta(ji,Ii,Fi)}function ra(t,e){t*=Eo;var n=So(e*=Eo),r=n*So(t),o=n*Ro(t),i=Ro(e),a=$o(Po((a=Ii*i-Fi*o)*a+(a=Fi*r-ji*i)*a+(a=ji*o-Ii*r)*a),ji*r+Ii*o+Fi*i);Ai+=a,Ni+=a*(ji+(ji=r)),Oi+=a*(Ii+(Ii=o)),Li+=a*(Fi+(Fi=i)),ta(ji,Ii,Fi)}function oa(){Ji.point=Qi}function ia(){Ji.point=sa}function aa(){la(Di,Pi),Ji.point=Qi}function sa(t,e){Di=t,Pi=e,t*=Eo,e*=Eo,Ji.point=la;var n=So(e);ji=n*So(t),Ii=n*Ro(t),Fi=Ro(e),ta(ji,Ii,Fi)}function la(t,e){t*=Eo;var n=So(e*=Eo),r=n*So(t),o=n*Ro(t),i=Ro(e),a=Ii*i-Fi*o,s=Fi*r-ji*i,l=ji*o-Ii*r,c=Lo(a,s,l),u=Fo(c),f=c&&-u/c;zi.add(f*a),Ci.add(f*s),Ri.add(f*l),Ai+=u,Ni+=u*(ji+(ji=r)),Oi+=u*(Ii+(Ii=o)),Li+=u*(Fi+(Fi=i)),ta(ji,Ii,Fi)}function ca(t){return function(){return t}}function ua(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function fa(t,e){return[Ao(t)>xo?t+Math.round(-t/ko)*ko:t,e]}function ha(t,e,n){return(t%=ko)?e||n?ua(da(t),ga(e,n)):da(t):e||n?ga(e,n):fa}function pa(t){return function(e,n){return[(e+=t)>xo?e-ko:e<-xo?e+ko:e,n]}}function da(t){var e=pa(t);return e.invert=pa(-t),e}function ga(t,e){var n=So(t),r=Ro(t),o=So(e),i=Ro(e);function a(t,e){var a=So(e),s=So(t)*a,l=Ro(t)*a,c=Ro(e),u=c*n+s*r;return[$o(l*o-u*i,s*n-c*r),Fo(u*o+l*i)]}return a.invert=function(t,e){var a=So(e),s=So(t)*a,l=Ro(t)*a,c=Ro(e),u=c*o-l*i;return[$o(l*o+c*i,s*n+u*r),Fo(u*n-s*r)]},a}function ma(t){function e(e){return(e=t(e[0]*Eo,e[1]*Eo))[0]*=Mo,e[1]*=Mo,e}return t=ha(t[0]*Eo,t[1]*Eo,t.length>2?t[2]*Eo:0),e.invert=function(e){return(e=t.invert(e[0]*Eo,e[1]*Eo))[0]*=Mo,e[1]*=Mo,e},e}function va(t,e,n,r,o,i){if(n){var a=So(e),s=Ro(e),l=r*n;null==o?(o=e+r*ko,i=e-l/2):(o=ya(a,o),i=ya(a,i),(r>0?o<i:o>i)&&(o+=r*ko));for(var c,u=o;r>0?u>i:u<i;u-=l)c=yi([a,-s*So(u),-s*Ro(u)]),t.point(c[0],c[1])}}function ya(t,e){(e=bi(e))[0]-=t,Mi(e);var n=Io(-e[1]);return((-e[2]<0?-n:n)+ko-yo)%ko}function ba(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Bo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function xa(t,e){return Ao(t[0]-e[0])<yo&&Ao(t[1]-e[1])<yo}function wa(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function _a(t,e,n,r,o){var i,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(xa(r,a)){if(!r[2]&&!a[2]){for(o.lineStart(),i=0;i<e;++i)o.point((r=t[i])[0],r[1]);return void o.lineEnd()}a[0]+=2*yo}s.push(n=new wa(r,t,null,!0)),l.push(n.o=new wa(r,null,n,!1)),s.push(n=new wa(a,t,null,!1)),l.push(n.o=new wa(a,null,n,!0))}})),s.length){for(l.sort(e),ka(s),ka(l),i=0,a=l.length;i<a;++i)l[i].e=n=!n;for(var c,u,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(i=0,a=c.length;i<a;++i)o.point((u=c[i])[0],u[1]);else r(h.x,h.n.x,1,o);h=h.n}else{if(p)for(c=h.p.z,i=c.length-1;i>=0;--i)o.point((u=c[i])[0],u[1]);else r(h.x,h.p.x,-1,o);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);o.lineEnd()}}}function ka(t){if(e=t.length){for(var e,n,r=0,o=t[0];++r<e;)o.n=n=t[r],n.p=o,o=n;o.n=n=t[0],n.p=o}}function Ma(t){return Ao(t[0])<=xo?t[0]:Do(t[0])*((Ao(t[0])+xo)%ko-xo)}function Ea(t,e){var n=Ma(e),r=e[1],o=Ro(r),i=[Ro(n),-So(n),0],a=0,s=0,l=new bt;1===o?r=wo+yo:-1===o&&(r=-wo-yo);for(var c=0,u=t.length;c<u;++c)if(h=(f=t[c]).length)for(var f,h,p=f[h-1],d=Ma(p),g=p[1]/2+_o,m=Ro(g),v=So(g),y=0;y<h;++y,d=x,m=_,v=k,p=b){var b=f[y],x=Ma(b),w=b[1]/2+_o,_=Ro(w),k=So(w),M=x-d,E=M>=0?1:-1,A=E*M,T=A>xo,$=m*_;if(l.add($o($*E*Ro(A),v*k+$*So(A))),a+=T?M+E*ko:M,T^d>=n^x>=n){var S=wi(bi(p),bi(b));Mi(S);var N=wi(i,S);Mi(N);var O=(T^M>=0?-1:1)*Fo(N[2]);(r>O||r===O&&(S[0]||S[1]))&&(s+=T^M>=0?1:-1)}}return(a<-yo||a<yo&&l<-bo)^1&s}function Aa(t,e,n,r){return function(o){var i,a,s,l=e(o),c=ba(),u=e(c),f=!1,h={point:p,lineStart:g,lineEnd:m,polygonStart:function(){h.point=v,h.lineStart=y,h.lineEnd=b,a=[],i=[]},polygonEnd:function(){h.point=p,h.lineStart=g,h.lineEnd=m,a=Nt(a);var t=Ea(i,r);a.length?(f||(o.polygonStart(),f=!0),_a(a,$a,t,n,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),a=i=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function p(e,n){t(e,n)&&o.point(e,n)}function d(t,e){l.point(t,e)}function g(){h.point=d,l.lineStart()}function m(){h.point=p,l.lineEnd()}function v(t,e){s.push([t,e]),u.point(t,e)}function y(){u.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),h=c.result(),p=h.length;if(s.pop(),i.push(s),s=null,p)if(1&l){if((e=(n=h[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else p>1&&2&l&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Ta))}return h}}function Ta(t){return t.length>1}function $a(t,e){return((t=t.x)[0]<0?t[1]-wo-yo:wo-t[1])-((e=e.x)[0]<0?e[1]-wo-yo:wo-e[1])}fa.invert=fa;var Sa=Aa((function(){return!0}),(function(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,a){var s=i>0?xo:-xo,l=Ao(i-n);Ao(l-xo)<yo?(t.point(n,r=(r+a)/2>0?wo:-wo),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(i,r),e=0):o!==s&&l>=xo&&(Ao(n-o)<yo&&(n-=o*yo),Ao(i-s)<yo&&(i-=s*yo),r=function(t,e,n,r){var o,i,a=Ro(t-n);return Ao(a)>yo?To((Ro(e)*(i=So(r))*Ro(n)-Ro(r)*(o=So(e))*Ro(t))/(o*i*a)):(e+r)/2}(n,r,i,a),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=i,r=a),o=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var o;if(null==t)o=n*wo,r.point(-xo,o),r.point(0,o),r.point(xo,o),r.point(xo,0),r.point(xo,-o),r.point(0,-o),r.point(-xo,-o),r.point(-xo,0),r.point(-xo,o);else if(Ao(t[0]-e[0])>yo){var i=t[0]<e[0]?xo:-xo;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(e[0],e[1])}),[-xo,-wo]);function Na(t){var e=So(t),n=6*Eo,r=e>0,o=Ao(e)>yo;function i(t,n){return So(t)*So(n)>e}function a(t,n,r){var o=[1,0,0],i=wi(bi(t),bi(n)),a=xi(i,i),s=i[0],l=a-s*s;if(!l)return!r&&t;var c=e*a/l,u=-e*s/l,f=wi(o,i),h=ki(o,c);_i(h,ki(i,u));var p=f,d=xi(h,p),g=xi(p,p),m=d*d-g*(xi(h,h)-1);if(!(m<0)){var v=Po(m),y=ki(p,(-d-v)/g);if(_i(y,h),y=yi(y),!r)return y;var b,x=t[0],w=n[0],_=t[1],k=n[1];w<x&&(b=x,x=w,w=b);var M=w-x,E=Ao(M-xo)<yo;if(!E&&k<_&&(b=_,_=k,k=b),E||M<yo?E?_+k>0^y[1]<(Ao(y[0]-x)<yo?_:k):_<=y[1]&&y[1]<=k:M>xo^(x<=y[0]&&y[0]<=w)){var A=ki(p,(-d+v)/g);return _i(A,h),[y,yi(A)]}}}function s(e,n){var o=r?t:xo-t,i=0;return e<-o?i|=1:e>o&&(i|=2),n<-o?i|=4:n>o&&(i|=8),i}return Aa(i,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(f,h){var p,d=[f,h],g=i(f,h),m=r?g?0:s(f,h):g?s(f+(f<0?xo:-xo),h):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(!(p=a(e,d))||xa(e,p)||xa(d,p))&&(d[2]=1),g!==l)u=0,g?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(o&&e&&r^g){var v;m&n||!(v=a(d,e,!0))||(u=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||e&&xa(e,d)||t.point(d[0],d[1]),e=d,l=g,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(e,r,o,i){va(i,t,n,o,e,r)}),r?[0,-t]:[-xo,t-xo])}var Oa,La,za,Ca,Ra=1e9,Da=-Ra;function Pa(t,e,n,r){function o(o,i){return t<=o&&o<=n&&e<=i&&i<=r}function i(o,i,s,c){var u=0,f=0;if(null==o||(u=a(o,s))!==(f=a(i,s))||l(o,i)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==f);else c.point(i[0],i[1])}function a(r,o){return Ao(r[0]-t)<yo?o>0?0:3:Ao(r[0]-n)<yo?o>0?2:1:Ao(r[1]-e)<yo?o>0?1:0:o>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,c,u,f,h,p,d,g,m,v,y,b=a,x=ba(),w={point:_,lineStart:function(){w.point=k,c&&c.push(u=[]);v=!0,m=!1,d=g=NaN},lineEnd:function(){l&&(k(f,h),p&&m&&x.rejoin(),l.push(x.result()));w.point=_,m&&b.lineEnd()},polygonStart:function(){b=x,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,o=c.length;n<o;++n)for(var i,a,s=c[n],l=1,u=s.length,f=s[0],h=f[0],p=f[1];l<u;++l)i=h,a=p,h=(f=s[l])[0],p=f[1],a<=r?p>r&&(h-i)*(r-a)>(p-a)*(t-i)&&++e:p<=r&&(h-i)*(r-a)<(p-a)*(t-i)&&--e;return e}(),n=y&&e,o=(l=Nt(l)).length;(n||o)&&(a.polygonStart(),n&&(a.lineStart(),i(null,null,1,a),a.lineEnd()),o&&_a(l,s,e,i,a),a.polygonEnd());b=a,l=c=u=null}};function _(t,e){o(t,e)&&b.point(t,e)}function k(i,a){var s=o(i,a);if(c&&u.push([i,a]),v)f=i,h=a,p=s,v=!1,s&&(b.lineStart(),b.point(i,a));else if(s&&m)b.point(i,a);else{var l=[d=Math.max(Da,Math.min(Ra,d)),g=Math.max(Da,Math.min(Ra,g))],x=[i=Math.max(Da,Math.min(Ra,i)),a=Math.max(Da,Math.min(Ra,a))];!function(t,e,n,r,o,i){var a,s=t[0],l=t[1],c=0,u=1,f=e[0]-s,h=e[1]-l;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<u&&(u=a)}else if(f>0){if(a>u)return;a>c&&(c=a)}if(a=o-s,f||!(a<0)){if(a/=f,f<0){if(a>u)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<u&&(u=a)}if(a=r-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=i-l,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}return c>0&&(t[0]=s+c*f,t[1]=l+c*h),u<1&&(e[0]=s+u*f,e[1]=l+u*h),!0}}}}}(l,x,t,e,n,r)?s&&(b.lineStart(),b.point(i,a),y=!1):(m||(b.lineStart(),b.point(l[0],l[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1)}d=i,g=a,m=s}return w}}var ja={sphere:Bo,point:Bo,lineStart:function(){ja.point=Fa,ja.lineEnd=Ia},lineEnd:Bo,polygonStart:Bo,polygonEnd:Bo};function Ia(){ja.point=ja.lineEnd=Bo}function Fa(t,e){La=t*=Eo,za=Ro(e*=Eo),Ca=So(e),ja.point=Ha}function Ha(t,e){t*=Eo;var n=Ro(e*=Eo),r=So(e),o=Ao(t-La),i=So(o),a=r*Ro(o),s=Ca*n-za*r*i,l=za*n+Ca*r*i;Oa.add($o(Po(a*a+s*s),l)),La=t,za=n,Ca=r}function Ba(t){return Oa=new bt,Xo(t,ja),+Oa}var Ua=[null,null],qa={type:"LineString",coordinates:Ua};function Wa(t,e){return Ua[0]=t,Ua[1]=e,Ba(qa)}var Ya={Feature:function(t,e){return Xa(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)if(Xa(n[r].geometry,e))return!0;return!1}},Ga={Sphere:function(){return!0},Point:function(t,e){return Va(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)if(Va(n[r],e))return!0;return!1},LineString:function(t,e){return Za(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)if(Za(n[r],e))return!0;return!1},Polygon:function(t,e){return Ka(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)if(Ka(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)if(Xa(n[r],e))return!0;return!1}};function Xa(t,e){return!(!t||!Ga.hasOwnProperty(t.type))&&Ga[t.type](t,e)}function Va(t,e){return 0===Wa(t,e)}function Za(t,e){for(var n,r,o,i=0,a=t.length;i<a;i++){if(0===(r=Wa(t[i],e)))return!0;if(i>0&&(o=Wa(t[i],t[i-1]))>0&&n<=o&&r<=o&&(n+r-o)*(1-Math.pow((n-r)/o,2))<bo*o)return!0;n=r}return!1}function Ka(t,e){return!!Ea(t.map(Ja),Qa(e))}function Ja(t){return(t=t.map(Qa)).pop(),t}function Qa(t){return[t[0]*Eo,t[1]*Eo]}function ts(t,e,n){var r=Ot(t,e-yo,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function es(t,e,n){var r=Ot(t,e-yo,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function ns(){var t,e,n,r,o,i,a,s,l,c,u,f,h=10,p=h,d=90,g=360,m=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Ot(No(r/d)*d,n,d).map(u).concat(Ot(No(s/g)*g,a,g).map(f)).concat(Ot(No(e/h)*h,t,h).filter((function(t){return Ao(t%d)>yo})).map(l)).concat(Ot(No(i/p)*p,o,p).filter((function(t){return Ao(t%g)>yo})).map(c))}return v.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[u(r).concat(f(a).slice(1),u(n).reverse().slice(1),f(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),v.precision(m)):[[r,s],[n,a]]},v.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],i=+n[0][1],o=+n[1][1],e>t&&(n=e,e=t,t=n),i>o&&(n=i,i=o,o=n),v.precision(m)):[[e,i],[t,o]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(d=+t[0],g=+t[1],v):[d,g]},v.stepMinor=function(t){return arguments.length?(h=+t[0],p=+t[1],v):[h,p]},v.precision=function(h){return arguments.length?(m=+h,l=ts(i,o,90),c=es(e,t,m),u=ts(s,a,90),f=es(r,n,m),v):m},v.extentMajor([[-180,-90+yo],[180,90-yo]]).extentMinor([[-180,-80-yo],[180,80+yo]])}var rs,os,is,as,ss=t=>t,ls=new bt,cs=new bt,us={point:Bo,lineStart:Bo,lineEnd:Bo,polygonStart:function(){us.lineStart=fs,us.lineEnd=ds},polygonEnd:function(){us.lineStart=us.lineEnd=us.point=Bo,ls.add(Ao(cs)),cs=new bt},result:function(){var t=ls/2;return ls=new bt,t}};function fs(){us.point=hs}function hs(t,e){us.point=ps,rs=is=t,os=as=e}function ps(t,e){cs.add(as*t-is*e),is=t,as=e}function ds(){ps(rs,os)}var gs=us,ms=1/0,vs=ms,ys=-ms,bs=ys,xs={point:function(t,e){t<ms&&(ms=t);t>ys&&(ys=t);e<vs&&(vs=e);e>bs&&(bs=e)},lineStart:Bo,lineEnd:Bo,polygonStart:Bo,polygonEnd:Bo,result:function(){var t=[[ms,vs],[ys,bs]];return ys=bs=-(vs=ms=1/0),t}};var ws,_s,ks,Ms,Es=xs,As=0,Ts=0,$s=0,Ss=0,Ns=0,Os=0,Ls=0,zs=0,Cs=0,Rs={point:Ds,lineStart:Ps,lineEnd:Fs,polygonStart:function(){Rs.lineStart=Hs,Rs.lineEnd=Bs},polygonEnd:function(){Rs.point=Ds,Rs.lineStart=Ps,Rs.lineEnd=Fs},result:function(){var t=Cs?[Ls/Cs,zs/Cs]:Os?[Ss/Os,Ns/Os]:$s?[As/$s,Ts/$s]:[NaN,NaN];return As=Ts=$s=Ss=Ns=Os=Ls=zs=Cs=0,t}};function Ds(t,e){As+=t,Ts+=e,++$s}function Ps(){Rs.point=js}function js(t,e){Rs.point=Is,Ds(ks=t,Ms=e)}function Is(t,e){var n=t-ks,r=e-Ms,o=Po(n*n+r*r);Ss+=o*(ks+t)/2,Ns+=o*(Ms+e)/2,Os+=o,Ds(ks=t,Ms=e)}function Fs(){Rs.point=Ds}function Hs(){Rs.point=Us}function Bs(){qs(ws,_s)}function Us(t,e){Rs.point=qs,Ds(ws=ks=t,_s=Ms=e)}function qs(t,e){var n=t-ks,r=e-Ms,o=Po(n*n+r*r);Ss+=o*(ks+t)/2,Ns+=o*(Ms+e)/2,Os+=o,Ls+=(o=Ms*t-ks*e)*(ks+t),zs+=o*(Ms+e),Cs+=3*o,Ds(ks=t,Ms=e)}var Ws=Rs;function Ys(t){this._context=t}Ys.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,ko)}},result:Bo};var Gs,Xs,Vs,Zs,Ks,Js=new bt,Qs={point:Bo,lineStart:function(){Qs.point=tl},lineEnd:function(){Gs&&el(Xs,Vs),Qs.point=Bo},polygonStart:function(){Gs=!0},polygonEnd:function(){Gs=null},result:function(){var t=+Js;return Js=new bt,t}};function tl(t,e){Qs.point=el,Xs=Zs=t,Vs=Ks=e}function el(t,e){Zs-=t,Ks-=e,Js.add(Po(Zs*Zs+Ks*Ks)),Zs=t,Ks=e}var nl=Qs;function rl(){this._string=[]}function ol(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function il(t,e){var n,r,o=4.5;function i(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Xo(t,n(r))),r.result()}return i.area=function(t){return Xo(t,n(gs)),gs.result()},i.measure=function(t){return Xo(t,n(nl)),nl.result()},i.bounds=function(t){return Xo(t,n(Es)),Es.result()},i.centroid=function(t){return Xo(t,n(Ws)),Ws.result()},i.projection=function(e){return arguments.length?(n=null==e?(t=null,ss):(t=e).stream,i):t},i.context=function(t){return arguments.length?(r=null==t?(e=null,new rl):new Ys(e=t),"function"!=typeof o&&r.pointRadius(o),i):e},i.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),i):o},i.projection(t).context(e)}function al(t){return{stream:sl(t)}}function sl(t){return function(e){var n=new ll;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ll(){}function cl(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Xo(n,t.stream(Es)),e(Es.result()),null!=r&&t.clipExtent(r),t}function ul(t,e,n){return cl(t,(function(n){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],i=Math.min(r/(n[1][0]-n[0][0]),o/(n[1][1]-n[0][1])),a=+e[0][0]+(r-i*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(o-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,s])}),n)}function fl(t,e,n){return ul(t,[[0,0],e],n)}function hl(t,e,n){return cl(t,(function(n){var r=+e,o=r/(n[1][0]-n[0][0]),i=(r-o*(n[1][0]+n[0][0]))/2,a=-o*n[0][1];t.scale(150*o).translate([i,a])}),n)}function pl(t,e,n){return cl(t,(function(n){var r=+e,o=r/(n[1][1]-n[0][1]),i=-o*n[0][0],a=(r-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([i,a])}),n)}rl.prototype={_radius:4.5,_circle:ol(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=ol(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},ll.prototype={constructor:ll,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var dl=16,gl=So(30*Eo);function ml(t,e){return+e?function(t,e){function n(r,o,i,a,s,l,c,u,f,h,p,d,g,m){var v=c-r,y=u-o,b=v*v+y*y;if(b>4*e&&g--){var x=a+h,w=s+p,_=l+d,k=Po(x*x+w*w+_*_),M=Fo(_/=k),E=Ao(Ao(_)-1)<yo||Ao(i-f)<yo?(i+f)/2:$o(w,x),A=t(E,M),T=A[0],$=A[1],S=T-r,N=$-o,O=y*S-v*N;(O*O/b>e||Ao((v*S+y*N)/b-.5)>.3||a*h+s*p+l*d<gl)&&(n(r,o,i,a,s,l,T,$,E,x/=k,w/=k,_,g,m),m.point(T,$),n(T,$,E,x,w,_,c,u,f,h,p,d,g,m))}}return function(e){var r,o,i,a,s,l,c,u,f,h,p,d,g={point:m,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){u=NaN,g.point=y,e.lineStart()}function y(r,o){var i=bi([r,o]),a=t(r,o);n(u,f,c,h,p,d,u=a[0],f=a[1],c=r,h=i[0],p=i[1],d=i[2],dl,e),e.point(u,f)}function b(){g.point=m,e.lineEnd()}function x(){v(),g.point=w,g.lineEnd=_}function w(t,e){y(r=t,e),o=u,i=f,a=h,s=p,l=d,g.point=y}function _(){n(u,f,c,h,p,d,o,i,r,a,s,l,dl,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return sl({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var vl=sl({point:function(t,e){this.stream.point(t*Eo,e*Eo)}});function yl(t,e,n,r,o,i){if(!i)return function(t,e,n,r,o){function i(i,a){return[e+t*(i*=r),n-t*(a*=o)]}return i.invert=function(i,a){return[(i-e)/t*r,(n-a)/t*o]},i}(t,e,n,r,o);var a=So(i),s=Ro(i),l=a*t,c=s*t,u=a/t,f=s/t,h=(s*n-a*e)/t,p=(s*e+a*n)/t;function d(t,i){return[l*(t*=r)-c*(i*=o)+e,n-c*t-l*i]}return d.invert=function(t,e){return[r*(u*t-f*e+h),o*(p-f*t-u*e)]},d}function bl(t){return xl((function(){return t}))()}function xl(t){var e,n,r,o,i,a,s,l,c,u,f=150,h=480,p=250,d=0,g=0,m=0,v=0,y=0,b=0,x=1,w=1,_=null,k=Sa,M=null,E=ss,A=.5;function T(t){return l(t[0]*Eo,t[1]*Eo)}function $(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Mo,t[1]*Mo]}function S(){var t=yl(f,0,0,x,w,b).apply(null,e(d,g)),r=yl(f,h-t[0],p-t[1],x,w,b);return n=ha(m,v,y),s=ua(e,r),l=ua(n,s),a=ml(s,A),N()}function N(){return c=u=null,T}return T.stream=function(t){return c&&u===t?c:c=vl(function(t){return sl({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(k(a(E(u=t)))))},T.preclip=function(t){return arguments.length?(k=t,_=void 0,N()):k},T.postclip=function(t){return arguments.length?(E=t,M=r=o=i=null,N()):E},T.clipAngle=function(t){return arguments.length?(k=+t?Na(_=t*Eo):(_=null,Sa),N()):_*Mo},T.clipExtent=function(t){return arguments.length?(E=null==t?(M=r=o=i=null,ss):Pa(M=+t[0][0],r=+t[0][1],o=+t[1][0],i=+t[1][1]),N()):null==M?null:[[M,r],[o,i]]},T.scale=function(t){return arguments.length?(f=+t,S()):f},T.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],S()):[h,p]},T.center=function(t){return arguments.length?(d=t[0]%360*Eo,g=t[1]%360*Eo,S()):[d*Mo,g*Mo]},T.rotate=function(t){return arguments.length?(m=t[0]%360*Eo,v=t[1]%360*Eo,y=t.length>2?t[2]%360*Eo:0,S()):[m*Mo,v*Mo,y*Mo]},T.angle=function(t){return arguments.length?(b=t%360*Eo,S()):b*Mo},T.reflectX=function(t){return arguments.length?(x=t?-1:1,S()):x<0},T.reflectY=function(t){return arguments.length?(w=t?-1:1,S()):w<0},T.precision=function(t){return arguments.length?(a=ml(s,A=t*t),N()):Po(A)},T.fitExtent=function(t,e){return ul(T,t,e)},T.fitSize=function(t,e){return fl(T,t,e)},T.fitWidth=function(t,e){return hl(T,t,e)},T.fitHeight=function(t,e){return pl(T,t,e)},function(){return e=t.apply(this,arguments),T.invert=e.invert&&$,S()}}function wl(t){var e=0,n=xo/3,r=xl(t),o=r(e,n);return o.parallels=function(t){return arguments.length?r(e=t[0]*Eo,n=t[1]*Eo):[e*Mo,n*Mo]},o}function _l(t,e){var n=Ro(t),r=(n+Ro(e))/2;if(Ao(r)<yo)return function(t){var e=So(t);function n(t,n){return[t*e,Ro(n)/e]}return n.invert=function(t,n){return[t/e,Fo(n*e)]},n}(t);var o=1+n*(2*r-n),i=Po(o)/r;function a(t,e){var n=Po(o-2*r*Ro(e))/r;return[n*Ro(t*=r),i-n*So(t)]}return a.invert=function(t,e){var n=i-e,a=$o(t,Ao(n))*Do(n);return n*r<0&&(a-=xo*Do(t)*Do(n)),[a/r,Fo((o-(t*t+n*n)*r*r)/(2*r))]},a}function kl(){return wl(_l).scale(155.424).center([0,33.6442])}function Ml(){return kl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function El(t){return function(e,n){var r=So(e),o=So(n),i=t(r*o);return i===1/0?[2,0]:[i*o*Ro(e),i*Ro(n)]}}function Al(t){return function(e,n){var r=Po(e*e+n*n),o=t(r),i=Ro(o),a=So(o);return[$o(e*i,r*a),Fo(r&&n*i/r)]}}var Tl=El((function(t){return Po(2/(1+t))}));Tl.invert=Al((function(t){return 2*Fo(t/2)}));var $l=El((function(t){return(t=Io(t))&&t/Ro(t)}));function Sl(t,e){return[t,zo(jo((wo+e)/2))]}function Nl(t){var e,n,r,o=bl(t),i=o.center,a=o.scale,s=o.translate,l=o.clipExtent,c=null;function u(){var i=xo*a(),s=o(ma(o.rotate()).invert([0,0]));return l(null==c?[[s[0]-i,s[1]-i],[s[0]+i,s[1]+i]]:t===Sl?[[Math.max(s[0]-i,c),e],[Math.min(s[0]+i,n),r]]:[[c,Math.max(s[1]-i,e)],[n,Math.min(s[1]+i,r)]])}return o.scale=function(t){return arguments.length?(a(t),u()):a()},o.translate=function(t){return arguments.length?(s(t),u()):s()},o.center=function(t){return arguments.length?(i(t),u()):i()},o.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),u()):null==c?null:[[c,e],[n,r]]},u()}function Ol(t){return jo((wo+t)/2)}function Ll(t,e){var n=So(t),r=t===e?Ro(t):zo(n/So(e))/zo(Ol(e)/Ol(t)),o=n*Co(Ol(t),r)/r;if(!r)return Sl;function i(t,e){o>0?e<-wo+yo&&(e=-wo+yo):e>wo-yo&&(e=wo-yo);var n=o/Co(Ol(e),r);return[n*Ro(r*t),o-n*So(r*t)]}return i.invert=function(t,e){var n=o-e,i=Do(r)*Po(t*t+n*n),a=$o(t,Ao(n))*Do(n);return n*r<0&&(a-=xo*Do(t)*Do(n)),[a/r,2*To(Co(o/i,1/r))-wo]},i}function zl(t,e){return[t,e]}function Cl(t,e){var n=So(t),r=t===e?Ro(t):(n-So(e))/(e-t),o=n/r+t;if(Ao(r)<yo)return zl;function i(t,e){var n=o-e,i=r*t;return[n*Ro(i),o-n*So(i)]}return i.invert=function(t,e){var n=o-e,i=$o(t,Ao(n))*Do(n);return n*r<0&&(i-=xo*Do(t)*Do(n)),[i/r,o-Do(r)*Po(t*t+n*n)]},i}$l.invert=Al((function(t){return t})),Sl.invert=function(t,e){return[t,2*To(Oo(e))-wo]},zl.invert=zl;var Rl=1.340264,Dl=-.081106,Pl=893e-6,jl=.003796,Il=Po(3)/2;function Fl(t,e){var n=Fo(Il*Ro(e)),r=n*n,o=r*r*r;return[t*So(n)/(Il*(Rl+3*Dl*r+o*(7*Pl+9*jl*r))),n*(Rl+Dl*r+o*(Pl+jl*r))]}function Hl(t,e){var n=So(e),r=So(t)*n;return[n*Ro(t)/r,Ro(e)/r]}function Bl(){var t,e,n,r,o,i,a,s=1,l=0,c=0,u=1,f=1,h=0,p=null,d=1,g=1,m=sl({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),v=ss;function y(){return d=s*u,g=s*f,i=a=null,b}function b(n){var r=n[0]*d,o=n[1]*g;if(h){var i=o*t-r*e;r=r*t+o*e,o=i}return[r+l,o+c]}return b.invert=function(n){var r=n[0]-l,o=n[1]-c;if(h){var i=o*t+r*e;r=r*t-o*e,o=i}return[r/d,o/g]},b.stream=function(t){return i&&a===t?i:i=m(v(a=t))},b.postclip=function(t){return arguments.length?(v=t,p=n=r=o=null,y()):v},b.clipExtent=function(t){return arguments.length?(v=null==t?(p=n=r=o=null,ss):Pa(p=+t[0][0],n=+t[0][1],r=+t[1][0],o=+t[1][1]),y()):null==p?null:[[p,n],[r,o]]},b.scale=function(t){return arguments.length?(s=+t,y()):s},b.translate=function(t){return arguments.length?(l=+t[0],c=+t[1],y()):[l,c]},b.angle=function(n){return arguments.length?(e=Ro(h=n%360*Eo),t=So(h),y()):h*Mo},b.reflectX=function(t){return arguments.length?(u=t?-1:1,y()):u<0},b.reflectY=function(t){return arguments.length?(f=t?-1:1,y()):f<0},b.fitExtent=function(t,e){return ul(b,t,e)},b.fitSize=function(t,e){return fl(b,t,e)},b.fitWidth=function(t,e){return hl(b,t,e)},b.fitHeight=function(t,e){return pl(b,t,e)},b}function Ul(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function ql(t,e){return[So(e)*Ro(t),Ro(e)]}function Wl(t,e){var n=So(e),r=1+So(t)*n;return[n*Ro(t)/r,Ro(e)/r]}function Yl(t,e){return[zo(jo((wo+e)/2)),-t]}Fl.invert=function(t,e){for(var n,r=e,o=r*r,i=o*o*o,a=0;a<12&&(i=(o=(r-=n=(r*(Rl+Dl*o+i*(Pl+jl*o))-e)/(Rl+3*Dl*o+i*(7*Pl+9*jl*o)))*r)*o*o,!(Ao(n)<bo));++a);return[Il*t*(Rl+3*Dl*o+i*(7*Pl+9*jl*o))/So(r),Fo(Ro(r)/Il)]},Hl.invert=Al(To),Ul.invert=function(t,e){var n,r=e,o=25;do{var i=r*r,a=i*i;r-=n=(r*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))-e)/(1.007226+i*(.045255+a*(.259866*i-.311325-.005916*11*a)))}while(Ao(n)>yo&&--o>0);return[t/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]},ql.invert=Al(Fo),Wl.invert=Al((function(t){return 2*To(t)})),Yl.invert=function(t,e){return[-e,2*To(Oo(t))-wo]};var Gl=Object.freeze({__proto__:null,geoArea:function(t){return hi=new bt,Xo(t,pi),2*hi},geoBounds:function(t){var e,n,r,o,i,a,s;if(ri=ni=-(ti=ei=1/0),ci=[],Xo(t,Hi),n=ci.length){for(ci.sort(Zi),e=1,i=[r=ci[0]];e<n;++e)Ki(r,(o=ci[e])[0])||Ki(r,o[1])?(Vi(r[0],o[1])>Vi(r[0],r[1])&&(r[1]=o[1]),Vi(o[0],r[1])>Vi(r[0],r[1])&&(r[0]=o[0])):i.push(r=o);for(a=-1/0,e=0,r=i[n=i.length-1];e<=n;r=o,++e)o=i[e],(s=Vi(r[1],o[0]))>a&&(a=s,ti=o[0],ni=r[1])}return ci=ui=null,ti===1/0||ei===1/0?[[NaN,NaN],[NaN,NaN]]:[[ti,ei],[ni,ri]]},geoCentroid:function(t){Ei=Ai=Ti=$i=Si=Ni=Oi=Li=0,zi=new bt,Ci=new bt,Ri=new bt,Xo(t,Ji);var e=+zi,n=+Ci,r=+Ri,o=Lo(e,n,r);return o<bo&&(e=Ni,n=Oi,r=Li,Ai<yo&&(e=Ti,n=$i,r=Si),(o=Lo(e,n,r))<bo)?[NaN,NaN]:[$o(n,e)*Mo,Fo(r/o)*Mo]},geoCircle:function(){var t,e,n=ca([0,0]),r=ca(90),o=ca(6),i={point:function(n,r){t.push(n=e(n,r)),n[0]*=Mo,n[1]*=Mo}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*Eo,l=o.apply(this,arguments)*Eo;return t=[],e=ha(-a[0]*Eo,-a[1]*Eo,0).invert,va(i,s,l,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:ca([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:ca(+t),a):r},a.precision=function(t){return arguments.length?(o="function"==typeof t?t:ca(+t),a):o},a},geoClipAntimeridian:Sa,geoClipCircle:Na,geoClipExtent:function(){var t,e,n,r=0,o=0,i=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Pa(r,o,i,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],o=+s[0][1],i=+s[1][0],a=+s[1][1],t=e=null,n):[[r,o],[i,a]]}}},geoClipRectangle:Pa,geoContains:function(t,e){return(t&&Ya.hasOwnProperty(t.type)?Ya[t.type]:Xa)(t,e)},geoDistance:Wa,geoGraticule:ns,geoGraticule10:function(){return ns()()},geoInterpolate:function(t,e){var n=t[0]*Eo,r=t[1]*Eo,o=e[0]*Eo,i=e[1]*Eo,a=So(r),s=Ro(r),l=So(i),c=Ro(i),u=a*So(n),f=a*Ro(n),h=l*So(o),p=l*Ro(o),d=2*Fo(Po(Ho(i-r)+a*l*Ho(o-n))),g=Ro(d),m=d?function(t){var e=Ro(t*=d)/g,n=Ro(d-t)/g,r=n*u+e*h,o=n*f+e*p,i=n*s+e*c;return[$o(o,r)*Mo,$o(i,Po(r*r+o*o))*Mo]}:function(){return[n*Mo,r*Mo]};return m.distance=d,m},geoLength:Ba,geoPath:il,geoAlbers:Ml,geoAlbersUsa:function(){var t,e,n,r,o,i,a=Ml(),s=kl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=kl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){i=[t,e]}};function u(t){var e=t[0],a=t[1];return i=null,n.point(e,a),i||(r.point(e,a),i)||(o.point(e,a),i)}function f(){return t=e=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&r>=-.425&&r<-.214?s:o>=.166&&o<.234&&r>=-.214&&r<-.115?l:a).invert(t)},u.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),l.stream(n)],o=r.length,t={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},u.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),f()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),i=+t[0],u=+t[1];return n=a.translate(t).clipExtent([[i-.455*e,u-.238*e],[i+.455*e,u+.238*e]]).stream(c),r=s.translate([i-.307*e,u+.201*e]).clipExtent([[i-.425*e+yo,u+.12*e+yo],[i-.214*e-yo,u+.234*e-yo]]).stream(c),o=l.translate([i-.205*e,u+.212*e]).clipExtent([[i-.214*e+yo,u+.166*e+yo],[i-.115*e-yo,u+.234*e-yo]]).stream(c),f()},u.fitExtent=function(t,e){return ul(u,t,e)},u.fitSize=function(t,e){return fl(u,t,e)},u.fitWidth=function(t,e){return hl(u,t,e)},u.fitHeight=function(t,e){return pl(u,t,e)},u.scale(1070)},geoAzimuthalEqualArea:function(){return bl(Tl).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:Tl,geoAzimuthalEquidistant:function(){return bl($l).scale(79.4188).clipAngle(179.999)},geoAzimuthalEquidistantRaw:$l,geoConicConformal:function(){return wl(Ll).scale(109.5).parallels([30,30])},geoConicConformalRaw:Ll,geoConicEqualArea:kl,geoConicEqualAreaRaw:_l,geoConicEquidistant:function(){return wl(Cl).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:Cl,geoEqualEarth:function(){return bl(Fl).scale(177.158)},geoEqualEarthRaw:Fl,geoEquirectangular:function(){return bl(zl).scale(152.63)},geoEquirectangularRaw:zl,geoGnomonic:function(){return bl(Hl).scale(144.049).clipAngle(60)},geoGnomonicRaw:Hl,geoIdentity:Bl,geoProjection:bl,geoProjectionMutator:xl,geoMercator:function(){return Nl(Sl).scale(961/ko)},geoMercatorRaw:Sl,geoNaturalEarth1:function(){return bl(Ul).scale(175.295)},geoNaturalEarth1Raw:Ul,geoOrthographic:function(){return bl(ql).scale(249.5).clipAngle(90+yo)},geoOrthographicRaw:ql,geoStereographic:function(){return bl(Wl).scale(250).clipAngle(142)},geoStereographicRaw:Wl,geoTransverseMercator:function(){var t=Nl(Yl),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:Yl,geoRotation:ma,geoStream:Xo,geoTransform:al}),Xl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Vl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Zl(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}var Kl={exports:{}};(function(t,e){var n=1e-6;function r(t){return{point(e,n){for(const r of t)r.point(e,n)},sphere(){for(const e of t)e.sphere()},lineStart(){for(const e of t)e.lineStart()},lineEnd(){for(const e of t)e.lineEnd()},polygonStart(){for(const e of t)e.polygonStart()},polygonEnd(){for(const e of t)e.polygonEnd()}}}function o(){var t,o,i,a,s,l,c,u,f,h=e.geoAlbers(),p=e.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=e.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g=e.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),m=e.geoConicEqualArea().rotate([-145,0]).center([0,16]).parallels([10,20]),v=e.geoConicEqualArea().rotate([170,0]).center([0,-14]).parallels([-14,0]),y={point:function(t,e){f=[t,e]}};function b(t){var e=t[0],n=t[1];return f=null,i.point(e,n),f||(a.point(e,n),f)||(s.point(e,n),f)||(l.point(e,n),f)||(c.point(e,n),f)||(u.point(e,n),f)}function x(){return t=o=null,b}return b.invert=function(t){var e=h.scale(),n=h.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&r>=-.225&&r<-.185?p:o>=.166&&o<.234&&r>=-.185&&r<-.08?d:o>=.204&&o<.234&&r>=.3&&r<.38?g:o>=.05&&o<.204&&r>=-.415&&r<-.225?m:o>=.18&&o<.234&&r>=-.415&&r<-.225?v:h).invert(t)},b.stream=function(e){return t&&o===e?t:t=r([h.stream(o=e),p.stream(e),d.stream(e),g.stream(e),m.stream(e),v.stream(e)])},b.precision=function(t){return arguments.length?(h.precision(t),p.precision(t),d.precision(t),g.precision(t),m.precision(t),v.precision(t),x()):h.precision()},b.scale=function(t){return arguments.length?(h.scale(t),p.scale(.35*t),d.scale(t),g.scale(t),m.scale(t),v.scale(t),b.translate(h.translate())):h.scale()},b.translate=function(t){if(!arguments.length)return h.translate();var e=h.scale(),r=+t[0],o=+t[1];return i=h.translate(t).clipExtent([[r-.455*e,o-.238*e],[r+.455*e,o+.238*e]]).stream(y),a=p.translate([r-.275*e,o+.201*e]).clipExtent([[r-.425*e+n,o+.12*e+n],[r-.185*e-n,o+.234*e-n]]).stream(y),s=d.translate([r-.18*e,o+.212*e]).clipExtent([[r-.185*e+n,o+.166*e+n],[r-.08*e-n,o+.234*e-n]]).stream(y),l=g.translate([r+.335*e,o+.224*e]).clipExtent([[r+.3*e,o+.204*e],[r+.38*e,o+.234*e]]).stream(y),c=m.translate([r-.415*e,o+.14*e]).clipExtent([[r-.45*e,o+.05*e],[r-.39*e,o+.21*e]]).stream(y),u=v.translate([r-.415*e,o+.215*e]).clipExtent([[r-.45*e,o+.21*e],[r-.39*e,o+.234*e]]).stream(y),x()},b.scale(1070)}t.geoAlbersUsaTerritories=o,Object.defineProperty(t,"__esModule",{value:!0})})(Kl.exports,Zl(Gl));var Jl=Kl.exports;function Ql(t){return t}function tc(t){if(null==t)return Ql;var e,n,r=t.scale[0],o=t.scale[1],i=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var l=2,c=t.length,u=new Array(c);for(u[0]=(e+=t[0])*r+i,u[1]=(n+=t[1])*o+a;l<c;)u[l]=t[l],++l;return u}}function ec(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return nc(t,e)}))}:nc(t,e)}function nc(t,e){var n=e.id,r=e.bbox,o=null==e.properties?{}:e.properties,i=rc(t,e);return null==n&&null==r?{type:"Feature",properties:o,geometry:i}:null==r?{type:"Feature",id:n,properties:o,geometry:i}:{type:"Feature",id:n,bbox:r,properties:o,geometry:i}}function rc(t,e){var n=tc(t.transform),r=t.arcs;function o(t,e){e.length&&e.pop();for(var o=r[t<0?~t:t],i=0,a=o.length;i<a;++i)e.push(n(o[i],i));t<0&&function(t,e){for(var n,r=t.length,o=r-e;o<--r;)n=t[o],t[o++]=t[r],t[r]=n}(e,a)}function i(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)o(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}function oc(t,e){var n={},r={},o={},i=[],a=-1;function s(t,e){for(var r in t){var o=t[r];delete e[o.start],delete o.start,delete o.end,o.forEach((function(t){n[t<0?~t:t]=1})),i.push(o)}}return e.forEach((function(n,r){var o,i=t.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(o=e[++a],e[a]=n,e[r]=o)})),e.forEach((function(e){var n,i,a=function(e){var n,r=t.arcs[e<0?~e:e],o=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,o]:[o,n]}(e),s=a[0],l=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=l,i=r[l]){delete r[i.start];var c=i===n?n:n.concat(i);r[c.start=n.start]=o[c.end=i.end]=c}else r[n.start]=o[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=s,i=o[s]){delete o[i.end];var u=i===n?n:i.concat(n);r[u.start=i.start]=o[u.end=n.end]=u}else r[n.start]=o[n.end]=n;else r[(n=[e]).start=s]=o[n.end=l]=n})),s(o,r),s(r,o),e.forEach((function(t){n[t<0?~t:t]||i.push([t])})),i}function ic(t){return rc(t,ac.apply(this,arguments))}function ac(t,e,n){var r,o,i;if(arguments.length>1)r=function(t,e,n){var r,o=[],i=[];function a(t){var e=t<0?~t:t;(i[e]||(i[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function l(t){t.forEach(s)}function c(t){t.forEach(l)}function u(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(u);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":l(t.arcs);break;case"MultiPolygon":c(t.arcs)}}return u(e),i.forEach(null==n?function(t){o.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&o.push(t[0].i)}),o}(0,e,n);else for(o=0,r=new Array(i=t.arcs.length);o<i;++o)r[o]=o;return{type:"MultiLineString",arcs:oc(t,r)}}function sc(t){var e=t[0],n=t[1],r=t[2];return Math.abs((e[0]-r[0])*(n[1]-e[1])-(e[0]-n[0])*(r[1]-e[1]))/2}function lc(t,e){return t[1][2]-e[1][2]}function cc(t){return[t[0],t[1],0]}function uc(t,e){var n=t.transform?tc(t.transform):cc,r=function(){var t={},e=[],n=0;function r(t,n){for(;n>0;){var r=(n+1>>1)-1,o=e[r];if(lc(t,o)>=0)break;e[o._=n]=o,e[t._=n=r]=t}}function o(t,r){for(;;){var o=r+1<<1,i=o-1,a=r,s=e[a];if(i<n&&lc(e[i],s)<0&&(s=e[a=i]),o<n&&lc(e[o],s)<0&&(s=e[a=o]),a===r)break;e[s._=r]=s,e[t._=r=a]=t}}return t.push=function(t){return r(e[t._=n]=t,n++),n},t.pop=function(){if(!(n<=0)){var t,r=e[0];return--n>0&&(t=e[n],o(e[t._=0]=t,0)),r}},t.remove=function(t){var i,a=t._;if(e[a]===t)return a!==--n&&(lc(i=e[n],t)<0?r:o)(e[i._=a]=i,a),a},t}();null==e&&(e=sc);var o=t.arcs.map((function(t){var o,a,s,l=[],c=0;for(a=1,s=(t=t.map(n)).length-1;a<s;++a)(o=[t[a-1],t[a],t[a+1]])[1][2]=e(o),l.push(o),r.push(o);for(t[0][2]=t[s][2]=1/0,a=0,s=l.length;a<s;++a)(o=l[a]).previous=l[a-1],o.next=l[a+1];for(;o=r.pop();){var u=o.previous,f=o.next;o[1][2]<c?o[1][2]=c:c=o[1][2],u&&(u.next=f,u[2]=o[2],i(u)),f&&(f.previous=u,f[0]=o[0],i(f))}return t}));function i(t){r.remove(t),t[1][2]=e(t),r.push(t)}return{type:"Topology",bbox:t.bbox,objects:t.objects,arcs:o}}var fc={exports:{}};fc.exports=function(){var t=1e3,e=6e4,n=36e5,r="millisecond",o="second",i="minute",a="hour",s="day",l="week",c="month",u="quarter",f="year",h="date",p="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},v=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},y={s:v,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+v(r,2,"0")+":"+v(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,c),i=n-o<0,a=e.clone().add(r+(i?-1:1),c);return+(-(r+(n-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:f,w:l,d:s,D:h,h:a,m:i,s:o,ms:r,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",x={};x[b]=m;var w="$isDayjsObject",_=function(t){return t instanceof A||!(!t||!t[w])},k=function t(e,n,r){var o;if(!e)return b;if("string"==typeof e){var i=e.toLowerCase();x[i]&&(o=i),n&&(x[i]=n,o=i);var a=e.split("-");if(!o&&a.length>1)return t(a[0])}else{var s=e.name;x[s]=e,o=s}return!r&&o&&(b=o),o||!r&&b},M=function(t,e){if(_(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new A(n)},E=y;E.l=k,E.i=_,E.w=function(t,e){return M(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var A=function(){function m(t){this.$L=k(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[w]=!0}var v=m.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(E.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(d);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return E},v.isValid=function(){return!(this.$d.toString()===p)},v.isSame=function(t,e){var n=M(t);return this.startOf(e)<=n&&n<=this.endOf(e)},v.isAfter=function(t,e){return M(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<M(t)},v.$g=function(t,e,n){return E.u(t)?this[e]:this.set(n,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var n=this,r=!!E.u(e)||e,u=E.p(t),p=function(t,e){var o=E.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?o:o.endOf(s)},d=function(t,e){return E.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case f:return r?p(1,0):p(31,11);case c:return r?p(1,m):p(0,m+1);case l:var b=this.$locale().weekStart||0,x=(g<b?g+7:g)-b;return p(r?v-x:v+(6-x),m);case s:case h:return d(y+"Hours",0);case a:return d(y+"Minutes",1);case i:return d(y+"Seconds",2);case o:return d(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var n,l=E.p(t),u="set"+(this.$u?"UTC":""),p=(n={},n[s]=u+"Date",n[h]=u+"Date",n[c]=u+"Month",n[f]=u+"FullYear",n[a]=u+"Hours",n[i]=u+"Minutes",n[o]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],d=l===s?this.$D+(e-this.$W):e;if(l===c||l===f){var g=this.clone().set(h,1);g.$d[p](d),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](d);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[E.p(t)]()},v.add=function(r,u){var h,p=this;r=Number(r);var d=E.p(u),g=function(t){var e=M(p);return E.w(e.date(e.date()+Math.round(t*r)),p)};if(d===c)return this.set(c,this.$M+r);if(d===f)return this.set(f,this.$y+r);if(d===s)return g(1);if(d===l)return g(7);var m=(h={},h[i]=e,h[a]=n,h[o]=t,h)[d]||1,v=this.$d.getTime()+r*m;return E.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=E.z(this),i=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,f=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].slice(0,i)},h=function(t){return E.s(i%12||12,t,"0")},d=u||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(g,(function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return E.s(e.$y,4,"0");case"M":return s+1;case"MM":return E.s(s+1,2,"0");case"MMM":return f(n.monthsShort,s,c,3);case"MMMM":return f(c,s);case"D":return e.$D;case"DD":return E.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return f(n.weekdaysMin,e.$W,l,2);case"ddd":return f(n.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(i);case"HH":return E.s(i,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return d(i,a,!0);case"A":return d(i,a,!1);case"m":return String(a);case"mm":return E.s(a,2,"0");case"s":return String(e.$s);case"ss":return E.s(e.$s,2,"0");case"SSS":return E.s(e.$ms,3,"0");case"Z":return o}return null}(t)||o.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,h,p){var d,g=this,m=E.p(h),v=M(r),y=(v.utcOffset()-this.utcOffset())*e,b=this-v,x=function(){return E.m(g,v)};switch(m){case f:d=x()/12;break;case c:d=x();break;case u:d=x()/3;break;case l:d=(b-y)/6048e5;break;case s:d=(b-y)/864e5;break;case a:d=b/n;break;case i:d=b/e;break;case o:d=b/t;break;default:d=b}return p?d:E.a(d)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return x[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=k(t,e,!0);return r&&(n.$L=r),n},v.clone=function(){return E.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),T=A.prototype;return M.prototype=T,[["$ms",r],["$s",o],["$m",i],["$H",a],["$W",s],["$M",c],["$y",f],["$D",h]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),M.extend=function(t,e){return t.$i||(t(e,A,M),t.$i=!0),M},M.locale=k,M.isDayjs=_,M.unix=function(t){return M(1e3*t)},M.en=x[b],M.Ls=x,M.p={},M}();var hc=Vl(fc.exports),pc={exports:{}};!function(t,e){t.exports=function(t,e){var n=e.prototype,r=n.format;n.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return r.bind(this)(t);var o=this.$utils(),i=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return n.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return n.ordinal(e.week(),"W");case"w":case"ww":return o.s(e.week(),"w"===t?1:2,"0");case"W":case"WW":return o.s(e.isoWeek(),"W"===t?1:2,"0");case"k":case"kk":return o.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}}));return r.bind(this)(i)}}}(pc);var dc=Vl(pc.exports),gc={exports:{}};!function(t,e){var n;t.exports=(n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},function(t,e,r){var o=e.prototype,i=o.format;r.en.formats=n,o.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var e=this.$locale().formats,r=function(t,e){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,o){var i=o&&o.toUpperCase();return r||e[o]||n[o]||e[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}))}(t,void 0===e?{}:e);return i.call(this,r)}})}(gc);var mc=Vl(gc.exports);function vc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return t;const r=Array.isArray(e)?e:e.split(".");let o=t;for(let t=0;t<r.length&&null!=o;t++)o=o[r[t]];return null==o?n:o}function yc(t){if(!t||"object"!=typeof t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}function bc(){}function xc(t){return t()}function wc(){return Object.create(null)}function _c(t){t.forEach(xc)}function kc(t){return"function"==typeof t}function Mc(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}const Ec="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Ac(t,e){t.appendChild(e)}function Tc(t,e,n){const r=function(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;if(e&&e.host)return e;return t.ownerDocument}(t);if(!r.getElementById(e)){const t=Oc("style");t.id=e,t.textContent=n,function(t,e){Ac(t.head||t,e),e.sheet}(r,t)}}function $c(t,e,n){t.insertBefore(e,n||null)}function Sc(t){t.parentNode&&t.parentNode.removeChild(t)}function Nc(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Oc(t){return document.createElement(t)}function Lc(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function zc(t){return document.createTextNode(t)}function Cc(){return zc(" ")}function Rc(){return zc("")}function Dc(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Pc(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function jc(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ic(t,e){e=""+e,t.data!==e&&(t.data=e)}function Fc(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Hc(t,e,n){t.classList[n?"add":"remove"](e)}class Bc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.is_svg?this.e=Lc(e.nodeName):this.e=Oc(11===e.nodeType?"TEMPLATE":e.nodeName),this.t="TEMPLATE"!==e.tagName?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)$c(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(Sc)}}let Uc;function qc(t){Uc=t}function Wc(){if(!Uc)throw new Error("Function called outside component initialization");return Uc}function Yc(t){Wc().$$.after_update.push(t)}function Gc(){const t=Wc();return function(e,n){let{cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t.$$.callbacks[e];if(o){const i=function(t,e){let{bubbles:n=!1,cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}(e,n,{cancelable:r});return o.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}function Xc(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const Vc=[],Zc=[];let Kc=[];const Jc=[],Qc=Promise.resolve();let tu=!1;function eu(){tu||(tu=!0,Qc.then(au))}function nu(t){Kc.push(t)}function ru(t){Jc.push(t)}const ou=new Set;let iu=0;function au(){if(0!==iu)return;const t=Uc;do{try{for(;iu<Vc.length;){const t=Vc[iu];iu++,qc(t),su(t.$$)}}catch(t){throw Vc.length=0,iu=0,t}for(qc(null),Vc.length=0,iu=0;Zc.length;)Zc.pop()();for(let t=0;t<Kc.length;t+=1){const e=Kc[t];ou.has(e)||(ou.add(e),e())}Kc.length=0}while(Vc.length);for(;Jc.length;)Jc.pop()();tu=!1,ou.clear(),qc(t)}function su(t){if(null!==t.fragment){t.update(),_c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(nu)}}const lu=new Set;let cu;function uu(){cu={r:0,c:[],p:cu}}function fu(){cu.r||_c(cu.c),cu=cu.p}function hu(t,e){t&&t.i&&(lu.delete(t),t.i(e))}function pu(t,e,n,r){if(t&&t.o){if(lu.has(t))return;lu.add(t),cu.c.push((()=>{lu.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function du(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function gu(t){t&&t.c()}function mu(t,e,n,r){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),r||nu((()=>{const e=t.$$.on_mount.map(xc).filter(kc);t.$$.on_destroy?t.$$.on_destroy.push(...e):_c(e),t.$$.on_mount=[]})),i.forEach(nu)}function vu(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];Kc.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),Kc=e}(n.after_update),_c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yu(t,e,n,r,o,i,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const l=Uc;qc(t);const c=t.$$={fragment:null,ctx:[],props:i,update:bc,not_equal:o,bound:wc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:wc(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(function(e,n){const r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&o(c.ctx[e],c.ctx[e]=r)&&(!c.skip_bound&&c.bound[e]&&c.bound[e](r),u&&function(t,e){-1===t.$$.dirty[0]&&(Vc.push(t),eu(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],c.update(),u=!0,_c(c.before_update),c.fragment=!!r&&r(c.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);c.fragment&&c.fragment.l(t),t.forEach(Sc)}else c.fragment&&c.fragment.c();e.intro&&hu(t.$$.fragment),mu(t,e.target,e.anchor,e.customElement),au()}qc(l)}class bu{$destroy(){vu(this,1),this.$destroy=bc}$on(t,e){if(!kc(e))return bc;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function xu(){window.getSelection().removeAllRanges()}function wu(t){Tc(t,"svelte-1p4tcqc",".resizers.svelte-1p4tcqc.svelte-1p4tcqc{width:100%;height:100%;position:absolute;top:0;left:0;pointer-events:none}.resizer.svelte-1p4tcqc.svelte-1p4tcqc{position:absolute;display:flex;align-items:center;justify-content:center;pointer-events:auto}.resizer.x.svelte-1p4tcqc.svelte-1p4tcqc{top:0;width:5px;height:100%;cursor:ew-resize}.resizer.y.svelte-1p4tcqc.svelte-1p4tcqc{height:5px;width:100%;left:0;cursor:ns-resize}.resizer.drag.svelte-1p4tcqc.svelte-1p4tcqc{cursor:grab}.resizer.drag.svelte-1p4tcqc.svelte-1p4tcqc:active{cursor:grabbing}.resizer.l.svelte-1p4tcqc.svelte-1p4tcqc{left:-3px}.resizer.r.svelte-1p4tcqc.svelte-1p4tcqc{right:-3px}.resizer.t.svelte-1p4tcqc.svelte-1p4tcqc{top:-3px}.resizer.b.svelte-1p4tcqc.svelte-1p4tcqc{bottom:-3px}.resizer-inner.svelte-1p4tcqc.svelte-1p4tcqc{position:absolute;border-radius:2px;background:rgba(255, 0, 221, 0.35);opacity:0;transition:opacity 0.2s}.resizer.x.svelte-1p4tcqc .resizer-inner.svelte-1p4tcqc{width:5px;height:50%;min-height:10px;max-height:40px}.resizer.y.svelte-1p4tcqc .resizer-inner.svelte-1p4tcqc{height:5px;width:50%;min-width:10px;max-width:40px}.text:hover .resizer-inner.svelte-1p4tcqc.svelte-1p4tcqc,.range-annotation:hover .resizer-inner.svelte-1p4tcqc.svelte-1p4tcqc{opacity:1}")}function _u(t,e,n){const r=t.slice();return r[12]=e[n],r}function ku(t){let e,n,r,o,i,a;function s(...e){return t[10](t[12],...e)}return{c(){e=Oc("div"),n=Oc("div"),r=Cc(),jc(n,"class","resizer-inner svelte-1p4tcqc"),jc(e,"class",o="resizer "+t[1]+" "+t[12].charAt(0)+" svelte-1p4tcqc"),Hc(e,"drag","line"===t[0].display)},m(t,o){$c(t,e,o),Ac(e,n),Ac(e,r),i||(a=Dc(e,"mousedown",s),i=!0)},p(n,r){t=n,6&r&&o!==(o="resizer "+t[1]+" "+t[12].charAt(0)+" svelte-1p4tcqc")&&jc(e,"class",o),7&r&&Hc(e,"drag","line"===t[0].display)},d(t){t&&Sc(e),i=!1,a()}}}function Mu(t){let e,n=t[2],r=[];for(let e=0;e<n.length;e+=1)r[e]=ku(_u(t,n,e));return{c(){e=Oc("div");for(let t=0;t<r.length;t+=1)r[t].c();jc(e,"class","resizers svelte-1p4tcqc")},m(t,n){$c(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,[o]){if(15&o){let i;for(n=t[2],i=0;i<n.length;i+=1){const a=_u(t,n,i);r[i]?r[i].p(a,o):(r[i]=ku(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},i:bc,o:bc,d(t){t&&Sc(e),Nc(r,t)}}}function Eu(t,e,n){let r,o;const i=Gc();let{annotation:a}=e,{type:s}=e,{index:l}=e,{activeResizer:c}=e,{resizing:u}=e,{noOffsetAtEventStart:f}=e,{orientation:h}=e;function p(t,e){t.stopPropagation(),xu(),i("selectAnnotation",{type:s,index:l}),void 0===a.width&&i("setWidth"),n(4,c=e),n(5,u=!0),n(6,f=0===a.dx&&0===a.dy)}return t.$$set=t=>{"annotation"in t&&n(0,a=t.annotation),"type"in t&&n(7,s=t.type),"index"in t&&n(8,l=t.index),"activeResizer"in t&&n(4,c=t.activeResizer),"resizing"in t&&n(5,u=t.resizing),"noOffsetAtEventStart"in t&&n(6,f=t.noOffsetAtEventStart),"orientation"in t&&n(9,h=t.orientation)},t.$$.update=()=>{513&t.$$.dirty&&n(2,r="y"===h?"line"===a.display?["t"]:["t","b"]:"line"===a.display?["l"]:["l","r"]),512&t.$$.dirty&&n(1,o="y"===h?"y":"x")},[a,o,r,p,c,u,f,s,l,h,(t,e)=>p(e,t)]}class Au extends bu{constructor(t){super(),yu(this,t,Eu,Mu,Mc,{annotation:0,type:7,index:8,activeResizer:4,resizing:5,noOffsetAtEventStart:6,orientation:9},wu)}}function Tu(){return null}function $u(t,e){var n=po(t),r=i(n.tag),o=null==e?Tu:"function"==typeof e?e:s(e),a=this.select((function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)}));for(var l in n.attr)a.attr(l,n.attr[l]);return a}function Su(){var t=[];return this.filter((function(){return!(t.indexOf(this.parentNode)>-1)&&(t.push(this.parentNode),!0)})).select((function(){return this.parentNode}))}function Nu(t){var e,n=s(t),r=po(t);for(var o in t=i(r.tag),e=this.select((function(){return n.apply(this,arguments)||this.appendChild(t.apply(this,arguments))})),r.attr)e.attr(o,r.attr[o]);return e}function Ou(t,e){if("string"==typeof e){console.warn("DEPRECATED: jetpack's appendMany order of arguments has changed. It's appendMany('div', data) from now on");var n=e;e=t,t=n}return this.selectAll(null).data(e).enter().append(t)}function Lu(t,e){if("object"==typeof t){for(var n in t)r(this,n,t[n]);return this}return 1==arguments.length?this.style(t):r(this,t,e);function r(t,e,n){e=e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();var r;return~"top left bottom right padding-top padding-left padding-bottom padding-right border-top b-width border-left-width border-botto-width m border-right-width margin-top margin-left margin-bottom margin-right font-size width stroke-width line-height margin padding border border-radius max-width min-width max-height min-height".indexOf(e)?t.style(e,"function"==typeof n?(r=n,function(){return o(r.apply(this,arguments))}):o(n)):t.style(e,n),t}function o(t){return t.match?t:t+"px"}}lt.prototype.translate=mo,lt.prototype.append=go,lt.prototype.insert=$u,lt.prototype.parent=Su,lt.prototype.selectAppend=Nu,lt.prototype.tspans=vo,lt.prototype.appendMany=Ou,lt.prototype.at=ho,lt.prototype.st=Lu,lt.prototype.prop=lt.prototype.property;const zu=Math.cos(.25*Math.PI),Cu=Math.sin(.25*Math.PI);function Ru(t){let[e,n]=t;return[e*zu-n*Cu,e*Cu+n*zu]}function Du(t){let[e,n]=t;return[e*zu+n*Cu,n*zu-e*Cu]}function Pu(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=r?1:0,i=(n-t[o])/(e[o]-t[o]);if(i<0||i>1)return null;const a=r?0:1;return t[a]+i*(e[a]-t[a])}function ju(t,e,n,r,o,i,a){if(r!==i&&o!==a)throw new Error("only horizontal and vertical lines are supported");const s=o===a,l=function(t,e,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const i=o?1:0;let a=t[i]-2*e[i]+n[i];a||(a=.1);const s=2*(e[i]-t[i]),l=t[i]-r,c=(-s+Math.sqrt(s*s-4*a*l))/(2*a),u=(-s-Math.sqrt(s*s-4*a*l))/(2*a),f=o?0:1,h=[];if(c>=0&&c<=1){const i=Math.pow(1-c,2)*t[f]+2*(1-c)*c*e[f]+c*c*n[f];h.push(o?[i,r,c]:[r,i,c])}if(u>=0&&u<=1){const i=Math.pow(1-u,2)*t[f]+2*(1-u)*u*e[f]+u*u*n[f];h.push(o?[i,r,u]:[r,i,u])}return h}(t,e,n,s?o:r,s);return l.filter((t=>{let[e,n]=t;return s?e>=r&&e<=i:n>=o&&n<=a}))}function Iu(t,e,n,r){const o=Math.pow(1-r,2)*t[0]+2*(1-r)*r*e[0]+r*r*n[0],i=Math.pow(1-r,2)*t[1]+2*(1-r)*r*e[1]+r*r*n[1];return[t,[(1-r)*t[0]+r*e[0],(1-r)*t[1]+r*e[1]],[o,i],[o,i],[(1-r)*e[0]+r*n[0],(1-r)*e[1]+r*n[1]],n]}function Fu(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(e){let{source:n,sourcePadding:r,targetPadding:o,circle:i,circleRadius:a}=e;return e=>{i&&a&&(o+=a),r>0&&(n={...n},n.x-=r,n.y-=r,n.width+=2*r,n.height+=2*r);let s=n.x+.5*n.width,l=n.y+.5*n.height,c=0,u=0,[f,h]=function(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.25,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a=n-t,s=r-e,l=s,c=-a,u=.5*(t+n),f=.5*(e+r),h=Math.sqrt(l*l+c*c),p=Math.sqrt(a*a+s*s)*o/h*(i?-1:1);return[u+l*p,f+c*p]}(s,l,c,u,.3,t);const p=function(t,e,n,r,o,i,a){const s=[[r,o,r+i,o],[r+i,o,r+i,o+a],[r,o+a,r+i,o+a],[r,o,r,o+a]],l=[];for(const r of s){const o=ju(t,e,n,...r);for(const t of o)l.push(t)}return l}([s,l],[f,h],[c,u],n.x,n.y,n.width,n.height);if(p.length>0){const t=p.map((t=>{let[,,e]=t;return e})).sort(((t,e)=>e-t)),[,,,e,n]=Iu([s,l],[f,h],[c,u],t[0]);[s,l]=e,[f,h]=n}if(o>0){const t=function(t,e,n,r){let o,i,a=0,s=1,l=20;do{if(o=.5*(a+s),i=c(o),Math.abs(i-r)<.1)return o;i>r?a=o:s=o}while(l-- >0);return o;function c(r){const o=(1-r)**2*t[0]+2*(1-r)*r*e[0]+r*r*n[0],i=(1-r)**2*t[1]+2*(1-r)*r*e[1]+r*r*n[1];return Math.sqrt((o-n[0])**2+(i-n[1])**2)}}([s,l],[f,h],[c,u],o),[,e,n]=Iu([s,l],[f,h],[c,u],t);[f,h]=e,[c,u]=n}e.attr("d","M ".concat(s,",").concat(l," Q ").concat(f,",").concat(h," ").concat(c,",").concat(u))}}}const Hu=function(t){let{source:e,sourcePadding:n,targetPadding:r,circle:o,circleRadius:i}=t;return t=>{o&&i&&(r+=i),n&&(e={...e},e.x-=n,e.y-=n,e.width+=2*n,e.height+=2*n);let a=e.x+.5*e.width,s=e.y+.5*e.height,l=0,c=0,u=!0,f=-a,h=-s;const p=e.height/e.width;if(2*Math.abs(a)<e.width)a=0,l=0,c=r*(s>0?1:-1),s+=.5*e.height*(s<0?1:-1),u=!1;else if(2*Math.abs(s)<e.height)s=0,c=0,l=r*(a>0?1:-1),a+=.5*e.width*(a<0?1:-1),u=!1;else{const[t,n]=Ru([-.5*e.width,0]),[r,o]=Ru([.5*e.width,0]),[i,l]=Ru([0,-.5*e.height]),[c,u]=Ru([0,.5*e.height]),[d,g]=Ru([-a,-s]);let m,v;if(a>0&&s>0&&d>=t&&d<=i){const[r,o]=Ru([-.5*e.width,-.5*e.height]),a=Pu(d<r?[t,n]:[i,l],[r,o],d,!1);[m,v]=Du([d,a])}else if(a<0&&s<0&&d>=c&&d<=r){const[t,n]=Ru([.5*e.width,.5*e.height]),i=Pu(d<t?[c,u]:[r,o],[t,n],d,!1);[m,v]=Du([d,i])}else if(a>0&&s<0&&g>=n&&g<=u){const[r,o]=Ru([-.5*e.width,.5*e.height]),i=Pu(g<o?[t,n]:[c,u],[r,o],g,!0);[m,v]=Du([i,g])}else if(a<0&&s>0&&g>=l&&g<=o){const[t,n]=Ru([.5*e.width,-.5*e.height]),a=Pu(g<n?[i,l]:[r,o],[t,n],g,!0);[m,v]=Du([a,g])}else Math.abs(h/f)<p?(m=.5*e.width*(f>0?1:-1),v=.5*e.width*h/f*(f>0?1:-1)):(m=.5*e.height*f/h*(h>0?1:-1),v=.5*e.height*(h>0?1:-1));a+=m,s+=v}if(r>0&&u){f=-a,h=-s;const t=Math.atan2(h,f);l=-Math.cos(t)*r,c=-Math.sin(t)*r}t.attr("d","M ".concat(a,",").concat(s," L ").concat(l,",").concat(c)),t.classed("crisp",a.toFixed(1)===l.toFixed(1)||s.toFixed(1)===c.toFixed(1))}},Bu=Fu(!0),Uu=Fu(!1);var qu=Object.freeze({__proto__:null,straight:Hu,curveLeft:Bu,curveRight:Uu});function Wu(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t={sourcePadding:0,targetPadding:4,arrowHead:!1,type:"straight",circle:!1,circleRadius:15,strokeWidth:1,color:"black",...t},function(e){return e.each((function(e){const n={...t,...e},r=ct(this).append("g.callout-line").attr("aria-hidden",!0);n.arrowHead&&(n.targetPadding+=n.strokeWidth,n.circleRadius+=n.strokeWidth);const o=r.append("path").style("stroke-width",n.strokeWidth).style("stroke",n.color).call(qu[n.type](n));var i;n.arrowHead&&function(t,e,n,r,o){const i=Yu[n];if(!e.getTotalLength)return;const a=e.getTotalLength();if(0===a)return;const s=e.getPointAtLength(a),l=e.getPointAtLength(a-10),c=Math.min(1,a/i.minLen/r),[u,f]=[s.x-l.x,s.y-l.y],h=Math.atan2(f,u)/Math.PI*180,p=t.append("path.callout-line-arrow-head").attr("d",i.path).attr("transform","translate(".concat(s.x,", ").concat(s.y,") rotate(").concat(h,") scale(").concat(r*c,") ")).classed("callout-line-arrow-head-stroke",i.strokes);i.strokes?p.style("stroke",o).style("fill","none").style("stroke-width",1/c):p.style("fill",o).style("stroke","none")}(r,o.node(),n.arrowHead,n.strokeWidth,n.color),n.circle&&r.append("circle").style("stroke",n.color).style("stroke-width",n.strokeWidth).style("stroke-dasharray","dashed"===n.circleStyle?(i=n.strokeWidth,"".concat(2+i,", ").concat(4+i)):void 0).attr("r",n.circleRadius-(n.arrowHead?n.strokeWidth:0))}))}}const Yu={triangle:{viewBox:"-10 -10 20 20",markerWidth:20,markerHeight:20,minLen:20,path:"M-8.75,-3.75 L 1,0 L -8.75,3.75"},lines:{viewBox:"-10 -10 20 20",markerWidth:20,markerHeight:20,minLen:15,path:"M-4.75,-3.75 L 0,0 L -4.75,3.75",strokes:!0}};function Gu(t,e){return"translate(".concat(Math.round(t),"px, ").concat(Math.round(e),"px);")}function Xu(t,e,n){const r=[],o=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o}(-t,t+1);return o.forEach((t=>{o.forEach((o=>{(t||o)&&r.push(t+"px "+o+"px "+(t&&o?0:e)+"px "+n)}))})),r.join(", ")}function Vu(t){return!0===t||void 0===t}function Zu(t){return!(!Vu(t.showDesktop)||!1!==t.showMobile)}function Ku(t){return!1===t.showDesktop&&!1===t.showMobile}function Ju(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=re(t);return n.opacity=e,n.formatRgb()}const Qu=180/Math.PI;function tf(t,e){return function(t){return t*Qu}(Math.atan(t/e))}function ef(t,e){const n=vc(t,"colors.background","#ffffff"),r=vc(t,"colors.chartContentBaseColor",e.contrast(n,"#000000")<5.5?"#f1f1f1":"#333333"),o={tickText:{secondary:vc(t,"colors.bgBlendRatios.tickText.secondary",e(n).luminance()<.5?.6:.4),primary:vc(t,"colors.bgBlendRatios.tickText.primary",.2)},series:vc(t,"colors.bgBlendRatios.series",0),value:vc(t,"colors.bgBlendRatios.value",.2),axis:vc(t,"colors.bgBlendRatios.axis",0),gridline:vc(t,"colors.bgBlendRatios.gridline",.82)};return{tickText:{secondary:e.mix(r,n,o.tickText.secondary).hex(),primary:e.mix(r,n,o.tickText.primary).hex()},series:e.mix(r,n,o.series).hex(),value:e.mix(r,n,o.value).hex(),axis:e.mix(r,n,o.axis).hex(),gridline:e.mix(r,n,o.gridline).hex(),fallbackBaseColor:r,blendColor:t=>e.mix(r,n,t).hex()}}var nf,rf={exports:{}};
/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */function of(){return nf||(nf=1,function(t,e){t.exports=function(){const{entries:t,setPrototypeOf:e,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:o}=Object;let{freeze:i,seal:a,create:s}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;i||(i=function(t){return t}),a||(a=function(t){return t}),l||(l=function(t,e,n){return t.apply(e,n)}),c||(c=function(t,e){return new t(...e)});const u=w(Array.prototype.forEach),f=w(Array.prototype.pop),h=w(Array.prototype.push),p=w(String.prototype.toLowerCase),d=w(String.prototype.toString),g=w(String.prototype.match),m=w(String.prototype.replace),v=w(String.prototype.indexOf),y=w(String.prototype.trim),b=w(RegExp.prototype.test),x=_(TypeError);function w(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return l(t,e,r)}}function _(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return c(t,n)}}function k(t,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;e&&e(t,null);let i=r.length;for(;i--;){let e=r[i];if("string"==typeof e){const t=o(e);t!==e&&(n(r)||(r[i]=t),e=t)}t[e]=!0}return t}function M(e){const n=s(null);for(const[r,i]of t(e))void 0!==o(e,r)&&(n[r]=i);return n}function E(t,e){for(;null!==t;){const n=o(t,e);if(n){if(n.get)return w(n.get);if("function"==typeof n.value)return w(n.value)}t=r(t)}function n(t){return console.warn("fallback value for",t),null}return n}const A=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),T=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),S=i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),N=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),O=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=i(["#text"]),z=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),C=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),R=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),D=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),P=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),j=a(/<%[\w\W]*|[\w\W]*%>/gm),I=a(/\${[\w\W]*}/gm),F=a(/^data-[\-\w.\u00B7-\uFFFF]/),H=a(/^aria-[\-\w]+$/),B=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U=a(/^(?:\w+script|data):/i),q=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),W=a(/^html$/i);var Y=Object.freeze({__proto__:null,MUSTACHE_EXPR:P,ERB_EXPR:j,TMPLIT_EXPR:I,DATA_ATTR:F,ARIA_ATTR:H,IS_ALLOWED_URI:B,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:q,DOCTYPE_NAME:W});const G=function(){return"undefined"==typeof window?null:window},X=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function V(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();const n=t=>V(t);if(n.version="3.0.6",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;let{document:r}=e;const o=r,a=o.currentScript,{DocumentFragment:l,HTMLTemplateElement:c,Node:w,Element:_,NodeFilter:P,NamedNodeMap:j=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:I,DOMParser:F,trustedTypes:H}=e,U=_.prototype,q=E(U,"cloneNode"),Z=E(U,"nextSibling"),K=E(U,"childNodes"),J=E(U,"parentNode");if("function"==typeof c){const t=r.createElement("template");t.content&&t.content.ownerDocument&&(r=t.content.ownerDocument)}let Q,tt="";const{implementation:et,createNodeIterator:nt,createDocumentFragment:rt,getElementsByTagName:ot}=r,{importNode:it}=o;let at={};n.isSupported="function"==typeof t&&"function"==typeof J&&et&&void 0!==et.createHTMLDocument;const{MUSTACHE_EXPR:st,ERB_EXPR:lt,TMPLIT_EXPR:ct,DATA_ATTR:ut,ARIA_ATTR:ft,IS_SCRIPT_OR_DATA:ht,ATTR_WHITESPACE:pt}=Y;let{IS_ALLOWED_URI:dt}=Y,gt=null;const mt=k({},[...A,...T,...$,...N,...L]);let vt=null;const yt=k({},[...z,...C,...R,...D]);let bt=Object.seal(s(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xt=null,wt=null,_t=!0,kt=!0,Mt=!1,Et=!0,At=!1,Tt=!1,$t=!1,St=!1,Nt=!1,Ot=!1,Lt=!1,zt=!0,Ct=!1;const Rt="user-content-";let Dt=!0,Pt=!1,jt={},It=null;const Ft=k({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ht=null;const Bt=k({},["audio","video","img","source","image","track"]);let Ut=null;const qt=k({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Wt="http://www.w3.org/1998/Math/MathML",Yt="http://www.w3.org/2000/svg",Gt="http://www.w3.org/1999/xhtml";let Xt=Gt,Vt=!1,Zt=null;const Kt=k({},[Wt,Yt,Gt],d);let Jt=null;const Qt=["application/xhtml+xml","text/html"],te="text/html";let ee=null,ne=null;const re=r.createElement("form"),oe=function(t){return t instanceof RegExp||t instanceof Function},ie=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ne||ne!==t){if(t&&"object"==typeof t||(t={}),t=M(t),Jt=Jt=-1===Qt.indexOf(t.PARSER_MEDIA_TYPE)?te:t.PARSER_MEDIA_TYPE,ee="application/xhtml+xml"===Jt?d:p,gt="ALLOWED_TAGS"in t?k({},t.ALLOWED_TAGS,ee):mt,vt="ALLOWED_ATTR"in t?k({},t.ALLOWED_ATTR,ee):yt,Zt="ALLOWED_NAMESPACES"in t?k({},t.ALLOWED_NAMESPACES,d):Kt,Ut="ADD_URI_SAFE_ATTR"in t?k(M(qt),t.ADD_URI_SAFE_ATTR,ee):qt,Ht="ADD_DATA_URI_TAGS"in t?k(M(Bt),t.ADD_DATA_URI_TAGS,ee):Bt,It="FORBID_CONTENTS"in t?k({},t.FORBID_CONTENTS,ee):Ft,xt="FORBID_TAGS"in t?k({},t.FORBID_TAGS,ee):{},wt="FORBID_ATTR"in t?k({},t.FORBID_ATTR,ee):{},jt="USE_PROFILES"in t&&t.USE_PROFILES,_t=!1!==t.ALLOW_ARIA_ATTR,kt=!1!==t.ALLOW_DATA_ATTR,Mt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Et=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,At=t.SAFE_FOR_TEMPLATES||!1,Tt=t.WHOLE_DOCUMENT||!1,Nt=t.RETURN_DOM||!1,Ot=t.RETURN_DOM_FRAGMENT||!1,Lt=t.RETURN_TRUSTED_TYPE||!1,St=t.FORCE_BODY||!1,zt=!1!==t.SANITIZE_DOM,Ct=t.SANITIZE_NAMED_PROPS||!1,Dt=!1!==t.KEEP_CONTENT,Pt=t.IN_PLACE||!1,dt=t.ALLOWED_URI_REGEXP||B,Xt=t.NAMESPACE||Gt,bt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&oe(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(bt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&oe(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(bt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(bt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),At&&(kt=!1),Ot&&(Nt=!0),jt&&(gt=k({},[...L]),vt=[],!0===jt.html&&(k(gt,A),k(vt,z)),!0===jt.svg&&(k(gt,T),k(vt,C),k(vt,D)),!0===jt.svgFilters&&(k(gt,$),k(vt,C),k(vt,D)),!0===jt.mathMl&&(k(gt,N),k(vt,R),k(vt,D))),t.ADD_TAGS&&(gt===mt&&(gt=M(gt)),k(gt,t.ADD_TAGS,ee)),t.ADD_ATTR&&(vt===yt&&(vt=M(vt)),k(vt,t.ADD_ATTR,ee)),t.ADD_URI_SAFE_ATTR&&k(Ut,t.ADD_URI_SAFE_ATTR,ee),t.FORBID_CONTENTS&&(It===Ft&&(It=M(It)),k(It,t.FORBID_CONTENTS,ee)),Dt&&(gt["#text"]=!0),Tt&&k(gt,["html","head","body"]),gt.table&&(k(gt,["tbody"]),delete xt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Q=t.TRUSTED_TYPES_POLICY,tt=Q.createHTML("")}else void 0===Q&&(Q=X(H,a)),null!==Q&&"string"==typeof tt&&(tt=Q.createHTML(""));i&&i(t),ne=t}},ae=k({},["mi","mo","mn","ms","mtext"]),se=k({},["foreignobject","desc","title","annotation-xml"]),le=k({},["title","style","font","a","script"]),ce=k({},T);k(ce,$),k(ce,S);const ue=k({},N);k(ue,O);const fe=function(t){let e=J(t);e&&e.tagName||(e={namespaceURI:Xt,tagName:"template"});const n=p(t.tagName),r=p(e.tagName);return!!Zt[t.namespaceURI]&&(t.namespaceURI===Yt?e.namespaceURI===Gt?"svg"===n:e.namespaceURI===Wt?"svg"===n&&("annotation-xml"===r||ae[r]):Boolean(ce[n]):t.namespaceURI===Wt?e.namespaceURI===Gt?"math"===n:e.namespaceURI===Yt?"math"===n&&se[r]:Boolean(ue[n]):t.namespaceURI===Gt?!(e.namespaceURI===Yt&&!se[r])&&!(e.namespaceURI===Wt&&!ae[r])&&!ue[n]&&(le[n]||!ce[n]):!("application/xhtml+xml"!==Jt||!Zt[t.namespaceURI]))},he=function(t){h(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},pe=function(t,e){try{h(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){h(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!vt[t])if(Nt||Ot)try{he(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},de=function(t){let e=null,n=null;if(St)t="<remove></remove>"+t;else{const e=g(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===Jt&&Xt===Gt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const o=Q?Q.createHTML(t):t;if(Xt===Gt)try{e=(new F).parseFromString(o,Jt)}catch(t){}if(!e||!e.documentElement){e=et.createDocument(Xt,"template",null);try{e.documentElement.innerHTML=Vt?tt:o}catch(t){}}const i=e.body||e.documentElement;return t&&n&&i.insertBefore(r.createTextNode(n),i.childNodes[0]||null),Xt===Gt?ot.call(e,Tt?"html":"body")[0]:Tt?e.documentElement:i},ge=function(t){return nt.call(t.ownerDocument||t,t,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT,null)},me=function(t){return t instanceof I&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof j)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},ve=function(t){return"function"==typeof w&&t instanceof w},ye=function(t,e,r){at[t]&&u(at[t],(t=>{t.call(n,e,r,ne)}))},be=function(t){let e=null;if(ye("beforeSanitizeElements",t,null),me(t))return he(t),!0;const r=ee(t.nodeName);if(ye("uponSanitizeElement",t,{tagName:r,allowedTags:gt}),t.hasChildNodes()&&!ve(t.firstElementChild)&&b(/<[/\w]/g,t.innerHTML)&&b(/<[/\w]/g,t.textContent))return he(t),!0;if(!gt[r]||xt[r]){if(!xt[r]&&we(r)){if(bt.tagNameCheck instanceof RegExp&&b(bt.tagNameCheck,r))return!1;if(bt.tagNameCheck instanceof Function&&bt.tagNameCheck(r))return!1}if(Dt&&!It[r]){const e=J(t)||t.parentNode,n=K(t)||t.childNodes;if(n&&e)for(let r=n.length-1;r>=0;--r)e.insertBefore(q(n[r],!0),Z(t))}return he(t),!0}return t instanceof _&&!fe(t)?(he(t),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!b(/<\/no(script|embed|frames)/i,t.innerHTML)?(At&&3===t.nodeType&&(e=t.textContent,u([st,lt,ct],(t=>{e=m(e,t," ")})),t.textContent!==e&&(h(n.removed,{element:t.cloneNode()}),t.textContent=e)),ye("afterSanitizeElements",t,null),!1):(he(t),!0)},xe=function(t,e,n){if(zt&&("id"===e||"name"===e)&&(n in r||n in re))return!1;if(kt&&!wt[e]&&b(ut,e));else if(_t&&b(ft,e));else if(!vt[e]||wt[e]){if(!(we(t)&&(bt.tagNameCheck instanceof RegExp&&b(bt.tagNameCheck,t)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(t))&&(bt.attributeNameCheck instanceof RegExp&&b(bt.attributeNameCheck,e)||bt.attributeNameCheck instanceof Function&&bt.attributeNameCheck(e))||"is"===e&&bt.allowCustomizedBuiltInElements&&(bt.tagNameCheck instanceof RegExp&&b(bt.tagNameCheck,n)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(n))))return!1}else if(Ut[e]);else if(b(dt,m(n,pt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==v(n,"data:")||!Ht[t])if(Mt&&!b(ht,m(n,pt,"")));else if(n)return!1;return!0},we=function(t){return t.indexOf("-")>0},_e=function(t){ye("beforeSanitizeAttributes",t,null);const{attributes:e}=t;if(!e)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vt};let o=e.length;for(;o--;){const i=e[o],{name:a,namespaceURI:s,value:l}=i,c=ee(a);let h="value"===a?l:y(l);if(r.attrName=c,r.attrValue=h,r.keepAttr=!0,r.forceKeepAttr=void 0,ye("uponSanitizeAttribute",t,r),h=r.attrValue,r.forceKeepAttr)continue;if(pe(a,t),!r.keepAttr)continue;if(!Et&&b(/\/>/i,h)){pe(a,t);continue}At&&u([st,lt,ct],(t=>{h=m(h,t," ")}));const p=ee(t.nodeName);if(xe(p,c,h)){if(!Ct||"id"!==c&&"name"!==c||(pe(a,t),h=Rt+h),Q&&"object"==typeof H&&"function"==typeof H.getAttributeType)if(s);else switch(H.getAttributeType(p,c)){case"TrustedHTML":h=Q.createHTML(h);break;case"TrustedScriptURL":h=Q.createScriptURL(h)}try{s?t.setAttributeNS(s,a,h):t.setAttribute(a,h),f(n.removed)}catch(t){}}}ye("afterSanitizeAttributes",t,null)},ke=function t(e){let n=null;const r=ge(e);for(ye("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)ye("uponSanitizeShadowNode",n,null),be(n)||(n.content instanceof l&&t(n.content),_e(n));ye("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,i=null,a=null,s=null;if(Vt=!t,Vt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ve(t)){if("function"!=typeof t.toString)throw x("toString is not a function");if("string"!=typeof(t=t.toString()))throw x("dirty is not a string, aborting")}if(!n.isSupported)return t;if($t||ie(e),n.removed=[],"string"==typeof t&&(Pt=!1),Pt){if(t.nodeName){const e=ee(t.nodeName);if(!gt[e]||xt[e])throw x("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof w)r=de("\x3c!----\x3e"),i=r.ownerDocument.importNode(t,!0),1===i.nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?r=i:r.appendChild(i);else{if(!Nt&&!At&&!Tt&&-1===t.indexOf("<"))return Q&&Lt?Q.createHTML(t):t;if(r=de(t),!r)return Nt?null:Lt?tt:""}r&&St&&he(r.firstChild);const c=ge(Pt?t:r);for(;a=c.nextNode();)be(a)||(a.content instanceof l&&ke(a.content),_e(a));if(Pt)return t;if(Nt){if(Ot)for(s=rt.call(r.ownerDocument);r.firstChild;)s.appendChild(r.firstChild);else s=r;return(vt.shadowroot||vt.shadowrootmode)&&(s=it.call(o,s,!0)),s}let f=Tt?r.outerHTML:r.innerHTML;return Tt&&gt["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&b(W,r.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+f),At&&u([st,lt,ct],(t=>{f=m(f,t," ")})),Q&&Lt?Q.createHTML(f):f},n.setConfig=function(){ie(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),$t=!0},n.clearConfig=function(){ne=null,$t=!1},n.isValidAttribute=function(t,e,n){ne||ie({});const r=ee(t),o=ee(e);return xe(r,o,n)},n.addHook=function(t,e){"function"==typeof e&&(at[t]=at[t]||[],h(at[t],e))},n.removeHook=function(t){if(at[t])return f(at[t])},n.removeHooks=function(t){at[t]&&(at[t]=[])},n.removeAllHooks=function(){at={}},n}var Z=V();return Z}()}(rf)),rf.exports}window.DOMPurify||(window.DOMPurify=of().default||of());const af=t=>Array.isArray(t);function sf(t,e,n){const r=af(e)?[...e]:e.split(".");if(!r.length)throw new Error("Key should not be empty");const o=r.pop();let i=t;return r.forEach((t=>{void 0!==i[t]&&null!==i[t]||(i[t]={}),i=i[t]})),JSON.stringify(i[o])!==JSON.stringify(n)&&(i[o]=n,!0)}var lf=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===cf}(t)}(t)};var cf="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function uf(t,e){return!1!==e.clone&&e.isMergeableObject(t)?gf((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function ff(t,e,n){return t.concat(e).map((function(t){return uf(t,n)}))}function hf(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return Object.propertyIsEnumerable.call(t,e)})):[]}(t))}function pf(t,e){try{return e in t}catch(t){return!1}}function df(t,e,n){var r={};return n.isMergeableObject(t)&&hf(t).forEach((function(e){r[e]=uf(t[e],n)})),hf(e).forEach((function(o){(function(t,e){return pf(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(pf(t,o)&&n.isMergeableObject(e[o])?r[o]=function(t,e){if(!e.customMerge)return gf;var n=e.customMerge(t);return"function"==typeof n?n:gf}(o,n)(t[o],e[o],n):r[o]=uf(e[o],n))})),r}function gf(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||ff,n.isMergeableObject=n.isMergeableObject||lf,n.cloneUnlessOtherwiseSpecified=uf;var r=Array.isArray(e);return r===Array.isArray(t)?r?n.arrayMerge(t,e,n):df(t,e,n):uf(e,n)}gf.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return gf(t,n,e)}),{})};var mf="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},vf=Array.prototype,yf=Object.prototype,bf="undefined"!=typeof Symbol?Symbol.prototype:null,xf=vf.slice,wf=yf.toString,_f=yf.hasOwnProperty,kf="undefined"!=typeof ArrayBuffer,Mf="undefined"!=typeof DataView,Ef=Array.isArray,Af=Object.keys,Tf=kf&&ArrayBuffer.isView,$f=isNaN,Sf=!{toString:null}.propertyIsEnumerable("toString"),Nf=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Of=Math.pow(2,53)-1;function Lf(t){return t instanceof Lf?t:this instanceof Lf?void(this._wrapped=t):new Lf(t)}function zf(t){return t}function Cf(t){var e="[object "+t+"]";return function(t){return wf.call(t)===e}}Lf.VERSION="1.13.6",Lf.prototype.value=function(){return this._wrapped},Lf.prototype.valueOf=Lf.prototype.toJSON=Lf.prototype.value,Lf.prototype.toString=function(){return String(this._wrapped)};var Rf=Cf("Function"),Df=mf.document&&mf.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Df&&(Rf=function(t){return"function"==typeof t||!1});var Pf=Rf;function jf(t){var e=typeof t;return"function"===e||"object"===e&&!!t}var If=Ef||Cf("Array");function Ff(t,e){return null!=t&&_f.call(t,e)}function Hf(t){if(!jf(t))return[];if(Af)return Af(t);var e=[];for(var n in t)Ff(t,n)&&e.push(n);return Sf&&function(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=Nf.length,r=t.constructor,o=Pf(r)&&r.prototype||yf,i="constructor";for(Ff(t,i)&&!e.contains(i)&&e.push(i);n--;)(i=Nf[n])in t&&t[i]!==o[i]&&!e.contains(i)&&e.push(i)}(t,e),e}var Bf,Uf,qf=(Bf=Hf,function(t){var e=arguments.length;if(Uf&&(t=Object(t)),e<2||null==t)return t;for(var n=1;n<e;n++)for(var r=arguments[n],o=Bf(r),i=o.length,a=0;a<i;a++){var s=o[a];Uf&&void 0!==t[s]||(t[s]=r[s])}return t});function Wf(t){return t=qf({},t),function(e){return function(t,e){var n=Hf(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var a=n[i];if(e[a]!==o[a]||!(a in o))return!1}return!0}(e,t)}}function Yf(t){return Lf.toPath(t)}function Gf(t,e,n){return null==t?zf:Pf(t)?function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}}(t,e,n):jf(t)&&!If(t)?Wf(t):(r=Yf(r=t),function(t){return function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}(t,r)});var r}function Xf(t,e){return Gf(t,e,1/0)}function Vf(t,e,n){return Lf.iteratee!==Xf?Lf.iteratee(t,e):Gf(t,e,n)}function Zf(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=Of}}function Kf(t){return function(e){return null==e?void 0:e[t]}}Lf.toPath=function(t){return If(t)?t:[t]},Lf.iteratee=Xf;var Jf=Kf("length"),Qf=Zf(Jf);function th(t,e){for(var n=(e=Yf(e)).length,r=0;r<n;r++){var o=e[r];if(!Ff(t,o))return!1;t=t[o]}return!!n}function eh(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}var nh=4.7421875,rh=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function oh(t){var e,n;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,o=t-1;r>1;)o*=r,r--;return 0===o&&(o=1),o}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*oh(1-t));if(t>=171.35)return 1/0;if(t>85){var i=t*t,a=i*t,s=a*t,l=s*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*i)-139/(51840*a)-571/(2488320*s)+163879/(209018880*l)+5246819/(75246796800*l*t))}--t,n=rh[0];for(var c=1;c<rh.length;++c)n+=rh[c]/(t+c);return e=t+nh+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n}var ih=1/3;var ah=Object.freeze({__proto__:null,add:function(t,e){return Number(t)+Number(e)},sub:function(t,e){return t-e},mul:function(t,e){return t*e},div:function(t,e){return t/e},mod:function(t,e){return t%e},concat:function(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e},equal:function(t,e){return t===e},notEqual:function(t,e){return t!==e},greaterThan:function(t,e){return t>e},lessThan:function(t,e){return t<e},greaterThanEqual:function(t,e){return t>=e},lessThanEqual:function(t,e){return t<=e},andOperator:function(t,e){return Boolean(t&&e)},orOperator:function(t,e){return Boolean(t||e)},inOperator:function(t,e){return eh(e,t)},sinh:function(t){return(Math.exp(t)-Math.exp(-t))/2},cosh:function(t){return(Math.exp(t)+Math.exp(-t))/2},tanh:function(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},asinh:function(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},atanh:function(t){return Math.log((1+t)/(1-t))/2},log10:function(t){return Math.log(t)*Math.LOG10E},neg:function(t){return-t},not:function(t){return!t},trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)},random:function(t){return Math.random()*(t||1)},factorial:function(t){return oh(t+1)},gamma:oh,stringOrArrayLength:function(t){return Array.isArray(t)?t.length:String(t).length},hypot:function(){for(var t=0,e=0,n=0;n<arguments.length;n++){var r,o=Math.abs(arguments[n]);e<o?(t=t*(r=e/o)*r+1,e=o):t+=o>0?(r=o/e)*r:o}return e===1/0?1/0:e*Math.sqrt(t)},condition:function(t,e,n){return t?e:n},roundTo:function(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))},setVar:function(t,e,n){return n&&(n[t]=e),e},arrayIndex:function(t,e){return t[0|e]},max:function(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)},min:function(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)},arrayMap:function(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,n){return t(e,n)}))},arrayFold:function(t,e,n){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(e,n,r){return t(e,n,r)}),e)},arrayFilter:function(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,n){return t(e,n)}))},stringOrArrayIndexOf:function(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)},arrayJoin:function(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)},sign:function(t){return(t>0)-(t<0)||+t},cbrt:function(t){return t<0?-Math.pow(-t,ih):Math.pow(t,ih)},expm1:function(t){return Math.exp(t)-1},log1p:function(t){return Math.log(1+t)},log2:function(t){return Math.log(t)/Math.LN2},sum:function(t){if(!Array.isArray(t))throw new Error("Sum argument is not an array");return t.reduce((function(t,e){return t+Number(e)}),0)}}),sh="INUMBER",lh="IOP1",ch="IOP2",uh="IOP3",fh="IVAR",hh="IVARNAME",ph="IFUNCALL",dh="IFUNDEF",gh="IEXPR",mh="IEXPREVAL",vh="IMEMBER",yh="IENDSTATEMENT",bh="IARRAY";function xh(t,e){this.type=t,this.value=null!=e?e:0}function wh(t){return new xh(lh,t)}function _h(t){return new xh(ch,t)}function kh(t,e,n){var r,o,i,a,s,l,c=[];if(Eh(t))return Ah(t,n);for(var u=t.length,f=0;f<u;f++){var h=t[f],p=h.type;if(p===sh||p===hh)c.push(h.value);else if(p===ch)o=c.pop(),r=c.pop(),"and"===h.value?c.push(!!r&&!!kh(o,e,n)):"or"===h.value?c.push(!!r||!!kh(o,e,n)):"="===h.value?(a=e.binaryOps[h.value],c.push(a(r,kh(o,e,n),n))):(a=e.binaryOps[h.value],c.push(a(Ah(r,n),Ah(o,n))));else if(p===uh)i=c.pop(),o=c.pop(),r=c.pop(),"?"===h.value?c.push(kh(r?o:i,e,n)):(a=e.ternaryOps[h.value],c.push(a(Ah(r,n),Ah(o,n),Ah(i,n))));else if(p===fh){if(/^__proto__|prototype|constructor$/.test(h.value))throw new Error("prototype access detected");if(h.value in e.functions)c.push(e.functions[h.value]);else if(h.value in e.unaryOps&&e.parser.isOperatorEnabled(h.value))c.push(e.unaryOps[h.value]);else{var d=n[h.value];if(void 0===d)throw new Error("undefined variable: "+h.value);c.push(d)}}else if(p===lh)r=c.pop(),a=e.unaryOps[h.value],c.push(a(Ah(r,n)));else if(p===ph){for(l=h.value,s=[];l-- >0;)s.unshift(Ah(c.pop(),n));if(!(a=c.pop()).apply||!a.call)throw new Error(a+" is not a function");c.push(a.apply(void 0,s))}else if(p===dh)c.push(function(){for(var t=c.pop(),r=[],o=h.value;o-- >0;)r.unshift(c.pop());var i=c.pop(),a=function(){for(var o=Object.assign({},n),i=0,a=r.length;i<a;i++)o[r[i]]=arguments[i];return kh(t,e,o)};return Object.defineProperty(a,"name",{value:i,writable:!1}),n[i]=a,a}());else if(p===gh)c.push(Mh(h,e));else if(p===mh)c.push(h);else if(p===vh)r=c.pop(),c.push(r[h.value]);else if(p===yh)c.pop();else{if(p!==bh)throw new Error("invalid Expression");for(l=h.value,s=[];l-- >0;)s.unshift(c.pop());c.push(s)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:Ah(c[0],n)}function Mh(t,e,n){return Eh(t)?t:{type:mh,value:function(n){return kh(t.value,e,n)}}}function Eh(t){return t&&t.type===mh}function Ah(t,e){return Eh(t)?t.value(e):t}xh.prototype.toString=function(){switch(this.type){case sh:case lh:case ch:case uh:case fh:case hh:case yh:return this.value;case ph:return"CALL "+this.value;case dh:return"DEF "+this.value;case bh:return"ARRAY "+this.value;case vh:return"."+this.value;default:return"Invalid Instruction"}};var Th="TEOF",$h="TOP",Sh="TNUMBER",Nh="TSTRING",Oh="TPAREN",Lh="TBRACKET",zh="TCOMMA",Ch="TNAME",Rh="TSEMICOLON";function Dh(t,e,n){this.type=t,this.value=e,this.index=n}function Ph(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}Dh.prototype.toString=function(){return this.type+": "+this.value},Ph.prototype.newToken=function(t,e,n){return new Dh(t,e,null!=n?n:this.pos)},Ph.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},Ph.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},Ph.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(Th,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},Ph.prototype.isString=function(){var t=!1,e=this.pos,n=this.expression.charAt(e);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var o=this.expression.substring(e+1,r);this.current=this.newToken(Nh,this.unescape(o),e),t=!0;break}r=this.expression.indexOf(n,r+1)}return t},Ph.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(Oh,t),this.pos++,!0)},Ph.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("["))&&(this.current=this.newToken(Lh,t),this.pos++,!0)},Ph.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(zh,","),this.pos++,!0)},Ph.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(Rh,";"),this.pos++,!0)},Ph.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken(Sh,this.consts[r]),this.pos+=r.length,!0}return!1},Ph.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken($h,r),this.pos+=r.length,!0}return!1},Ph.prototype.isName=function(){for(var t=this.pos,e=t,n=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(e===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var o=this.expression.substring(t,e);return this.current=this.newToken(Ch,o),this.pos+=o.length,!0}return!1},Ph.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var jh=/^[0-9a-f]{4}$/i;function Ih(t,e,n){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess,this.restrictMemberAccess=new Set(n.restrictMemberAccess||[])}Ph.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var n=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var o=t.substring(e+1,e+5);jh.test(o)||this.parseError("Illegal escape sequence: \\u"+o),n+=String.fromCharCode(parseInt(o,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var i=t.indexOf("\\",e);n+=t.substring(e,i<0?t.length:i),e=i}return n},Ph.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},Ph.prototype.isRadixInteger=function(){var t,e,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))t=16,e=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;t=2,e=/^[01]$/i,++n}for(var r=!1,o=n;n<this.expression.length;){var i=this.expression.charAt(n);if(!e.test(i))break;n++,r=!0}return r&&(this.current=this.newToken(Sh,parseInt(this.expression.substring(o,n),t)),this.pos=n),r},Ph.prototype.isNumber=function(){for(var t,e=!1,n=this.pos,r=n,o=n,i=!1,a=!1;n<this.expression.length&&((t=this.expression.charAt(n))>="0"&&t<="9"||!i&&"."===t);)"."===t?i=!0:a=!0,n++,e=a;if(e&&(o=n),"e"===t||"E"===t){n++;for(var s=!0,l=!1;n<this.expression.length;){if(t=this.expression.charAt(n),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;l=!0,s=!1}else s=!1;n++}l||(n=o)}return e?(this.current=this.newToken(Sh,parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=o,e},Ph.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken($h,e);else if("∙"===e||"•"===e)this.current=this.newToken($h,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken($h,">="),this.pos++):this.current=this.newToken($h,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken($h,"<="),this.pos++):this.current=this.newToken($h,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken($h,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken($h,"=="),this.pos++):this.current=this.newToken($h,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken($h,"!="),this.pos++):this.current=this.newToken($h,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},Ph.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},Ph.prototype.getCoordinates=function(){var t,e=0,n=-1;do{e++,t=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:e,column:t}},Ph.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},Ih.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},Ih.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?eh(e,t.value):"function"==typeof e?e(t):t.value===e)},Ih.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},Ih.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},Ih.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e))&&(this.next(),!0)},Ih.prototype.expect=function(t,e){if(!this.accept(t,e)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(e||t))}},Ih.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept(Ch)||this.accept($h,(function(t){return t.value in e})))t.push(new xh(fh,this.current.value));else if(this.accept(Sh))t.push(new xh(sh,this.current.value));else if(this.accept(Nh))t.push(new xh(sh,this.current.value));else if(this.accept(Oh,"("))this.parseExpression(t),this.expect(Oh,")");else{if(!this.accept(Lh,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(Lh,"]"))t.push(new xh(bh,0));else{var n=this.parseArrayList(t);t.push(new xh(bh,n))}}},Ih.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},Ih.prototype.pushExpression=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n])},Ih.prototype.parseUntilEndStatement=function(t,e){return!!this.accept(Rh)&&(!this.nextToken||this.nextToken.type===Th||this.nextToken.type===Oh&&")"===this.nextToken.value||e.push(new xh(yh)),this.nextToken.type!==Th&&this.parseExpression(e),t.push(new xh(gh,e)),!0)},Ih.prototype.parseArrayList=function(t){for(var e=0;!this.accept(Lh,"]");)for(this.parseExpression(t),++e;this.accept(zh);)this.parseExpression(t),++e;return e},Ih.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept($h,"=");){var e=t.pop(),n=[],r=t.length-1;if(e.type!==ph){if(e.type!==fh&&e.type!==vh)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),t.push(new xh(hh,e.value)),t.push(new xh(gh,n)),t.push(_h("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,i=e.value+1;o<i;o++){var a=r-o;t[a].type===fh&&(t[a]=new xh(hh,t[a].value))}this.parseVariableAssignmentExpression(n),t.push(new xh(gh,n)),t.push(new xh(dh,e.value))}}},Ih.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept($h,"?");){var e=[],n=[];this.parseConditionalExpression(e),this.expect($h,":"),this.parseConditionalExpression(n),t.push(new xh(gh,e)),t.push(new xh(gh,n)),t.push(new xh(uh,"?"))}},Ih.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept($h,"or");){var e=[];this.parseAndExpression(e),t.push(new xh(gh,e)),t.push(_h("or"))}},Ih.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept($h,"and");){var e=[];this.parseComparison(e),t.push(new xh(gh,e)),t.push(_h("and"))}};var Fh=["==","!=","<","<=",">=",">","in"];Ih.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept($h,Fh);){var e=this.current;this.parseAddSub(t),t.push(_h(e.value))}};var Hh=["+","-","||"];Ih.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept($h,Hh);){var e=this.current;this.parseTerm(t),t.push(_h(e.value))}};var Bh=["*","/","%"];Ih.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept($h,Bh);){var e=this.current;this.parseFactor(t),t.push(_h(e.value))}},Ih.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept($h,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===Oh&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if(this.nextToken.type===Rh||this.nextToken.type===zh||this.nextToken.type===Th||this.nextToken.type===Oh&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var n=this.current;this.parseFactor(t),t.push(wh(n.value))}else this.parseExponential(t)},Ih.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept($h,"^");)this.parseFactor(t),t.push(_h("^"))},Ih.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept($h,"!");)t.push(wh("!"))},Ih.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept($h,(function(t){return t.value in e}))){var n=this.current;this.parseAtom(t),t.push(wh(n.value))}else for(this.parseMemberExpression(t);this.accept(Oh,"(");)if(this.accept(Oh,")"))t.push(new xh(ph,0));else{var r=this.parseArgumentList(t);t.push(new xh(ph,r))}},Ih.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(Oh,")");)for(this.parseExpression(t),++e;this.accept(zh);)this.parseExpression(t),++e;return e},Ih.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept($h,".")||this.accept(Lh,"[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');if(this.restrictMemberAccess.has(this.nextToken.value))throw new Error('access to member "'+this.nextToken.value+'" is not permitted');this.expect(Ch),t.push(new xh(vh,this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect(Lh,"]"),t.push(_h("["))}}};const{add:Uh,sub:qh,mul:Wh,div:Yh,mod:Gh,equal:Xh,notEqual:Vh,greaterThan:Zh,lessThan:Kh,greaterThanEqual:Jh,lessThanEqual:Qh,andOperator:tp,orOperator:ep,log10:np,neg:rp,not:op,trunc:ip,random:ap,stringOrArrayLength:sp,condition:lp,roundTo:cp,arrayIndex:up,max:fp,min:hp,sum:pp,arrayMap:dp,arrayFold:gp,arrayFilter:mp,sign:vp,log1p:yp,log2:bp}=ah;function xp(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}function wp(t){return t.trim()}xp.prototype.evaluate=function(t){return t=t||{},kh(this.tokens,this,t)},xp.prototype.variables=function(){return(this.tokens||[]).filter((t=>"IVAR"===t.type)).map((t=>t.value))};const _p=new Set(["__proto__","prototype","constructor"]);function kp(t){this.options=t||{},this.unaryOps={SIN:Math.sin,COS:Math.cos,TAN:Math.tan,ASIN:Math.asin,ACOS:Math.acos,ATAN:Math.atan,SQRT:Math.sqrt,LOG:Math.log,LOG2:Math.log2||bp,LN:Math.log,LOG10:Math.log10||np,LG:Math.log10||np,LOG1P:Math.log1p||yp,ABS:Math.abs,CEIL:Math.ceil,FLOOR:Math.floor,ISNULL:t=>null===t,TRUNC:Math.trunc||ip,"-":rp,"+":Number,EXP:Math.exp,NOT:op,LENGTH:sp,"!":op,SIGN:Math.sign||vp,TEXT:t=>e(t)?t.toISOString():String(t),NUMBER:Number},this.binaryOps={"+":Uh,"-":qh,"*":Wh,"/":Yh,"%":Gh,"^":Math.pow,"==":Xh,"!=":Vh,">":Zh,"<":Kh,">=":Jh,"<=":Qh,and:tp,or:ep,in:(t,e)=>Array.isArray(e)?e.includes(t):String(e).includes(t),"[":up},this.ternaryOps={"?":lp};const e=t=>t instanceof Date&&!isNaN(t),n=t=>{if(e(t))return t;try{const n=new Date(t);return e(n)?n:null}catch(t){return null}};function r(t){return(1===arguments.length&&Array.isArray(t)?t:Array.from(arguments)).slice(0).filter((t=>!isNaN(t)&&Number.isFinite(t)))}let o=/\w*/g,i=/\w\S*/g;const a=/[\\^$*+?.()|[\]{}]/g;try{o=new RegExp("\\p{L}*","ug"),i=new RegExp("[\\p{L}\\p{N}]\\S*","ug")}catch(t){}this.functions={IF:lp,RANDOM:ap,MIN(){const t=r.apply(this,arguments);return hp(t)},MAX(){return fp(r.apply(this,arguments))},SUM(){return pp(r.apply(this,arguments))},MEAN(){const t=r.apply(this,arguments);return pp(t)/t.length},MEDIAN(){const t=r.apply(this,arguments).sort(((t,e)=>t-e)),e=Math.floor(t.length/2);return t.length%2==1?t[e]:.5*(t[e-1]+t[e])},POW:Math.pow,ATAN2:Math.atan2,ROUND:cp,CONCAT(){return Array.from(arguments).join("")},TRIM:wp,SUBSTR:(t,e,n)=>t.substr(e,n),REPLACE:(t,e,n)=>t.replace(new RegExp(String(e).replace(a,"\\$&"),"g"),n),REPLACE_REGEX:(t,e,n)=>t.replace(new RegExp(e,"g"),n),SPLIT:(t,e)=>String(t).split(e),LOWER:t=>String(t).toLowerCase(),UPPER:t=>String(t).toUpperCase(),PROPER:t=>String(t).replace(o,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())),TITLE:t=>String(t).replace(i,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())),SORT(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(_p.has(n))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to SORT is not an array");return t.slice(0).sort(((t,r)=>((t="string"==typeof n?t[n]:"function"==typeof n?n(t):t)>(r="string"==typeof n?r[n]:"function"==typeof n?n(r):r)?1:t<r?-1:0)*(e?1:-1)))},SLICE(t,e,n){if(!Array.isArray(t))throw new Error("First argument to SLICE is not an array");return t.slice(e,n)},JOIN(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(t))throw new Error("First argument to JOIN is not an array");return n?[t.slice(0,t.length-1).join(e),t[t.length-1]].join(n):t.join(e)},MAP:dp,FOLD:gp,FILTER:mp,PLUCK(t,e){if(_p.has(e))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to PLUCK is not an array");return t.map((t=>Object.prototype.hasOwnProperty.call(t,e)?t[e]:null))},INDEXOF:(t,e)=>(Array.isArray(t)||(t=String(t)),t.indexOf(e)),FIND(t,e){if(!Array.isArray(t))throw new Error("First argument to FIND is not an array");if("function"!=typeof e)throw new Error("Second argument to FIND is not a function");const n=t.length;for(let r=0;r<n;r++)if(e(t[r]))return t[r];return null},RANGE(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o},EVERY(t,e){if(!Array.isArray(t))throw new Error("First argument to EVERY is not an array");if("function"!=typeof e)throw new Error("Second argument to EVERY is not a function");const n=t.length;let r=!0;for(let o=0;o<n;o++)if(r=r&&e(t[o]),!r)return!1;return!0},SOME(t,e){if(!Array.isArray(t))throw new Error("First argument to SOME is not an array");if("function"!=typeof e)throw new Error("Second argument to SOME is not a function");const n=t.length;let r=!1;for(let o=0;o<n;o++)if(r=r||e(t[o]),r)return!0;return!1},DATE(){return arguments.length>1&&(arguments[1]=arguments[1]-1),new Date(...arguments)},YEAR:t=>(t=n(t))?t.getFullYear():null,MONTH:t=>(t=n(t))?t.getMonth()+1:null,DAY:t=>(t=n(t))?t.getDate():null,WEEKDAY:t=>(t=n(t))?t.getDay():null,HOURS:t=>(t=n(t))?t.getHours():null,MINUTES:t=>(t=n(t))?t.getMinutes():null,SECONDS:t=>(t=n(t))?t.getSeconds():null,DATEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/864e5:null),TIMEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/1e3:null)},this.unaryOps.LOWER=this.functions.LOWER,this.unaryOps.UPPER=this.functions.UPPER,this.unaryOps.PROPER=this.functions.PROPER,this.unaryOps.TITLE=this.functions.TITLE,this.unaryOps.TRIM=this.functions.TRIM,this.unaryOps.YEAR=this.functions.YEAR,this.unaryOps.MONTH=this.functions.MONTH,this.unaryOps.DAY=this.functions.DAY,this.unaryOps.WEEKDAY=this.functions.WEEKDAY,this.unaryOps.HOURS=this.functions.HOURS,this.unaryOps.MINUTES=this.functions.MINUTES,this.unaryOps.SECONDS=this.functions.SECONDS,this.consts={E:Math.E,PI:Math.PI,TRUE:!0,FALSE:!1,NA:Number.NaN,NULL:Number.NaN}}kp.prototype.parse=function(t){var e=[],n=new Ih(this,new Ph(this,t),{allowMemberAccess:!0,restrictMemberAccess:_p});return n.parseExpression(e),n.expect(Th,"EOF"),new xp(e,this)},kp.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var Mp=new kp;kp.parse=function(t){return Mp.parse(t)},kp.evaluate=function(t,e){return Mp.parse(t).evaluate(e)},kp.keywords=["ABS","ACOS","ACOSH","and","ASIN","ASINH","ATAN","ATAN2","ATANH","CBRT","CEIL","CONCAT","COS","COSH","DATEDIFF","DAY","E","EVERY","EXP","EXPM1","FIND","FLOOR","HOURS","IF","in","INDEXOF","ISNULL","JOIN","LENGTH","LN","LOG","LOG10","LOG1P","LOG2","LOWER","MAP","MAX","MEAN","MEDIAN","MIN","MINUTES","MONTH","NOT","NOT","or","PI","PLUCK","POW","PROPER","RANDOM","RANGE","REPLACE","REPLACE_REGEX","ROUND","SECONDS","SIGN","SIN","SINH","SLICE","SOME","SORT","SPLIT","SQRT","SUBSTR","SUM","TAN","TANH","TIMEDIFF","TITLE","TRIM","TRUNC","UPPER","WEEKDAY","YEAR"];var Ep={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",AND:"logical",OR:"logical",NOT:"logical",IN:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};function Ap(t){return t.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"").replace(/-/g,"_").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1").replace(/^(and|or|in|true|false)$/,"$1_")}kp.prototype.isOperatorEnabled=function(t){var e=function(t){return Object.prototype.hasOwnProperty.call(Ep,t)?Ep[t]:t}(t),n=this.options.operators||{};return!(e in n)||!!n[e]};const Tp="%UNDEFINED%",$p={color:{prop:"color"},fontWeight:{prop:"font-weight"},fontStretch:{prop:"font-stretch"},typeface:{prop:"font-family"},textTransform:{prop:"text-transform"},letterSpacing:{tsf:t=>Sp(t),prop:"letter-spacing"},fontSize:{prop:"font-size",tsf:t=>Sp(t)},lineHeight:{prop:"line-height",tsf:t=>{return(e=t)===Tp?e:e>3?"".concat(e,"px"):String(e);var e}},underlined:{prop:"text-decoration",tsf:t=>t?"underline":"none"},cursive:{prop:"font-style",tsf:t=>t?"italic":"normal"}};function Sp(t){return t===Tp?t:Number.isFinite(t)?"".concat(t,"px"):t}function Np(t,e,n){if(2===t.version){for(const n of["chart","bodyCenter","bodyTop","body"])if(th(t,["blocks",n,"styles","typography",e]))return vc(t,["blocks",n,"styles","typography",e]);return n}return vc(t,"typography.chart.".concat(e),n)}function Op(t){Tc(t,"svelte-1j9q1i5",".callout-line path{stroke:#222;fill:none}.callout-line path.crisp{shape-rendering:crispEdges}.callout-line circle{stroke:#222;fill:none}.callout-line-arrow-head{fill:#222}.callout-line-arrow-head.callout-line-arrow-head-stroke{stroke:#222;fill:none}")}class Lp extends bu{constructor(t){super(),yu(this,t,null,null,Mc,{},Op)}}function zp(t){Tc(t,"svelte-1gf2ad6",".text-annotation.svelte-1gf2ad6.svelte-1gf2ad6{position:relative;z-index:2;pointer-events:auto}.text.svelte-1gf2ad6.svelte-1gf2ad6,.shadow-text.svelte-1gf2ad6.svelte-1gf2ad6{left:0px;position:absolute;white-space:pre-line;line-height:1.2;outline-color:rgba(0, 0, 0, 0)}.shadow-text.svelte-1gf2ad6.svelte-1gf2ad6{pointer-events:none}.shadow-text.svelte-1gf2ad6.svelte-1gf2ad6,.text-annotation .shadow-text *{color:transparent !important}.dw-bold.svelte-1gf2ad6.svelte-1gf2ad6{font-weight:700}.italic.svelte-1gf2ad6.svelte-1gf2ad6{font-style:italic}.underline.svelte-1gf2ad6.svelte-1gf2ad6{-webkit-text-decoration:underline;text-decoration:underline}.num.svelte-1gf2ad6.svelte-1gf2ad6{display:flex;justify-content:center;align-items:center;font-size:12px;border-radius:50%;width:20px;height:20px}.connector-line.svelte-1gf2ad6.svelte-1gf2ad6{left:0px;position:absolute;direction:ltr;pointer-events:none}svg.svelte-1gf2ad6.svelte-1gf2ad6{position:absolute;overflow:visible}.reference-point.svelte-1gf2ad6.svelte-1gf2ad6,.offset-point.svelte-1gf2ad6.svelte-1gf2ad6{left:0px;position:absolute;width:5px;height:5px;background:rgba(255, 0, 221, 0.95);z-index:1}.reference-point.hollow.svelte-1gf2ad6.svelte-1gf2ad6{background:rgba(255, 0, 221, 0.1);border:1px solid rgba(255, 0, 221, 0.95);border-radius:50%;left:-1px;top:-1px;z-index:auto}.reference-point.svelte-1gf2ad6.svelte-1gf2ad6::before{content:'';position:absolute;top:-5px;left:-5px;width:calc(100% + 9px);height:calc(100% + 9px);cursor:grab}.edit-mode.svelte-1gf2ad6:not(.key) .text.svelte-1gf2ad6{cursor:grab}.edit-mode.svelte-1gf2ad6:not(.key) .text .text-inner.svelte-1gf2ad6:after{outline:1px none rgba(255, 0, 221, 0);transition:outline-color 0.2s, outline-style 0.2s}.edit-mode.svelte-1gf2ad6:not(.key):not(.selected) .text:hover .text-inner.svelte-1gf2ad6:after{outline:1px dotted rgba(255, 0, 221, 0.95)}.edit-mode.svelte-1gf2ad6:not(.key) .text.svelte-1gf2ad6::before{content:'';z-index:-1;position:absolute;top:-10px;left:-10px;width:calc(100% + 20px);height:calc(100% + 20px);cursor:grab}.edit-mode.selected.svelte-1gf2ad6 .text.svelte-1gf2ad6{outline-style:solid}.edit-mode.svelte-1gf2ad6 .text-background.svelte-1gf2ad6{position:relative}.edit-mode.selected.svelte-1gf2ad6:not(.editable) .text-inner.svelte-1gf2ad6::after{background:rgba(255, 0, 221, 0.1)}.edit-mode.svelte-1gf2ad6:not(.selected):hover .text-inner.svelte-1gf2ad6::after,.edit-mode.selected.editable.svelte-1gf2ad6:hover .text-inner.svelte-1gf2ad6::after{background:rgba(255, 0, 221, 0.05)}.edit-mode.svelte-1gf2ad6 .text:hover .text-inner.svelte-1gf2ad6::after,.edit-mode.selected.svelte-1gf2ad6 .text .text-inner.svelte-1gf2ad6::after{outline:1px solid rgba(255, 0, 221, 0.95)}.edit-mode.editable.svelte-1gf2ad6:hover .text-inner.svelte-1gf2ad6:hover:after{background:transparent !important}.edit-mode.svelte-1gf2ad6 .text-inner.svelte-1gf2ad6:after{content:'';width:100%;height:100%;position:absolute;left:0;top:0;pointer-events:none}.edit-mode.selected.editable.svelte-1gf2ad6 .text.svelte-1gf2ad6{background:transparent}.edit-mode.selected.editable.svelte-1gf2ad6 .text-inner.svelte-1gf2ad6{background:rgba(255, 255, 255, 0.9);cursor:text}.edit-mode.not-editable.svelte-1gf2ad6.svelte-1gf2ad6:not(.key){-webkit-user-select:none;user-select:none;cursor:grab}.edit-mode.svelte-1gf2ad6 .text-inner.svelte-1gf2ad6{outline:0}.edit-mode.dragging.svelte-1gf2ad6.svelte-1gf2ad6,.edit-mode.dragging.svelte-1gf2ad6 .text.svelte-1gf2ad6::before,.edit-mode.dragging.selected.svelte-1gf2ad6 .text-inner.svelte-1gf2ad6{cursor:grabbing}.edit-mode.svelte-1gf2ad6 .helper.svelte-1gf2ad6{left:0px;position:absolute;direction:ltr}.edit-mode.svelte-1gf2ad6 .helper-line.svelte-1gf2ad6{stroke:rgba(255, 0, 221, 0.95);stroke-dasharray:2, 2;fill:none}.edit-mode.svelte-1gf2ad6 .num.text.svelte-1gf2ad6{outline:0}.edit-mode.selected.svelte-1gf2ad6 .num .text-inner.svelte-1gf2ad6{background:transparent}")}function Cp(t){let e,n,r,o,i,a,s,l,c,u,f,h,p=t[0].connectorLine&&t[0].connectorLine.enabled&&Rp(t),d=t[14]&&Dp(t),g=t[34]&&Pp(t),m=t[31]&&jp(t),v=t[0].bg&&t[19]&&!t[15]&&Ip(t);function y(t,e){return t[9]?Hp:Fp}let b=y(t),x=b(t),w=t[9]&&!t[15]&&Xp(t);return{c(){e=Oc("div"),p&&p.c(),n=Cc(),d&&d.c(),r=Cc(),g&&g.c(),o=Cc(),m&&m.c(),i=Cc(),v&&v.c(),a=Cc(),s=Oc("div"),x.c(),l=Cc(),w&&w.c(),jc(s,"class","text svelte-1gf2ad6"),jc(s,"style",c=t[36](t[0])),Hc(s,"dw-bold",t[0].bold||t[15]),Hc(s,"italic",t[0].italic&&!t[15]),Hc(s,"underline",t[0].underline&&!t[15]),Hc(s,"dw-circle",t[15]),Hc(s,"num",t[15]),jc(e,"class","text-annotation svelte-1gf2ad6"),jc(e,"role","listitem"),Hc(e,"hide",t[37]),Hc(e,"edit-mode",t[9]),Hc(e,"selected",t[16]),Hc(e,"editable",t[1]&&t[16]),Hc(e,"not-editable",!t[1]||!t[16]),Hc(e,"key",t[15]),Hc(e,"dragging",t[2]),Hc(e,"resizing",t[5])},m(c,y){$c(c,e,y),p&&p.m(e,null),Ac(e,n),d&&d.m(e,null),Ac(e,r),g&&g.m(e,null),Ac(e,o),m&&m.m(e,null),Ac(e,i),v&&v.m(e,null),Ac(e,a),Ac(e,s),x.m(s,null),Ac(s,l),w&&w.m(s,null),t[87](s),u=!0,f||(h=[Dc(s,"mousedown",Pc(t[38])),Dc(s,"click",t[39]),Dc(s,"contextmenu",t[40])],f=!0)},p(t,f){t[0].connectorLine&&t[0].connectorLine.enabled?p?p.p(t,f):(p=Rp(t),p.c(),p.m(e,n)):p&&(p.d(1),p=null),t[14]?d?d.p(t,f):(d=Dp(t),d.c(),d.m(e,r)):d&&(d.d(1),d=null),t[34]?g?g.p(t,f):(g=Pp(t),g.c(),g.m(e,o)):g&&(g.d(1),g=null),t[31]?m?m.p(t,f):(m=jp(t),m.c(),m.m(e,i)):m&&(m.d(1),m=null),t[0].bg&&t[19]&&!t[15]?v?v.p(t,f):(v=Ip(t),v.c(),v.m(e,a)):v&&(v.d(1),v=null),b===(b=y(t))&&x?x.p(t,f):(x.d(1),x=b(t),x&&(x.c(),x.m(s,l))),t[9]&&!t[15]?w?(w.p(t,f),33280&f[0]&&hu(w,1)):(w=Xp(t),w.c(),hu(w,1),w.m(s,null)):w&&(uu(),pu(w,1,1,(()=>{w=null})),fu()),(!u||1&f[0]|32&f[1]&&c!==(c=t[36](t[0])))&&jc(s,"style",c),(!u||32769&f[0])&&Hc(s,"dw-bold",t[0].bold||t[15]),(!u||32769&f[0])&&Hc(s,"italic",t[0].italic&&!t[15]),(!u||32769&f[0])&&Hc(s,"underline",t[0].underline&&!t[15]),(!u||32768&f[0])&&Hc(s,"dw-circle",t[15]),(!u||32768&f[0])&&Hc(s,"num",t[15]),(!u||64&f[1])&&Hc(e,"hide",t[37]),(!u||512&f[0])&&Hc(e,"edit-mode",t[9]),(!u||65536&f[0])&&Hc(e,"selected",t[16]),(!u||65538&f[0])&&Hc(e,"editable",t[1]&&t[16]),(!u||65538&f[0])&&Hc(e,"not-editable",!t[1]||!t[16]),(!u||32768&f[0])&&Hc(e,"key",t[15]),(!u||4&f[0])&&Hc(e,"dragging",t[2]),(!u||32&f[0])&&Hc(e,"resizing",t[5])},i(t){u||(hu(w),u=!0)},o(t){pu(w),u=!1},d(n){n&&Sc(e),p&&p.d(),d&&d.d(),g&&g.d(),m&&m.d(),v&&v.d(),x.d(),w&&w.d(),t[87](null),f=!1,_c(h)}}}function Rp(t){let e,n,r;return{c(){e=Oc("div"),n=Lc("svg"),jc(n,"width",t[23]),jc(n,"height",t[24]),jc(n,"class","svelte-1gf2ad6"),jc(e,"class","connector-line svelte-1gf2ad6"),jc(e,"aria-hidden","true"),jc(e,"style",r=`transform: ${Gu(t[10],t[11])}`)},m(r,o){$c(r,e,o),Ac(e,n),t[77](n)},p(t,o){8388608&o[0]&&jc(n,"width",t[23]),16777216&o[0]&&jc(n,"height",t[24]),3072&o[0]&&r!==(r=`transform: ${Gu(t[10],t[11])}`)&&jc(e,"style",r)},d(n){n&&Sc(e),t[77](null)}}}function Dp(t){let e,n,r,o;return{c(){e=Oc("div"),n=Lc("svg"),r=Lc("path"),jc(r,"class","helper-line svelte-1gf2ad6"),jc(r,"d",o=t[29](t[0])),jc(n,"width",t[27]),jc(n,"height",t[28]),jc(n,"class","svelte-1gf2ad6"),jc(e,"class","helper svelte-1gf2ad6")},m(o,i){$c(o,e,i),Ac(e,n),Ac(n,r),t[78](n)},p(t,e){536870913&e[0]&&o!==(o=t[29](t[0]))&&jc(r,"d",o),134217728&e[0]&&jc(n,"width",t[27]),268435456&e[0]&&jc(n,"height",t[28])},d(n){n&&Sc(e),t[78](null)}}}function Pp(t){let e,n,r,o;return{c(){e=Oc("div"),jc(e,"class","reference-point svelte-1gf2ad6"),jc(e,"style",n=`transform: ${t[32]()}`),Hc(e,"hollow",t[33])},m(n,i){$c(n,e,i),r||(o=Dc(e,"mousedown",Pc(t[41])),r=!0)},p(t,r){2&r[1]&&n!==(n=`transform: ${t[32]()}`)&&jc(e,"style",n),4&r[1]&&Hc(e,"hollow",t[33])},d(t){t&&Sc(e),r=!1,o()}}}function jp(t){let e,n;return{c(){e=Oc("div"),jc(e,"class","offset-point svelte-1gf2ad6"),jc(e,"style",n=`transform: ${t[30]()}`)},m(t,n){$c(t,e,n)},p(t,r){1073741824&r[0]&&n!==(n=`transform: ${t[30]()}`)&&jc(e,"style",n)},d(t){t&&Sc(e)}}}function Ip(t){let e,n,r,o=t[6](t[0].text)+"";return{c(){e=Oc("div"),n=Oc("span"),jc(n,"class","export-text"),jc(e,"class","shadow-text svelte-1gf2ad6"),jc(e,"aria-hidden","true"),jc(e,"style",r=t[35](t[0])),Hc(e,"dw-bold",t[0].bold),Hc(e,"italic",t[0].italic),Hc(e,"underline",t[0].underline)},m(t,r){$c(t,e,r),Ac(e,n),n.innerHTML=o},p(t,i){65&i[0]&&o!==(o=t[6](t[0].text)+"")&&(n.innerHTML=o),1&i[0]|16&i[1]&&r!==(r=t[35](t[0]))&&jc(e,"style",r),1&i[0]&&Hc(e,"dw-bold",t[0].bold),1&i[0]&&Hc(e,"italic",t[0].italic),1&i[0]&&Hc(e,"underline",t[0].underline)},d(t){t&&Sc(e)}}}function Fp(t){let e;function n(t,e){return t[15]?Up:Bp}let r=n(t),o=r(t);return{c(){e=Oc("span"),o.c(),jc(e,"class","export-text")},m(n,r){$c(n,e,r),o.m(e,null),t[82](e)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e,null)))},d(n){n&&Sc(e),o.d(),t[82](null)}}}function Hp(t){let e;function n(t,e){return t[15]?Wp:qp}let r=n(t),o=r(t);return{c(){o.c(),e=Rc()},m(t,n){o.m(t,n),$c(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&Sc(e)}}}function Bp(t){let e,n,r=t[6](t[0].text)+"";return{c(){e=new Bc(!1),n=Rc(),e.a=n},m(t,o){e.m(r,t,o),$c(t,n,o)},p(t,n){65&n[0]&&r!==(r=t[6](t[0].text)+"")&&e.p(r)},d(t){t&&Sc(n),t&&e.d()}}}function Up(t){let e,n=t[7].num+"";return{c(){e=zc(n)},m(t,n){$c(t,e,n)},p(t,r){128&r[0]&&n!==(n=t[7].num+"")&&Ic(e,n)},d(t){t&&Sc(e)}}}function qp(t){let e;function n(t,e){return t[1]&&t[16]?Gp:Yp}let r=n(t),o=r(t);return{c(){e=Oc("div"),o.c(),jc(e,"class","text-background svelte-1gf2ad6")},m(t,n){$c(t,e,n),o.m(e,null)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e,null)))},d(t){t&&Sc(e),o.d()}}}function Wp(t){let e,n,r=t[7].num+"";return{c(){e=Oc("span"),n=zc(r)},m(t,r){$c(t,e,r),Ac(e,n)},p(t,e){128&e[0]&&r!==(r=t[7].num+"")&&Ic(n,r)},d(t){t&&Sc(e)}}}function Yp(t){let e,n=t[6](t[0].text)+"";return{c(){e=Oc("span"),jc(e,"class","text-inner text-edit svelte-1gf2ad6")},m(r,o){$c(r,e,o),e.innerHTML=n,t[81](e)},p(t,r){65&r[0]&&n!==(n=t[6](t[0].text)+"")&&(e.innerHTML=n)},d(n){n&&Sc(e),t[81](null)}}}function Gp(t){let e,n,r,o=t[6](t[26])+"";return{c(){e=Oc("span"),jc(e,"contenteditable",""),jc(e,"class","text-inner text-edit svelte-1gf2ad6"),void 0===t[25]&&nu((()=>t[80].call(e)))},m(i,a){$c(i,e,a),e.innerHTML=o,t[79](e),void 0!==t[25]&&(e.innerHTML=t[25]),n||(r=[Dc(e,"input",t[80]),Dc(e,"input",t[42]),Dc(e,"blur",t[43])],n=!0)},p(t,n){67108928&n[0]&&o!==(o=t[6](t[26])+"")&&(e.innerHTML=o),33554432&n[0]&&t[25]!==e.innerHTML&&(e.innerHTML=t[25])},d(o){o&&Sc(e),t[79](null),n=!1,_c(r)}}}function Xp(t){let e,n,r,o,i;function a(e){t[83](e)}function s(e){t[84](e)}function l(e){t[85](e)}let c={type:"text",annotation:t[0],index:t[8]};return void 0!==t[3]&&(c.noOffsetAtEventStart=t[3]),void 0!==t[4]&&(c.activeResizer=t[4]),void 0!==t[5]&&(c.resizing=t[5]),e=new Au({props:c}),Zc.push((()=>du(e,"noOffsetAtEventStart",a))),Zc.push((()=>du(e,"activeResizer",s))),Zc.push((()=>du(e,"resizing",l))),e.$on("selectAnnotation",t[86]),e.$on("setWidth",t[45]),{c(){gu(e.$$.fragment)},m(t,n){mu(e,t,n),i=!0},p(t,i){const a={};1&i[0]&&(a.annotation=t[0]),256&i[0]&&(a.index=t[8]),!n&&8&i[0]&&(n=!0,a.noOffsetAtEventStart=t[3],ru((()=>n=!1))),!r&&16&i[0]&&(r=!0,a.activeResizer=t[4],ru((()=>r=!1))),!o&&32&i[0]&&(o=!0,a.resizing=t[5],ru((()=>o=!1))),e.$set(a)},i(t){i||(hu(e.$$.fragment,t),i=!0)},o(t){pu(e.$$.fragment,t),i=!1},d(t){vu(e,t)}}}function Vp(t){let e,n,r,o,i,a;e=new Lp({});let s=!t[18]&&!t[17]&&Cp(t);return{c(){gu(e.$$.fragment),n=Cc(),s&&s.c(),r=Rc()},m(l,c){mu(e,l,c),$c(l,n,c),s&&s.m(l,c),$c(l,r,c),o=!0,i||(a=Dc(window,"keydown",t[44]),i=!0)},p(t,e){t[18]||t[17]?s&&(uu(),pu(s,1,1,(()=>{s=null})),fu()):s?(s.p(t,e),393216&e[0]&&hu(s,1)):(s=Cp(t),s.c(),hu(s,1),s.m(r.parentNode,r))},i(t){o||(hu(e.$$.fragment,t),hu(s),o=!0)},o(t){pu(e.$$.fragment,t),pu(s),o=!1},d(t){vu(e,t),t&&Sc(n),s&&s.d(t),t&&Sc(r),i=!1,a()}}}function Zp(t,e,n){let r,o,i,a,s,l,c,u,f,h,p,d,g,m,v,y,b,x,w,_,k,M,E,A,T,$,S,N,O,L,z,C,{annotation:R={}}=e,{dataToPx:D}=e,{pxToData:P}=e,{rtl:j=!1}=e,{mirrorX:I=!1}=e,{chroma:F}=e,{purifyHtml:H}=e,{theme:B}=e,{cm:U}=e,{visWidth:q}=e,{isMobileWidth:W}=e,{key:Y}=e,G=0,X=0,V=0,Z=0,K=0;function J(){let t=tf(R.dy,R.dx)+90;return R.dx<0&&(t+=180),function(t){switch(!0){case t>337.5||t<=22.5:return"bc";case t>22.5&&t<=67.5:return"bl";case t>67.5&&t<=112.5:return"ml";case t>112.5&&t<=157.5:return"tl";case t>157.5&&t<=202.5:return"tc";case t>202.5&&t<=247.5:return"tr";case t>247.5&&t<=292.5:return"mr";case t>292.5&&t<=337.5:return"br";default:return"mc"}}(t)}function Q(t){const[e,n]=v(R,{useInnerText:!0});let r=e,o=e+K;j&&p&&(r-=d,o-=d);return G>r-t&&G<o+t&&X>n-t&&X<n+Z+t}function tt(){if(!h)return 4;const t=J();if(!!(t.includes("c")||t.includes("m")))return 0;const e=(V*Math.sqrt(2)-V)/2;return-Math.sqrt(Math.pow(e,2)/2)}Yc((()=>{function t(){L&&(n(61,V=L.offsetWidth),n(62,Z=L.offsetHeight),n(63,K=z&&z.offsetWidth||ot&&ot.offsetWidth||0),function(){if(!R.connectorLine||!R.connectorLine.enabled)return;const t=ct(C);t.selectAll("*").remove();const{circle:e,circleRadius:r,stroke:o,inheritColor:a,targetPadding:s}=R.connectorLine,[l,c]=v(R,{useInnerText:!0});let f=l-G;j&&p&&(f-=d);const g=c-X,m=a&&u&&!h?u:Np(B,"color",i),y={curveLeft:I?"curveRight":"curveLeft",curveRight:I?"curveLeft":"curveRight",straight:"straight"},b=h?V:K,x={...R.connectorLine,circle:e,circleRadius:r,source:{x:f,y:g,width:b,height:Z},sourcePadding:tt(),targetPadding:h?0:s,strokeWidth:h?1:o,color:m,type:y[R.connectorLine.type]},w=Wu(x);t.call(w);const k=C.getBBox();n(23,et=Math.max(Math.ceil(k.width),1)),n(24,nt=Math.max(Math.ceil(k.height),1));const M=t.select(".callout-line").select("path").attr("d");(function(t,e){const n=t.replace("M","").replace("Q","").trim().replace(/ /g,",").split(",");let r=Math.max(Math.abs(Number(n[0])),Math.abs(Number(n[1])))-e;return isNaN(r)&&(r=0),r})(M,s)<10||Q(5)||function(t,e,n){if(!t||!n)return;const r=e.indexOf("M ")+2,o=e.indexOf(" ",r),i=e.substring(r,o).split(",").map((t=>parseInt(t,10)));return Math.pow(i[0]-0,2)+Math.pow(i[1]-0,2)<Math.pow(n,2)}(e,M,r)?(t.selectAll("*").remove(),_&&rt("updateEditorState",{hideConnectorLine:!0})):_&&rt("updateEditorState",{hideConnectorLine:!1})}())}at?t():(eu(),Qc).then(t)}));let et=1,nt=1;const rt=Gc();let ot,{index:it}=e,{editMode:at}=e,{isEditable:st}=e,{editorState:lt}=e,{moveX:ut}=e,{moveY:ft}=e,{dragging:ht}=e,{noOffsetAtEventStart:pt}=e,{forceOffsetDrag:dt}=e,{forceAnchorDrag:gt}=e,{forceAnchorDragTemp:mt}=e;let vt,yt,{activeResizer:bt}=e,{resizing:xt}=e,wt=R.text;let _t=1,kt=1;return t.$$set=t=>{"annotation"in t&&n(0,R=t.annotation),"dataToPx"in t&&n(50,D=t.dataToPx),"pxToData"in t&&n(51,P=t.pxToData),"rtl"in t&&n(52,j=t.rtl),"mirrorX"in t&&n(53,I=t.mirrorX),"chroma"in t&&n(54,F=t.chroma),"purifyHtml"in t&&n(6,H=t.purifyHtml),"theme"in t&&n(55,B=t.theme),"cm"in t&&n(56,U=t.cm),"visWidth"in t&&n(57,q=t.visWidth),"isMobileWidth"in t&&n(58,W=t.isMobileWidth),"key"in t&&n(7,Y=t.key),"index"in t&&n(8,it=t.index),"editMode"in t&&n(9,at=t.editMode),"isEditable"in t&&n(1,st=t.isEditable),"editorState"in t&&n(59,lt=t.editorState),"moveX"in t&&n(46,ut=t.moveX),"moveY"in t&&n(47,ft=t.moveY),"dragging"in t&&n(2,ht=t.dragging),"noOffsetAtEventStart"in t&&n(3,pt=t.noOffsetAtEventStart),"forceOffsetDrag"in t&&n(48,dt=t.forceOffsetDrag),"forceAnchorDrag"in t&&n(49,gt=t.forceAnchorDrag),"forceAnchorDragTemp"in t&&n(60,mt=t.forceAnchorDragTemp),"activeResizer"in t&&n(4,bt=t.activeResizer),"resizing"in t&&n(5,xt=t.resizing)},t.$$.update=()=>{if(16777216&t.$$.dirty[1]&&n(76,r={mobile:vc(B,"vis.base.annotations.mobile",{}),desktop:vc(B,"vis.base.annotations.text",{})}),16777216&t.$$.dirty[1]&&n(19,o=vc(B,"colors.background","#ffffff")),25165824&t.$$.dirty[1]&&n(67,i=ef(B,F).fallbackBaseColor),524288&t.$$.dirty[0]|16384&t.$$.dirty[2]&&n(73,a=vc(r.mobile,"icons.background",Ju(o,.7))),16416&t.$$.dirty[2]&&n(74,s=vc(r.mobile,"icons.outline",`1px solid ${i}`)),16384&t.$$.dirty[2]&&n(75,l=r.desktop.color),4194304&t.$$.dirty[1]&&n(64,c=I?-1:1),1&t.$$.dirty[0]&&n(0,R.dx=+R.dx||0,R),1&t.$$.dirty[0]&&n(0,R.dy=+R.dy||0,R),256&t.$$.dirty[0]|268435456&t.$$.dirty[1]&&n(16,_=1===lt.selectedTextAnnotations.length&&lt.selectedTextAnnotations[0]===it),65549&t.$$.dirty[0]|538935296&t.$$.dirty[1]|4&t.$$.dirty[2]&&_&&ht&&(ut||ft)){if(pt&&!dt||gt||mt){let[t,e]=D(R.x,R.y,R.panel);t+=ut,e+=ft;const[r,o]=P(t,e);n(0,R.x=r,R),n(0,R.y=o,R)}else n(0,R.dx+=ut*c,R),n(0,R.dy+=ft,R);dt&&pt&&!R.connectorLine.enabled&&!Q(20)&&(n(0,R.connectorLine.enabled=!0,R),n(0,R.connectorLine.type="curveLeft",R)),n(46,ut=0),n(47,ft=0)}if(65593&t.$$.dirty[0]|72974336&t.$$.dirty[1]&&_&&xt&&(ut||ft)){let t=ut/q*100,e=0;if(R.align.includes("c")?(e+=ut/2,"l"===bt&&(t=-t)):R.align.includes(I?"r":"l")?"l"===bt&&(e+=ut,t=-t):R.align.includes(I?"l":"r")&&("l"===bt&&(t=-t),"r"===bt&&(e+=ut)),pt){const t=D(R.x,R.y,R.panel);let r=t[0];r+=e;const[o,i]=P(r,t[1]);n(0,R.x=o,R),n(0,R.y=i,R)}else n(0,R.dx+=e,R);n(0,R.width+=t,R),n(0,R.width=Math.max(5,R.width),R),n(46,ut=0)}var e;if(1&t.$$.dirty[0]|33554432&t.$$.dirty[1]|8192&t.$$.dirty[2]&&n(68,u=R.color?U(R.color):U(l,{noInvert:!0})),1&t.$$.dirty[0]|134217728&t.$$.dirty[1]&&n(37,f=Ku(R)||!(!Vu((e=R).showMobile)||!1!==e.showDesktop||W)||Zu(R)&&W),128&t.$$.dirty[0]&&n(15,h=Y&&Y.render),32768&t.$$.dirty[0]|1073741824&t.$$.dirty[1]|2&t.$$.dirty[2]&&n(69,p=!h&&K>V),1073741824&t.$$.dirty[1]|2&t.$$.dirty[2]&&(d=K-V),1&t.$$.dirty[0]|524288&t.$$.dirty[1]&&n(10,[G,X]=D(R.x,R.y,R.panel),G,(n(11,X),n(50,D),n(0,R),n(16,_),n(2,ht),n(46,ut),n(47,ft),n(3,pt),n(48,dt),n(49,gt),n(60,mt),n(51,P),n(64,c),n(5,xt),n(57,q),n(4,bt),n(53,I),n(59,lt),n(8,it))),1024&t.$$.dirty[0]&&n(18,g=void 0===G),2048&t.$$.dirty[0]&&n(17,m=void 0===X),1&t.$$.dirty[0]&&n(65,k=0===R.dx&&0===R.dy),35840&t.$$.dirty[0]|1077936128&t.$$.dirty[1]|143&t.$$.dirty[2]&&n(70,v=(t,{useInnerText:e=!1}={})=>{let[n,r]=[G,X],o=t.align;h||(n+=t.dx*c,r+=t.dy),h&&!k&&([n,r]=function(t,e){const n=R.connectorLine.circle?Math.max(0,R.connectorLine.circleRadius):0,r=22+n,o=(27+n)*c,i=J(),[a,s]={br:[-r,-r],bc:[-o,0],bl:[-r,r],mr:[0,-o],mc:[-o-.5*Z,0],ml:[0,o],tr:[r,-r],tc:[o,0],tl:[r,r]}[i];return[t+=s,e+=a]}(n,r),o="mc");const i={l:I?"r":"l",r:I?"l":"r",c:"c"}[o.charAt(1)],a=o.charAt(0);return n-=(!e||p||h?V:K)*{l:0,c:.5,r:1}[i],r-=Z*{t:0,m:.5,b:1}[a],[n,r]}),256&t.$$.dirty[2]&&n(71,y=t=>{const[e,n]=v(t);return Gu(e,n)}),32768&t.$$.dirty[0]|7744&t.$$.dirty[2]&&n(36,x=t=>{const e=[];return h?(e.push(`border: ${s}`),e.push(`background-color: ${a}`)):(e.push(...b(t)),u&&e.push(`color: ${u}`)),e.push(`transform: ${y(t)}`),e.join("; ")}),524288&t.$$.dirty[0]|1536&t.$$.dirty[2]&&n(35,w=t=>{const e=[];return e.push(...b(t)),e.push(`text-shadow: ${Xu(2,2,o)}`),e.push(`transform: ${y(t)}`),e.join("; ")}),4098&t.$$.dirty[0]&&!st&&ot&&ot.blur(),494593&t.$$.dirty[0]|1073741824&t.$$.dirty[1]|1&t.$$.dirty[2]&&_){const t={x:G,y:X,invalidX:g,invalidY:m,width:V,height:Z,mobileFallback:h,text:R.text};rt("updateEditorState",{selectedAnnotationProps:t})}if(1&t.$$.dirty[0]&&n(66,M="mc"===R.align),98816&t.$$.dirty[0]|24&t.$$.dirty[2]&&n(34,E=at&&_&&!h&&!(k&&M)),98816&t.$$.dirty[0]|8&t.$$.dirty[2]&&n(33,A=at&&_&&!h&&!k),3072&t.$$.dirty[0]&&n(32,T=()=>{let[t,e]=[G,X];return t-=2.5,e-=2.5,Gu(t,e)}),98816&t.$$.dirty[0]|24&t.$$.dirty[2]&&n(31,$=at&&_&&!h&&!k&&!M),3073&t.$$.dirty[0]|4&t.$$.dirty[2]&&n(30,S=()=>{let[t,e]=[G,X];return t-=2.5,e-=2.5,t+=R.dx*c,e+=R.dy,Gu(t,e)}),65&t.$$.dirty[0]){document.activeElement.classList.contains("text-edit")||(n(25,vt=H(R.text)),n(26,wt=R.text))}if(98817&t.$$.dirty[0]|8&t.$$.dirty[2]&&n(14,N=at&&_&&!R.connectorLine.enabled&&!k&&!h),3072&t.$$.dirty[0]|4&t.$$.dirty[2]&&n(29,O=t=>{const[e,n]=[G,X];return`M ${e},${n} L${e+t.dx*c},${n+t.dy}`}),24576&t.$$.dirty[0]&&yt&&N){const t=yt.getBBox();n(27,_t=Math.max(Math.ceil(t.width),1)),n(28,kt=Math.max(Math.ceil(t.height),1))}},n(72,b=t=>{const e=[];return t.width&&e.push(`width: ${function(t){return q*(t.width/100)+"px"}(t)}`),e.push(`font-size: ${t.size||14}px`),e.push(`min-height: ${t.size||14}px`),e.push(`text-align: ${function(t){return t.align?{l:I?"right":"left",c:"center",r:I?"left":"right"}[t.align.charAt(1)]:"center"}(t)}`),e}),[R,st,ht,pt,bt,xt,H,Y,it,at,G,X,ot,yt,N,h,_,m,g,o,L,z,C,et,nt,vt,wt,_t,kt,O,S,$,T,A,E,w,x,f,function(t){if(!at)return;xu(),rt("selectAnnotation",{type:"text",index:it});const e="true"===t.target.contentEditable||"true"===t.target.parentNode.contentEditable;h||e&&_||(n(46,ut=0),n(47,ft=0),n(2,ht=!0),n(48,dt=t.ctrlKey),dt&&rt("updateEditorState",{forceOffsetDrag:!0}),n(3,pt=0===R.dx&&0===R.dy))},function(t){at&&t.preventDefault()},function(t){at&&t.preventDefault()},function(){at&&(xu(),rt("selectAnnotation",{type:"text",index:it}),n(2,ht=!0),n(49,gt=!0))},function(){n(0,R.text=vt.slice&&"&nbsp;"===vt.slice(-6)&&"&nbsp;&nbsp;"!==vt.slice(-12)?`${vt.slice(0,-6)} `:vt,R)},function(){xu()},function(t){if(!at||h)return;const e="ArrowUp"===t.key||"ArrowDown"===t.key||"ArrowLeft"===t.key||"ArrowRight"===t.key;if("Escape"===t.key&&_&&st)ot.blur(),n(1,st=!1);else if("Escape"===t.key&&_)rt("selectAnnotation",null);else if(e&&_&&!st){t.preventDefault();const e="ArrowLeft"===t.key?-1:"ArrowRight"===t.key?1:0,r="ArrowUp"===t.key?-1:"ArrowDown"===t.key?1:0;if(t.ctrlKey)n(0,R.dx+=e*c,R),n(0,R.dy+=r,R);else{let[t,o]=D(R.x,R.y,R.panel);t+=e,o+=r;const[i,a]=P(t,o);n(0,R.x=i,R),n(0,R.y=a,R)}}},function(){n(0,R.width=V/q*100,R)},ut,ft,dt,gt,D,P,j,I,F,B,U,q,W,lt,mt,V,Z,K,c,k,M,i,u,p,v,y,b,a,s,l,r,function(t){Zc[t?"unshift":"push"]((()=>{C=t,n(22,C)}))},function(t){Zc[t?"unshift":"push"]((()=>{yt=t,n(13,yt)}))},function(t){Zc[t?"unshift":"push"]((()=>{ot=t,n(12,ot)}))},function(){vt=this.innerHTML,n(25,vt),n(6,H),n(0,R),n(16,_),n(2,ht),n(46,ut),n(47,ft),n(3,pt),n(48,dt),n(49,gt),n(60,mt),n(50,D),n(51,P),n(64,c),n(5,xt),n(57,q),n(4,bt),n(53,I),n(59,lt),n(8,it)},function(t){Zc[t?"unshift":"push"]((()=>{ot=t,n(12,ot)}))},function(t){Zc[t?"unshift":"push"]((()=>{z=t,n(21,z)}))},function(t){pt=t,n(3,pt)},function(t){bt=t,n(4,bt)},function(t){xt=t,n(5,xt)},function(e){Xc.call(this,t,e)},function(t){Zc[t?"unshift":"push"]((()=>{L=t,n(20,L)}))}]}class Kp extends bu{constructor(t){super(),yu(this,t,Zp,Vp,Mc,{annotation:0,dataToPx:50,pxToData:51,rtl:52,mirrorX:53,chroma:54,purifyHtml:6,theme:55,cm:56,visWidth:57,isMobileWidth:58,key:7,index:8,editMode:9,isEditable:1,editorState:59,moveX:46,moveY:47,dragging:2,noOffsetAtEventStart:3,forceOffsetDrag:48,forceAnchorDrag:49,forceAnchorDragTemp:60,activeResizer:4,resizing:5},zp,[-1,-1,-1,-1])}}function Jp(t){Tc(t,"svelte-390xv9",".create-mode .range-annotation{pointer-events:none !important}.range-annotation.svelte-390xv9.svelte-390xv9{position:absolute;top:0px;left:0px;pointer-events:none}.range-annotation.edit-mode.svelte-390xv9.svelte-390xv9{display:flex;justify-content:center;align-items:center;pointer-events:auto;z-index:1}.range-annotation.edit-mode.svelte-390xv9:hover .dot.svelte-390xv9{opacity:1 !important}.range-annotation.edit-mode.selected.svelte-390xv9.svelte-390xv9{z-index:2}.range-annotation.edit-mode.selected.svelte-390xv9 .dot.svelte-390xv9{opacity:1}.range-annotation.edit-mode.selected.range.svelte-390xv9.svelte-390xv9{z-index:2;outline:1px solid rgba(255, 0, 221, 0.95)}.range-annotation.edit-mode.selected.line.svelte-390xv9.svelte-390xv9{border-color:rgba(255, 0, 221, 0.95) !important}.range-annotation.edit-mode.range.svelte-390xv9.svelte-390xv9{background:transparent !important}.range-annotation.edit-mode.range.svelte-390xv9.svelte-390xv9{z-index:1}.range-annotation.edit-mode.range.svelte-390xv9 .dot-drag.svelte-390xv9{width:20px;height:20px;cursor:grab;display:flex;align-items:center;justify-content:center}.range-annotation.edit-mode.range.svelte-390xv9 .dot-drag .dot.svelte-390xv9{width:5px;height:5px;background:rgba(255, 0, 221, 0.95);opacity:0;transition:opacity 0.2s}.range-annotation.x.svelte-390xv9.svelte-390xv9{height:100%}.range-annotation.y.svelte-390xv9.svelte-390xv9{width:100%}.range-annotation.range.svelte-390xv9.svelte-390xv9{z-index:-1}.range-annotation.line.svelte-390xv9.svelte-390xv9{z-index:1;border-width:0;background:transparent}.range-annotation.line.x.svelte-390xv9.svelte-390xv9{height:100%;width:0px}.range-annotation.line.y.svelte-390xv9.svelte-390xv9{width:100%;height:0px}.create-mode .range-annotation{pointer-events:none}")}function Qp(t){let e,n,r,o,i,a,s=t[3]&&ed(t);return{c(){e=Oc("div"),o=Cc(),s&&s.c(),i=Rc(),jc(e,"class",n="range-annotation dw-rect range "+t[0].type+" svelte-390xv9"),jc(e,"style",r=t[10](t[0],t[5]))},m(t,n){$c(t,e,n),$c(t,o,n),s&&s.m(t,n),$c(t,i,n),a=!0},p(t,o){(!a||1&o[0]&&n!==(n="range-annotation dw-rect range "+t[0].type+" svelte-390xv9"))&&jc(e,"class",n),(!a||1057&o[0]&&r!==(r=t[10](t[0],t[5])))&&jc(e,"style",r),t[3]?s?(s.p(t,o),8&o[0]&&hu(s,1)):(s=ed(t),s.c(),hu(s,1),s.m(i.parentNode,i)):s&&(uu(),pu(s,1,1,(()=>{s=null})),fu())},i(t){a||(hu(s),a=!0)},o(t){pu(s),a=!1},d(t){t&&Sc(e),t&&Sc(o),s&&s.d(t),t&&Sc(i)}}}function td(t){let e,n,r,o,i,a,s=t[3]&&nd(t);return{c(){e=Oc("div"),s&&s.c(),jc(e,"class",n="range-annotation dw-line line "+t[0].type+" svelte-390xv9"),jc(e,"style",r=t[9](t[0],t[5])),Hc(e,"edit-mode",t[3]),Hc(e,"no-edit-mode",!t[3]),Hc(e,"selected",t[8])},m(n,r){$c(n,e,r),s&&s.m(e,null),o=!0,i||(a=Dc(e,"mousedown",Pc(t[25])),i=!0)},p(t,i){t[3]?s?(s.p(t,i),8&i[0]&&hu(s,1)):(s=nd(t),s.c(),hu(s,1),s.m(e,null)):s&&(uu(),pu(s,1,1,(()=>{s=null})),fu()),(!o||1&i[0]&&n!==(n="range-annotation dw-line line "+t[0].type+" svelte-390xv9"))&&jc(e,"class",n),(!o||545&i[0]&&r!==(r=t[9](t[0],t[5])))&&jc(e,"style",r),(!o||9&i[0])&&Hc(e,"edit-mode",t[3]),(!o||9&i[0])&&Hc(e,"no-edit-mode",!t[3]),(!o||257&i[0])&&Hc(e,"selected",t[8])},i(t){o||(hu(s),o=!0)},o(t){pu(s),o=!1},d(t){t&&Sc(e),s&&s.d(),i=!1,a()}}}function ed(t){let e,n,r,o,i,a,s,l,c,u,f;function h(e){t[29](e)}function p(e){t[30](e)}let d={type:"range",annotation:t[0],index:t[4],orientation:t[0].type};return void 0!==t[2]&&(d.activeResizer=t[2]),void 0!==t[1]&&(d.resizing=t[1]),o=new Au({props:d}),Zc.push((()=>du(o,"activeResizer",h))),Zc.push((()=>du(o,"resizing",p))),o.$on("selectAnnotation",t[31]),{c(){e=Oc("div"),n=Oc("div"),n.innerHTML='<div class="dot svelte-390xv9"></div>',r=Cc(),gu(o.$$.fragment),jc(n,"class","dot-drag svelte-390xv9"),jc(e,"style",s=t[10](t[0],t[5])),jc(e,"class",l="range-annotation edit-mode range "+t[0].type+" svelte-390xv9"),Hc(e,"edit-mode",t[3]),Hc(e,"no-edit-mode",!t[3]),Hc(e,"selected",t[8])},m(i,a){$c(i,e,a),Ac(e,n),Ac(e,r),mu(o,e,null),c=!0,u||(f=Dc(n,"mousedown",Pc(t[12])),u=!0)},p(t,n){const r={};1&n[0]&&(r.annotation=t[0]),16&n[0]&&(r.index=t[4]),1&n[0]&&(r.orientation=t[0].type),!i&&4&n[0]&&(i=!0,r.activeResizer=t[2],ru((()=>i=!1))),!a&&2&n[0]&&(a=!0,r.resizing=t[1],ru((()=>a=!1))),o.$set(r),(!c||1057&n[0]&&s!==(s=t[10](t[0],t[5])))&&jc(e,"style",s),(!c||1&n[0]&&l!==(l="range-annotation edit-mode range "+t[0].type+" svelte-390xv9"))&&jc(e,"class",l),(!c||9&n[0])&&Hc(e,"edit-mode",t[3]),(!c||9&n[0])&&Hc(e,"no-edit-mode",!t[3]),(!c||257&n[0])&&Hc(e,"selected",t[8])},i(t){c||(hu(o.$$.fragment,t),c=!0)},o(t){pu(o.$$.fragment,t),c=!1},d(t){t&&Sc(e),vu(o),u=!1,f()}}}function nd(t){let e,n,r,o;function i(e){t[26](e)}function a(e){t[27](e)}let s={annotation:t[0],index:t[4],orientation:t[0].type};return void 0!==t[2]&&(s.activeResizer=t[2]),void 0!==t[1]&&(s.resizing=t[1]),e=new Au({props:s}),Zc.push((()=>du(e,"activeResizer",i))),Zc.push((()=>du(e,"resizing",a))),e.$on("selectAnnotation",t[28]),{c(){gu(e.$$.fragment)},m(t,n){mu(e,t,n),o=!0},p(t,o){const i={};1&o[0]&&(i.annotation=t[0]),16&o[0]&&(i.index=t[4]),1&o[0]&&(i.orientation=t[0].type),!n&&4&o[0]&&(n=!0,i.activeResizer=t[2],ru((()=>n=!1))),!r&&2&o[0]&&(r=!0,i.resizing=t[1],ru((()=>r=!1))),e.$set(i)},i(t){o||(hu(e.$$.fragment,t),o=!0)},o(t){pu(e.$$.fragment,t),o=!1},d(t){vu(e,t)}}}function rd(t){let e,n,r,o,i,a;const s=[td,Qp],l=[];function c(t,e){return"line"!==t[0].display||t[7]?t[7]||t[6]?-1:1:0}return~(e=c(t))&&(n=l[e]=s[e](t)),{c(){n&&n.c(),r=Rc()},m(n,s){~e&&l[e].m(n,s),$c(n,r,s),o=!0,i||(a=Dc(window,"keydown",t[11]),i=!0)},p(t,o){let i=e;e=c(t),e===i?~e&&l[e].p(t,o):(n&&(uu(),pu(l[i],1,1,(()=>{l[i]=null})),fu()),~e?(n=l[e],n?n.p(t,o):(n=l[e]=s[e](t),n.c()),hu(n,1),n.m(r.parentNode,r)):n=null)},i(t){o||(hu(n),o=!0)},o(t){pu(n),o=!1},d(t){~e&&l[e].d(t),t&&Sc(r),i=!1,a()}}}function od(t,e,n){let r,o,i,a,s,l,c,u,f,{annotation:h}=e,{dataToPx:p}=e,{pxToData:d}=e,{editorState:g}=e,{editMode:m}=e,{index:v}=e,{moveX:y}=e,{moveY:b}=e,{resizing:x}=e,{dragging:w}=e,{activeResizer:_}=e,{forceAnchorDragTemp:k}=e,{cm:M}=e,{theme:E}=e;const A=Gc();function T({color:t,opacity:e,display:n},r){const o=function(t){const{color:e,opacity:n,display:r}=t,{color:o,opacity:i}=g.defaults[r]||{};return re(e).toString()===re(o).toString()&&i===n}(h),i=vc(r,`vis.base.annotations.${n}`,{}),a=o&&i.color&&"opacity"in i?Ju(i.color,i.opacity):Ju(t,e/100);return M(a,{noInvert:o})}return t.$$set=t=>{"annotation"in t&&n(0,h=t.annotation),"dataToPx"in t&&n(16,p=t.dataToPx),"pxToData"in t&&n(17,d=t.pxToData),"editorState"in t&&n(18,g=t.editorState),"editMode"in t&&n(3,m=t.editMode),"index"in t&&n(4,v=t.index),"moveX"in t&&n(13,y=t.moveX),"moveY"in t&&n(14,b=t.moveY),"resizing"in t&&n(1,x=t.resizing),"dragging"in t&&n(15,w=t.dragging),"activeResizer"in t&&n(2,_=t.activeResizer),"forceAnchorDragTemp"in t&&n(19,k=t.forceAnchorDragTemp),"cm"in t&&n(20,M=t.cm),"theme"in t&&n(5,E=t.theme)},t.$$.update=()=>{if(262160&t.$$.dirty[0]&&n(8,r=1===g.selectedRangeAnnotations.length&&g.selectedRangeAnnotations[0]===v),745735&t.$$.dirty[0]&&r&&x&&(y||b))if(["l","r"].includes(_)){const t=p(h.x0,0,h.panel)[0],e=p(h.x1,0,h.panel)[0];let r;"l"===_&&"line"===h.display?r="x0":"l"===_?r=t>e?"x1":"x0":"r"===_&&(r=t>e?"x0":"x1");let[o]=p(h[r],0,h.panel),i=p(h["x1"===r?"x0":"x1"],0,h.panel)[0];o-i>0!=o+y-i>0&&n(2,_="l"===_?"r":"l"),o+=y;const[a]=d(o,0);if(n(0,h[r]=a,h),k){i-=y;const[t]=d(i,0);n(0,h["x1"===r?"x0":"x1"]=t,h)}n(13,y=0)}else{const t=p(0,h.y0,h.panel)[1],e=p(0,h.y1,h.panel)[1];let r;"t"===_&&"line"===h.display?r="y0":"t"===_?r=t<e?"y0":"y1":"b"===_&&(r=t<e?"y1":"y0");const o=p(0,h[r],h.panel);let i=o[1];const a=p(0,h["y1"===r?"y0":"y1"],h.panel)[1];i-a>0!=i+b-a>0&&n(2,_="t"===_?"b":"t"),i+=b;const[s,l]=d(o[0],i);n(0,h[r]=l,h),n(14,b=0)}if(254209&t.$$.dirty[0]&&r&&w&&(y||b))if("x"===h.type){let[t,e]=p(h.x0,0,h.panel),[r,o]=p(h.x1,0,h.panel);t+=y,r+=y;const[i,a]=d(t,0),[s,l]=d(r,0);n(0,h.x0=i,h),n(0,h.x1=s,h),n(13,y=0)}else{let[t,e]=p(0,h.y0,h.panel),[r,o]=p(0,h.y1,h.panel);e+=b,o+=b;const[i,a]=d(0,e),[s,l]=d(0,o);n(0,h.y0=a,h),n(0,h.y1=l,h),n(14,b=0)}if(65537&t.$$.dirty[0]&&n(22,[o,i]=function(t,e){return["x"===t.type?e(t.x0,0,t.panel)[0]:e(0,t.y0,t.panel)[1],"x"===t.type?e(t.x1,0,t.panel)[0]:e(0,t.y1,t.panel)[1]]}(h,p),o,(n(21,i),n(0,h),n(16,p),n(8,r),n(1,x),n(13,y),n(14,b),n(2,_),n(17,d),n(19,k),n(15,w),n(18,g),n(4,v))),4194304&t.$$.dirty[0]&&n(7,a=void 0===o),2097152&t.$$.dirty[0]&&n(6,s=void 0===i),6291456&t.$$.dirty[0]&&n(23,l=Math.min(o,i)),6291456&t.$$.dirty[0]&&n(24,c=Math.max(o,i)),25165825&t.$$.dirty[0]&&n(10,u=({type:t}=h,e)=>{const n=[];return n.push(`background-color: ${T(h,e)}`),n.push(`${"x"===t?"left":"top"}: ${l}px`),n.push(`${"x"===t?"width":"height"}: ${c-l}px`),n.join("; ")}),4194305&t.$$.dirty[0]&&n(9,f=({type:t,strokeWidth:e,strokeType:n}=h,r)=>{const i=e||1,a=[];return a.push(`${"x"===t?"left":"top"}: ${o-i/2}px`),a.push(`border-color: ${T(h,r)}`),"x"===t?a.push(`border-left-width: ${i}px`):a.push(`border-top-width: ${i}px`),"dashed"===n?a.push("border-style: dashed"):"dotted"===n?a.push("border-style: dotted"):a.push("border-style: solid"),a.join("; ")}),6291904&t.$$.dirty[0]&&r){A("updateEditorState",{selectedAnnotationProps:{start:o,end:i,invalidStart:a,invalidEnd:s}})}},[h,x,_,m,v,E,s,a,r,f,u,function(t){m&&"Escape"===t.key&&r&&A("selectAnnotation",null)},function(){m&&(A("selectAnnotation",{type:"range",index:v}),n(15,w=!0))},y,b,w,p,d,g,k,M,i,o,l,c,function(e){Xc.call(this,t,e)},function(t){_=t,n(2,_),n(8,r),n(1,x),n(13,y),n(14,b),n(16,p),n(0,h),n(17,d),n(19,k),n(18,g),n(4,v),n(15,w)},function(t){x=t,n(1,x)},function(e){Xc.call(this,t,e)},function(t){_=t,n(2,_),n(8,r),n(1,x),n(13,y),n(14,b),n(16,p),n(0,h),n(17,d),n(19,k),n(18,g),n(4,v),n(15,w)},function(t){x=t,n(1,x)},function(e){Xc.call(this,t,e)}]}class id extends bu{constructor(t){super(),yu(this,t,od,rd,Mc,{annotation:0,dataToPx:16,pxToData:17,editorState:18,editMode:3,index:4,moveX:13,moveY:14,resizing:1,dragging:15,activeResizer:2,forceAnchorDragTemp:19,cm:20,theme:5},Jp,[-1,-1])}}var ad={exports:{}};!function(t,e){var n="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",i="[object Boolean]",a="[object Date]",s="[object Function]",l="[object GeneratorFunction]",c="[object Map]",u="[object Number]",f="[object Object]",h="[object Promise]",p="[object RegExp]",d="[object Set]",g="[object String]",m="[object Symbol]",v="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",_="[object Int8Array]",k="[object Int16Array]",M="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",T="[object Uint16Array]",$="[object Uint32Array]",S=/\w*$/,N=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,L={};L[o]=L["[object Array]"]=L[y]=L[b]=L[i]=L[a]=L[x]=L[w]=L[_]=L[k]=L[M]=L[c]=L[u]=L[f]=L[p]=L[d]=L[g]=L[m]=L[E]=L[A]=L[T]=L[$]=!0,L["[object Error]"]=L[s]=L[v]=!1;var z="object"==typeof Xl&&Xl&&Xl.Object===Object&&Xl,C="object"==typeof self&&self&&self.Object===Object&&self,R=z||C||Function("return this")(),D=e&&!e.nodeType&&e,P=D&&t&&!t.nodeType&&t,j=P&&P.exports===D;function I(t,e){return t.set(e[0],e[1]),t}function F(t,e){return t.add(e),t}function H(t,e,n,r){var o=-1,i=t?t.length:0;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function B(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function U(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function q(t,e){return function(n){return t(e(n))}}function W(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var Y,G=Array.prototype,X=Function.prototype,V=Object.prototype,Z=R["__core-js_shared__"],K=(Y=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",J=X.toString,Q=V.hasOwnProperty,tt=V.toString,et=RegExp("^"+J.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=j?R.Buffer:void 0,rt=R.Symbol,ot=R.Uint8Array,it=q(Object.getPrototypeOf,Object),at=Object.create,st=V.propertyIsEnumerable,lt=G.splice,ct=Object.getOwnPropertySymbols,ut=nt?nt.isBuffer:void 0,ft=q(Object.keys,Object),ht=Pt(R,"DataView"),pt=Pt(R,"Map"),dt=Pt(R,"Promise"),gt=Pt(R,"Set"),mt=Pt(R,"WeakMap"),vt=Pt(Object,"create"),yt=Bt(ht),bt=Bt(pt),xt=Bt(dt),wt=Bt(gt),_t=Bt(mt),kt=rt?rt.prototype:void 0,Mt=kt?kt.valueOf:void 0;function Et(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function At(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Tt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $t(t){this.__data__=new At(t)}function St(t,e){var n=qt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Wt(t)}(t)&&Q.call(t,"callee")&&(!st.call(t,"callee")||tt.call(t)==o)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var a in t)!e&&!Q.call(t,a)||i&&("length"==a||Ft(a,r))||n.push(a);return n}function Nt(t,e,n){var r=t[e];Q.call(t,e)&&Ut(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function Ot(t,e){for(var n=t.length;n--;)if(Ut(t[n][0],e))return n;return-1}function Lt(t,e,n,r,h,v,N){var O;if(r&&(O=v?r(t,h,v,N):r(t)),void 0!==O)return O;if(!Xt(t))return t;var z=qt(t);if(z){if(O=function(t){var e=t.length,n=t.constructor(e);e&&"string"==typeof t[0]&&Q.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!e)return function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(t,O)}else{var C=It(t),R=C==s||C==l;if(Yt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(C==f||C==o||R&&!v){if(B(t))return v?t:{};if(O=function(t){return"function"!=typeof t.constructor||Ht(t)?{}:function(t){return Xt(t)?at(t):{}}(it(t))}(R?{}:t),!e)return function(t,e){return Rt(t,jt(t),e)}(t,function(t,e){return t&&Rt(e,Vt(e),t)}(O,t))}else{if(!L[C])return v?t:{};O=function(t,e,n,r){var o=t.constructor;switch(e){case y:return Ct(t);case i:case a:return new o(+t);case b:return function(t,e){var n=e?Ct(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case x:case w:case _:case k:case M:case E:case A:case T:case $:return function(t,e){var n=e?Ct(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,r);case c:return function(t,e,n){var r=e?n(U(t),!0):U(t);return H(r,I,new t.constructor)}(t,r,n);case u:case g:return new o(t);case p:return function(t){var e=new t.constructor(t.source,S.exec(t));return e.lastIndex=t.lastIndex,e}(t);case d:return function(t,e,n){var r=e?n(W(t),!0):W(t);return H(r,F,new t.constructor)}(t,r,n);case m:return s=t,Mt?Object(Mt.call(s)):{}}var s}(t,C,Lt,e)}}N||(N=new $t);var D=N.get(t);if(D)return D;if(N.set(t,O),!z)var P=n?function(t){return function(t,e,n){var r=e(t);return qt(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Vt,jt)}(t):Vt(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(P||t,(function(o,i){P&&(o=t[i=o]),Nt(O,i,Lt(o,e,n,r,i,t,N))})),O}function zt(t){return!(!Xt(t)||(e=t,K&&K in e))&&(Gt(t)||B(t)?et:N).test(Bt(t));var e}function Ct(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function Rt(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=r?r(n[a],t[a],a,n,t):void 0;Nt(n,a,void 0===s?t[a]:s)}return n}function Dt(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Pt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return zt(n)?n:void 0}Et.prototype.clear=function(){this.__data__=vt?vt(null):{}},Et.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Et.prototype.get=function(t){var e=this.__data__;if(vt){var r=e[t];return r===n?void 0:r}return Q.call(e,t)?e[t]:void 0},Et.prototype.has=function(t){var e=this.__data__;return vt?void 0!==e[t]:Q.call(e,t)},Et.prototype.set=function(t,e){return this.__data__[t]=vt&&void 0===e?n:e,this},At.prototype.clear=function(){this.__data__=[]},At.prototype.delete=function(t){var e=this.__data__,n=Ot(e,t);return!(n<0)&&(n==e.length-1?e.pop():lt.call(e,n,1),!0)},At.prototype.get=function(t){var e=this.__data__,n=Ot(e,t);return n<0?void 0:e[n][1]},At.prototype.has=function(t){return Ot(this.__data__,t)>-1},At.prototype.set=function(t,e){var n=this.__data__,r=Ot(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Tt.prototype.clear=function(){this.__data__={hash:new Et,map:new(pt||At),string:new Et}},Tt.prototype.delete=function(t){return Dt(this,t).delete(t)},Tt.prototype.get=function(t){return Dt(this,t).get(t)},Tt.prototype.has=function(t){return Dt(this,t).has(t)},Tt.prototype.set=function(t,e){return Dt(this,t).set(t,e),this},$t.prototype.clear=function(){this.__data__=new At},$t.prototype.delete=function(t){return this.__data__.delete(t)},$t.prototype.get=function(t){return this.__data__.get(t)},$t.prototype.has=function(t){return this.__data__.has(t)},$t.prototype.set=function(t,e){var n=this.__data__;if(n instanceof At){var r=n.__data__;if(!pt||r.length<199)return r.push([t,e]),this;n=this.__data__=new Tt(r)}return n.set(t,e),this};var jt=ct?q(ct,Object):function(){return[]},It=function(t){return tt.call(t)};function Ft(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||O.test(t))&&t>-1&&t%1==0&&t<e}function Ht(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||V)}function Bt(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ut(t,e){return t===e||t!=t&&e!=e}(ht&&It(new ht(new ArrayBuffer(1)))!=b||pt&&It(new pt)!=c||dt&&It(dt.resolve())!=h||gt&&It(new gt)!=d||mt&&It(new mt)!=v)&&(It=function(t){var e=tt.call(t),n=e==f?t.constructor:void 0,r=n?Bt(n):void 0;if(r)switch(r){case yt:return b;case bt:return c;case xt:return h;case wt:return d;case _t:return v}return e});var qt=Array.isArray;function Wt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!Gt(t)}var Yt=ut||function(){return!1};function Gt(t){var e=Xt(t)?tt.call(t):"";return e==s||e==l}function Xt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Vt(t){return Wt(t)?St(t):function(t){if(!Ht(t))return ft(t);var e=[];for(var n in Object(t))Q.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return Lt(t,!0,!0)}}(ad,ad.exports);var sd=Vl(ad.exports),ld=Kf("byteLength"),cd=Cf("ArrayBuffer"),ud=Cf("Object"),fd=Mf&&ud(new DataView(new ArrayBuffer(8)));"undefined"!=typeof Map&&ud(new Map);var hd=Cf("DataView");var pd=fd?function(t){return null!=t&&Pf(t.getInt8)&&cd(t.buffer)}:hd;var dd=Zf(ld),gd=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var md,vd=kf?function(t){return Tf?Tf(t)&&!pd(t):dd(t)&&gd.test(wf.call(t))}:(md=!1,function(){return md});function yd(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,ld(t))}var bd="[object DataView]";function xd(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&wd(t,e,n,r)}function wd(t,e,n,r){t instanceof Lf&&(t=t._wrapped),e instanceof Lf&&(e=e._wrapped);var o=wf.call(t);if(o!==wf.call(e))return!1;if(fd&&"[object Object]"==o&&pd(t)){if(!pd(e))return!1;o=bd}switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return bf.valueOf.call(t)===bf.valueOf.call(e);case"[object ArrayBuffer]":case bd:return wd(yd(t),yd(e),n,r)}var i="[object Array]"===o;if(!i&&vd(t)){if(ld(t)!==ld(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;i=!0}if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(Pf(a)&&a instanceof a&&Pf(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),i){if((l=t.length)!==e.length)return!1;for(;l--;)if(!xd(t[l],e[l],n,r))return!1}else{var c,u=Hf(t);if(l=u.length,Hf(e).length!==l)return!1;for(;l--;)if(!Ff(e,c=u[l])||!xd(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0}function _d(t,e){return xd(t,e)}const{document:kd}=Ec;function Md(t){Tc(t,"svelte-1dzvlci",".annotations-inner.svelte-1dzvlci{width:100%;height:100%;pointer-events:none}.annotations-inner.editing.svelte-1dzvlci{pointer-events:auto}.annotations-inner.create-mode.svelte-1dzvlci{pointer-events:auto;cursor:crosshair}.annotations-inner.create-mode.svelte-1dzvlci{-webkit-user-select:none;user-select:none}.annotations-inner.create-mode.svelte-1dzvlci .text-annotation,.annotations-inner.create-mode.svelte-1dzvlci .text-annotation .resizer{pointer-events:none}.range-annotations.svelte-1dzvlci{position:absolute;overflow:hidden;height:100%;width:100%}.create-rect.text.svelte-1dzvlci{position:absolute;outline:1px solid rgba(255, 0, 221, 0.95);background:rgba(255, 0, 221, 0.1)}.create-rect.range.svelte-1dzvlci{position:absolute;background:rgba(0, 0, 0, 0.1)}.annotation-keys{display:flex;flex-direction:column;gap:5px;width:100%;margin-top:10px}.annotation-keys.hide{display:none}.annotation-keys .key{display:flex;align-items:baseline}.annotation-keys .num{flex:0 0 auto;display:flex;justify-content:center;align-items:center;font-size:12px;border-radius:50%;width:20px;height:20px}.annotation-keys.dir-rtl .num{margin-left:5px}.annotation-keys:not(.dir-rtl) .num{margin-right:5px}.annotation-keys .num.dw-bold{font-weight:700}.annotation-panel.svelte-1dzvlci{position:absolute;width:100%;height:100%}")}function Ed(t,e,n){const r=t.slice();return r[75]=e[n],r[77]=n,r}function Ad(t,e,n){const r=t.slice();return r[75]=e[n],r[77]=n,r}function Td(t,e,n){const r=t.slice();return r[79]=e[n],r}function $d(t){let e,n=t[11].length&&Sd(t);return{c(){n&&n.c(),e=Rc()},m(t,r){n&&n.m(t,r),$c(t,e,r)},p(t,r){t[11].length?n?n.p(t,r):(n=Sd(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&Sc(e)}}}function Sd(t){let e,n=t[11],r=[];for(let e=0;e<n.length;e+=1)r[e]=Nd(Td(t,n,e));return{c(){e=Oc("div");for(let t=0;t<r.length;t+=1)r[t].c();jc(e,"class","annotation-panels")},m(t,n){$c(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,o){if(2048&o[0]){let i;for(n=t[11],i=0;i<n.length;i+=1){const a=Td(t,n,i);r[i]?r[i].p(a,o):(r[i]=Nd(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){t&&Sc(e),Nc(r,t)}}}function Nd(t){let e;return{c(){e=Oc("div"),jc(e,"class","annotation-panel svelte-1dzvlci"),Fc(e,"width",`${t[79].width}px`),Fc(e,"height",`${t[79].height}px`),Fc(e,"left",`${t[79].x}px`),Fc(e,"top",`${t[79].y}px`)},m(t,n){$c(t,e,n)},p(t,n){2048&n[0]&&Fc(e,"width",`${t[79].width}px`),2048&n[0]&&Fc(e,"height",`${t[79].height}px`),2048&n[0]&&Fc(e,"left",`${t[79].x}px`),2048&n[0]&&Fc(e,"top",`${t[79].y}px`)},d(t){t&&Sc(e)}}}function Od(t){let e,n,r,o,i,a,s,l,c,u,f;function h(e){t[49](e)}function p(e){t[50](e)}function d(e){t[51](e)}function g(e){t[52](e)}function m(e){t[53](e)}function v(e){t[54](e)}function y(e){t[55](e)}function b(e){t[56](e)}function x(e){t[57](e)}let w={annotation:t[75],dataToPx:t[1],pxToData:t[2],theme:t[3],cm:t[4],rtl:t[9],mirrorX:t[10],visWidth:t[5],isMobileWidth:t[21],index:t[32].length-1-t[77],editMode:t[12],editorState:t[0],forceAnchorDragTemp:t[27],chroma:t[7],purifyHtml:t[8],key:t[14][t[32].length-1-t[77]]};return void 0!==t[24]&&(w.noOffsetAtEventStart=t[24]),void 0!==t[29]&&(w.isEditable=t[29]),void 0!==t[17]&&(w.dragging=t[17]),void 0!==t[26]&&(w.forceAnchorDrag=t[26]),void 0!==t[25]&&(w.forceOffsetDrag=t[25]),void 0!==t[15]&&(w.moveX=t[15]),void 0!==t[16]&&(w.moveY=t[16]),void 0!==t[18]&&(w.resizing=t[18]),void 0!==t[28]&&(w.activeResizer=t[28]),e=new Kp({props:w}),Zc.push((()=>du(e,"noOffsetAtEventStart",h))),Zc.push((()=>du(e,"isEditable",p))),Zc.push((()=>du(e,"dragging",d))),Zc.push((()=>du(e,"forceAnchorDrag",g))),Zc.push((()=>du(e,"forceOffsetDrag",m))),Zc.push((()=>du(e,"moveX",v))),Zc.push((()=>du(e,"moveY",y))),Zc.push((()=>du(e,"resizing",b))),Zc.push((()=>du(e,"activeResizer",x))),e.$on("selectAnnotation",t[33]),e.$on("updateEditorState",t[34]),{c(){gu(e.$$.fragment)},m(t,n){mu(e,t,n),f=!0},p(t,f){const h={};2&f[1]&&(h.annotation=t[75]),2&f[0]&&(h.dataToPx=t[1]),4&f[0]&&(h.pxToData=t[2]),8&f[0]&&(h.theme=t[3]),16&f[0]&&(h.cm=t[4]),512&f[0]&&(h.rtl=t[9]),1024&f[0]&&(h.mirrorX=t[10]),32&f[0]&&(h.visWidth=t[5]),2097152&f[0]&&(h.isMobileWidth=t[21]),2&f[1]&&(h.index=t[32].length-1-t[77]),4096&f[0]&&(h.editMode=t[12]),1&f[0]&&(h.editorState=t[0]),134217728&f[0]&&(h.forceAnchorDragTemp=t[27]),128&f[0]&&(h.chroma=t[7]),256&f[0]&&(h.purifyHtml=t[8]),16384&f[0]|2&f[1]&&(h.key=t[14][t[32].length-1-t[77]]),!n&&16777216&f[0]&&(n=!0,h.noOffsetAtEventStart=t[24],ru((()=>n=!1))),!r&&536870912&f[0]&&(r=!0,h.isEditable=t[29],ru((()=>r=!1))),!o&&131072&f[0]&&(o=!0,h.dragging=t[17],ru((()=>o=!1))),!i&&67108864&f[0]&&(i=!0,h.forceAnchorDrag=t[26],ru((()=>i=!1))),!a&&33554432&f[0]&&(a=!0,h.forceOffsetDrag=t[25],ru((()=>a=!1))),!s&&32768&f[0]&&(s=!0,h.moveX=t[15],ru((()=>s=!1))),!l&&65536&f[0]&&(l=!0,h.moveY=t[16],ru((()=>l=!1))),!c&&262144&f[0]&&(c=!0,h.resizing=t[18],ru((()=>c=!1))),!u&&268435456&f[0]&&(u=!0,h.activeResizer=t[28],ru((()=>u=!1))),e.$set(h)},i(t){f||(hu(e.$$.fragment,t),f=!0)},o(t){pu(e.$$.fragment,t),f=!1},d(t){vu(e,t)}}}function Ld(t){let e,n,r,o,i,a,s;function l(e){t[59](e)}function c(e){t[60](e)}function u(e){t[61](e)}function f(e){t[62](e)}function h(e){t[63](e)}let p={cm:t[4],theme:t[3],annotation:t[75],dataToPx:t[1],pxToData:t[2],editMode:t[12],editorState:t[0],forceAnchorDragTemp:t[27],index:t[31].length-1-t[77]};return void 0!==t[17]&&(p.dragging=t[17]),void 0!==t[15]&&(p.moveX=t[15]),void 0!==t[16]&&(p.moveY=t[16]),void 0!==t[18]&&(p.resizing=t[18]),void 0!==t[28]&&(p.activeResizer=t[28]),e=new id({props:p}),Zc.push((()=>du(e,"dragging",l))),Zc.push((()=>du(e,"moveX",c))),Zc.push((()=>du(e,"moveY",u))),Zc.push((()=>du(e,"resizing",f))),Zc.push((()=>du(e,"activeResizer",h))),e.$on("selectAnnotation",t[33]),e.$on("updateEditorState",t[34]),{c(){gu(e.$$.fragment)},m(t,n){mu(e,t,n),s=!0},p(t,s){const l={};16&s[0]&&(l.cm=t[4]),8&s[0]&&(l.theme=t[3]),1&s[1]&&(l.annotation=t[75]),2&s[0]&&(l.dataToPx=t[1]),4&s[0]&&(l.pxToData=t[2]),4096&s[0]&&(l.editMode=t[12]),1&s[0]&&(l.editorState=t[0]),134217728&s[0]&&(l.forceAnchorDragTemp=t[27]),1&s[1]&&(l.index=t[31].length-1-t[77]),!n&&131072&s[0]&&(n=!0,l.dragging=t[17],ru((()=>n=!1))),!r&&32768&s[0]&&(r=!0,l.moveX=t[15],ru((()=>r=!1))),!o&&65536&s[0]&&(o=!0,l.moveY=t[16],ru((()=>o=!1))),!i&&262144&s[0]&&(i=!0,l.resizing=t[18],ru((()=>i=!1))),!a&&268435456&s[0]&&(a=!0,l.activeResizer=t[28],ru((()=>a=!1))),e.$set(l)},i(t){s||(hu(e.$$.fragment,t),s=!0)},o(t){pu(e.$$.fragment,t),s=!1},d(t){vu(e,t)}}}function zd(t){let e,n,r;return{c(){e=Oc("div"),jc(e,"class",n="create-rect "+t[0].createMode+" svelte-1dzvlci"),jc(e,"style",r=t[30]())},m(t,n){$c(t,e,n)},p(t,o){1&o[0]&&n!==(n="create-rect "+t[0].createMode+" svelte-1dzvlci")&&jc(e,"class",n),1073741824&o[0]&&r!==(r=t[30]())&&jc(e,"style",r)},d(t){t&&Sc(e)}}}function Cd(t){let e,n,r,o,i,a,s,l,c,u;nu(t[48]);let f=t[12]&&$d(t),h=t[32],p=[];for(let e=0;e<h.length;e+=1)p[e]=Od(Ad(t,h,e));const d=t=>pu(p[t],1,1,(()=>{p[t]=null}));let g=t[31],m=[];for(let e=0;e<g.length;e+=1)m[e]=Ld(Ed(t,g,e));const v=t=>pu(m[t],1,1,(()=>{m[t]=null}));let y=t[12]&&t[19]&&zd(t);return{c(){e=Cc(),n=Oc("div"),f&&f.c(),r=Cc(),o=Oc("div");for(let t=0;t<p.length;t+=1)p[t].c();i=Cc(),a=Oc("div");for(let t=0;t<m.length;t+=1)m[t].c();s=Cc(),y&&y.c(),jc(o,"class","text-annotations"),jc(o,"aria-label",t[6]),jc(o,"role","list"),jc(a,"class","range-annotations svelte-1dzvlci"),jc(n,"class","annotations-inner svelte-1dzvlci"),Hc(n,"editing",t[20]),Hc(n,"create-mode",t[0].createMode),Hc(n,"creating",t[19])},m(h,d){$c(h,e,d),$c(h,n,d),f&&f.m(n,null),Ac(n,r),Ac(n,o);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(o,null);t[58](o),Ac(n,i),Ac(n,a);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(a,null);var g;Ac(n,s),y&&y.m(n,null),t[64](n),l=!0,c||(u=[Dc(window,"keydown",t[35]),Dc(window,"mousedown",t[36]),Dc(window,"mousemove",t[37]),Dc(window,"mouseup",t[38]),Dc(window,"resize",t[48]),Dc(kd.body,"mouseleave",t[39]),Dc(n,"mousedown",(g=t[40],function(t){return t.preventDefault(),g.call(this,t)}))],c=!0)},p(t,e){if(t[12]?f?f.p(t,e):(f=$d(t),f.c(),f.m(n,r)):f&&(f.d(1),f=null),1059575743&e[0]|14&e[1]){let n;for(h=t[32],n=0;n<h.length;n+=1){const r=Ad(t,h,n);p[n]?(p[n].p(r,e),hu(p[n],1)):(p[n]=Od(r),p[n].c(),hu(p[n],1),p[n].m(o,null))}for(uu(),n=h.length;n<p.length;n+=1)d(n);fu()}if((!l||64&e[0])&&jc(o,"aria-label",t[6]),403148831&e[0]|13&e[1]){let n;for(g=t[31],n=0;n<g.length;n+=1){const r=Ed(t,g,n);m[n]?(m[n].p(r,e),hu(m[n],1)):(m[n]=Ld(r),m[n].c(),hu(m[n],1),m[n].m(a,null))}for(uu(),n=g.length;n<m.length;n+=1)v(n);fu()}t[12]&&t[19]?y?y.p(t,e):(y=zd(t),y.c(),y.m(n,null)):y&&(y.d(1),y=null),(!l||1048576&e[0])&&Hc(n,"editing",t[20]),(!l||1&e[0])&&Hc(n,"create-mode",t[0].createMode),(!l||524288&e[0])&&Hc(n,"creating",t[19])},i(t){if(!l){for(let t=0;t<h.length;t+=1)hu(p[t]);for(let t=0;t<g.length;t+=1)hu(m[t]);l=!0}},o(t){p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)pu(p[t]);m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)pu(m[t]);l=!1},d(r){r&&Sc(e),r&&Sc(n),f&&f.d(),Nc(p,r),t[58](null),Nc(m,r),y&&y.d(),t[64](null),c=!1,_c(u)}}}function Rd(t,e,n){let r,o,i,a,s,l,{textAnnotations:c=[]}=e,{rangeAnnotations:u=[]}=e,{dataToPx:f}=e,{pxToData:h}=e,{theme:p}=e,{cm:d=(t=>t)}=e,{visWidth:g}=e,{annotationKeysSel:m=null}=e,{ariaLabel:v=""}=e,{chroma:y}=e,{purifyHtml:b}=e,{rtl:x=!1}=e,{mirrorX:w=!1}=e,{panels:_=[]}=e;function k({textAnnotations:t,isMobileWidth:e,dataToPx:n}){let r=0;return t.map((t=>{const o=e&&t.mobileFallback&&!Zu(t)&&!Ku(t)&&function(t,e){const[n,r]=e(t.x,t.y,t.panel);return void 0!==n&&void 0!==r}(t,n);o&&r++;return{render:o,num:o?r:null}}))}let M,E,A=[],{editMode:T=!1}=e,{editorState:$={defaults:{},selectedTextAnnotations:[],selectedRangeAnnotations:[],createMode:!1,hideConnectorLine:!1,forceOffsetDrag:!1,width:null,height:null,dataToPx:null,pxToData:null,selectedAnnotationProps:{x:null,y:null,invalidX:!1,invalidY:!1,width:null,height:null,mobileFallback:!1,text:null,start:null,end:null,invalidStart:!1,invalidEnd:!1}}}=e;Yc((()=>{$&&E&&(n(0,$.width=E.offsetWidth,$),n(0,$.height=E.offsetHeight,$))}));let S,N,O,L,z,C=0,R=0,D=!1,P=!1,j=!1,I=0,F=0,H=!1,B=!1;function U(){n(24,S=!1),n(25,N=!1),n(26,O=!1),n(27,L=!1),n(0,$.forceOffsetDrag=!1,$),n(17,D=!1),P=!1,n(18,j=!1)}function q(){n(15,C=0),n(16,R=0),n(45,I=0),n(46,F=0),n(19,H=!1),n(0,$.createMode=!1,$)}const W=Gc();let Y=!1;const G=document.querySelector(".dw-chart-body");return t.$$set=t=>{"textAnnotations"in t&&n(41,c=t.textAnnotations),"rangeAnnotations"in t&&n(42,u=t.rangeAnnotations),"dataToPx"in t&&n(1,f=t.dataToPx),"pxToData"in t&&n(2,h=t.pxToData),"theme"in t&&n(3,p=t.theme),"cm"in t&&n(4,d=t.cm),"visWidth"in t&&n(5,g=t.visWidth),"annotationKeysSel"in t&&n(43,m=t.annotationKeysSel),"ariaLabel"in t&&n(6,v=t.ariaLabel),"chroma"in t&&n(7,y=t.chroma),"purifyHtml"in t&&n(8,b=t.purifyHtml),"rtl"in t&&n(9,x=t.rtl),"mirrorX"in t&&n(10,w=t.mirrorX),"panels"in t&&n(11,_=t.panels),"editMode"in t&&n(12,T=t.editMode),"editorState"in t&&n(0,$=t.editorState)},t.$$.update=()=>{if(1024&t.$$.dirty[1]&&n(32,r=[...c].reverse()),2048&t.$$.dirty[1]&&n(31,o=[...u].reverse()),8192&t.$$.dirty[0]&&n(21,i=l<=450),136&t.$$.dirty[0]&&n(47,a=ef(p,y).fallbackBaseColor),2114050&t.$$.dirty[0]|70656&t.$$.dirty[1]&&m&&(n(14,A=k({textAnnotations:c,isMobileWidth:i,dataToPx:f})),m.classed("hide",!0).html(""),m.classed("dir-rtl",x),i)){let t=!1;c.forEach(((e,n)=>{const r=A[n];r.render&&(t=!0,m.append("div.key").html(function(t,e,n){return`<div  style="border: 1px solid ${t}" class="num dw-circle dw-bold"><span class="export-text">${e.num}</span></div><span class="text export-text">${b(n.text)}</span>`}(a,r,e)))})),m.classed("hide",!t)}3&t.$$.dirty[0]&&$&&n(0,$.dataToPx=f,$),5&t.$$.dirty[0]&&$&&n(0,$.pxToData=h,$),98305&t.$$.dirty[0]|49152&t.$$.dirty[1]&&n(30,s=()=>{const t=[];if("text"===$.createMode){if(Math.abs(C)<1)return;return t.push(`top: ${R>0?F:F+R}px`),t.push(`height: ${R>0?R:-R}px`),t.push(`left: ${C>0?I:I+C}px`),t.push(`width: ${C>0?C:-C}px`),t.join("; ")}if("range"===$.createMode){if(Math.abs(C)<1&&Math.abs(R)<1)return;Math.abs(R)>Math.abs(C)?(t.push(`top: ${R<0?F+R:F}px`),t.push("left: 0px"),t.push("width: 100%"),t.push(`height: ${Math.abs(R)}px`)):(t.push("top: 0px"),t.push(`left: ${C<0?I+C:I}px`),t.push("height: 100%"),t.push(`width: ${Math.abs(C)}px`))}return t.join("; ")}),4097&t.$$.dirty[0]|3072&t.$$.dirty[1]&&T&&W("update",{rangeAnnotations:sd(u),textAnnotations:sd(c),editorState:sd($)}),1966080&t.$$.dirty[0]&&(n(20,Y=D||j||H),G&&(Y?G.classList.add("editing-annotations"):G.classList.remove("editing-annotations")))},[$,f,h,p,d,g,v,y,b,x,w,_,T,l,A,C,R,D,j,H,Y,i,M,E,S,N,O,L,z,B,s,o,r,function(t){if(null===t.detail)return n(0,$.selectedTextAnnotations=[],$),n(0,$.selectedRangeAnnotations=[],$),void n(29,B=!1);if("text"===t.detail.type){const e=$.selectedTextAnnotations,r=e.length>1;(e[0]!==t.detail.index||r)&&(n(29,B=!1),n(0,$.selectedTextAnnotations=[t.detail.index],$),n(0,$.selectedRangeAnnotations=[],$))}else n(0,$.selectedRangeAnnotations=[t.detail.index],$),n(0,$.selectedTextAnnotations=[],$)},function(t){const[e,r]=Object.entries(t.detail)[0];n(0,$[e]=r,$)},function(t){T&&"Escape"===t.key&&H&&q()},function(){T&&(n(0,$.selectedTextAnnotations=[],$),n(0,$.selectedRangeAnnotations=[],$))},function(t){T&&((D||H||j&&["l","r"].includes(z))&&(n(15,C+=t.movementX),t.movementX&&(n(29,B=!1),P=!0)),(D||H||j&&["t","b"].includes(z))&&(n(16,R+=t.movementY),t.movementY&&(n(29,B=!1),P=!0)),n(27,L=!1),t.ctrlKey&&!S&&n(27,L=!0))},function(t){T&&(P||n(29,B=t.target.classList.contains("text-edit")||t.target.parentNode.classList&&t.target.parentNode.classList.contains("text-edit")),U(),H&&(!function(){if("text"===$.createMode){const[t,e]=h(I,F),r=function(t,e){const n=t*(w?-1:1)<0,r=e<0;if(n&&r)return"br";if(n&&!r)return"tr";if(!n&&r)return"bl";return"tl"}(C,R),o=Math.abs(C/g*100),a={...sd($.defaults.text),x:t,y:e,align:r,width:o};Math.abs(C)<10&&Math.abs(R)<10&&(a.width=25,a.align="mc",a.dy=F<100?50:-50,a.connectorLine.enabled=!0),i&&(a.mobileFallback=!1),c.unshift(a),n(41,c)}else if("range"===$.createMode){const[t,e]=h(I,F),[r,o]=h(I+C,F+R),i=Math.abs(C)>Math.abs(R)?"x":"y";let a="range";("x"===i&&Math.abs(C)<10||"y"===i&&Math.abs(R)<10)&&(a="line");const s={...sd($.defaults[a]),type:i,display:a,x0:t,x1:r,y0:e,y1:o};u.unshift(s),n(42,u)}}(),function(){if("text"===$.createMode){const t=0;if(n(0,$.selectedTextAnnotations=[t],$),n(0,$.selectedRangeAnnotations=[],$),k({textAnnotations:c,isMobileWidth:i,dataToPx:f})[t].render)return;n(29,B=!0),setTimeout((()=>{const t=M.querySelectorAll(".text-annotation"),e=t[t.length-1].querySelector(".text-edit");e.focus(),function(t){const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e)}(e)}))}if("range"===$.createMode){const t=0;n(0,$.selectedTextAnnotations=[],$),n(0,$.selectedRangeAnnotations=[t],$)}}(),q()))},function(){T&&(D||j)&&U()},function(t){T&&$.createMode&&(n(19,H=!0),n(45,I=t.offsetX),n(46,F=t.offsetY))},c,u,m,function({textAnnotations:t,rangeAnnotations:e,editorState:r}){void 0===t||_d(c,t)||n(41,c=t),void 0===e||_d(u,e)||n(42,u=e),void 0===r||_d($,r)||n(0,$=r)},I,F,a,function(){n(13,l=window.innerWidth)},function(t){S=t,n(24,S)},function(t){B=t,n(29,B)},function(t){D=t,n(17,D)},function(t){O=t,n(26,O)},function(t){N=t,n(25,N)},function(t){C=t,n(15,C)},function(t){R=t,n(16,R)},function(t){j=t,n(18,j)},function(t){z=t,n(28,z)},function(t){Zc[t?"unshift":"push"]((()=>{M=t,n(22,M)}))},function(t){D=t,n(17,D)},function(t){C=t,n(15,C)},function(t){R=t,n(16,R)},function(t){j=t,n(18,j)},function(t){z=t,n(28,z)},function(t){Zc[t?"unshift":"push"]((()=>{E=t,n(23,E)}))}]}class Dd extends bu{constructor(t){super(),yu(this,t,Rd,Cd,Mc,{textAnnotations:41,rangeAnnotations:42,dataToPx:1,pxToData:2,theme:3,cm:4,visWidth:5,annotationKeysSel:43,ariaLabel:6,chroma:7,purifyHtml:8,rtl:9,mirrorX:10,panels:11,editMode:12,editorState:0,setAnnotationState:44},Md,[-1,-1,-1])}get setAnnotationState(){return this.$$.ctx[44]}}function Pd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var jd,Id,Fd,Hd,Bd,Ud,qd,Wd,Yd,Gd,Xd,Vd,Zd,Kd,Jd,Qd,tg,eg,ng={exports:{}};function rg(t,e,n){if(n)return e?e(t()):t();try{var r=Promise.resolve(t());return e?r.then(e):r}catch(t){return Promise.reject(t)}}function og(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}!function(t,e){!function(t){function e(){}function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e,r,o){return t[1]&&o?n(r.ctx.slice(),t[1](o(e))):r.ctx}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function m(){return g("")}function v(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function w(t,e,n){t.classList[n?"add":"remove"](e)}let _;function k(t){_=t}function M(){const t=function(){if(!_)throw new Error("Function called outside component initialization");return _}();return function(e,n){let{cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t.$$.callbacks[e];if(o){const i=function(t,e){let{bubbles:n=!1,cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}(e,n,{cancelable:r});return o.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}function E(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const A=[],T=[];let $=[];const S=[],N=Promise.resolve();let O=!1;function L(){O||(O=!0,N.then(P))}function z(){return L(),N}function C(t){$.push(t)}const R=new Set;let D=0;function P(){if(0!==D)return;const t=_;do{try{for(;D<A.length;){const t=A[D];D++,k(t),j(t.$$)}}catch(t){throw A.length=0,D=0,t}for(k(null),A.length=0,D=0;T.length;)T.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];R.has(e)||(R.add(e),e())}$.length=0}while(A.length);for(;S.length;)S.pop()();O=!1,R.clear(),k(t)}function j(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const I=new Set;let F;function H(){F={r:0,c:[],p:F}}function B(){F.r||i(F.c),F=F.p}function U(t,e){t&&t.i&&(I.delete(t),t.i(e))}function q(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),F.c.push((()=>{I.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function W(t){t&&t.c()}function Y(t,e,n,o){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),o||C((()=>{const e=t.$$.on_mount.map(r).filter(a);t.$$.on_destroy?t.$$.on_destroy.push(...e):i(e),t.$$.on_mount=[]})),l.forEach(C)}function G(t,e){const n=t.$$;null!==n.fragment&&(function(t){const e=[],n=[];$.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),$=e}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,n,r,a,s,l,c){let u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const h=_;k(t);const p=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};c&&c(p.root);let d=!1;if(p.ctx=r?r(t,n.props||{},(function(e,n){const r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return p.ctx&&s(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),d&&function(t,e){-1===t.$$.dirty[0]&&(A.push(t),L(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],p.update(),d=!0,i(p.before_update),p.fragment=!!a&&a(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();n.intro&&U(t.$$.fragment),Y(t,n.target,n.anchor,n.customElement),P()}k(h)}class V{$destroy(){G(this,1),this.$destroy=e}$on(t,n){if(!a(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Z(t){let e,n,r=t[6](t[2])+"",o=t[3]&&K(t);return{c(){e=p("div"),n=p("span"),o&&o.c(),y(e,"class","legend-title label"),y(e,"aria-hidden","true")},m(t,i){u(t,e,i),c(e,n),n.innerHTML=r,o&&o.m(e,null)},p(t,i){68&i&&r!==(r=t[6](t[2])+"")&&(n.innerHTML=r),t[3]?o?o.p(t,i):(o=K(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&f(e),o&&o.d()}}}function K(t){let e,n,r=t[6](t[2])+"";return{c(){e=p("div"),n=p("span"),x(n,"color",t[3].color),x(n,"-webkit-text-stroke",t[3].textStroke),y(e,"class","legend-title label buffer"),y(e,"aria-hidden","true")},m(t,o){u(t,e,o),c(e,n),n.innerHTML=r},p(t,e){68&e&&r!==(r=t[6](t[2])+"")&&(n.innerHTML=r),8&e&&x(n,"color",t[3].color),8&e&&x(n,"-webkit-text-stroke",t[3].textStroke)},d(t){t&&f(e)}}}function J(t){let e,n,r,o=t[2]&&Z(t);const i=t[8].default,a=function(t,e,n,r){if(t){const r=l(t,e,n,null);return t[0](r)}}(i,t,t[7]);return{c(){e=p("div"),o&&o.c(),n=m(),a&&a.c(),y(e,"class",t[0]),y(e,"role","graphics-legend"),y(e,"aria-label",t[1]),x(e,"width",t[4]),x(e,"height",t[5])},m(t,i){u(t,e,i),o&&o.m(e,null),c(e,n),a&&a.m(e,null),r=!0},p(t,s){let[c]=s;t[2]?o?o.p(t,c):(o=Z(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),a&&a.p&&(!r||128&c)&&function(t,e,n,r,o,i){if(o){const i=l(e,n,r,null);t.p(i,o)}}(a,i,t,t[7],r?function(t,e,n,r){return t[2],e.dirty}(i,t[7]):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[7])),(!r||1&c)&&y(e,"class",t[0]),(!r||2&c)&&y(e,"aria-label",t[1]),16&c&&x(e,"width",t[4]),32&c&&x(e,"height",t[5])},i(t){r||(U(a,t),r=!0)},o(t){q(a,t),r=!1},d(t){t&&f(e),o&&o.d(),a&&a.d(t)}}}function Q(t,e,n){let{$$slots:r={},$$scope:o}=e,{className:i=""}=e,{ariaLabel:a=""}=e,{title:s=""}=e,{buffer:l}=e,{width:c="auto"}=e,{height:u="auto"}=e,{purifyHtml:f}=e;return t.$$set=t=>{"className"in t&&n(0,i=t.className),"ariaLabel"in t&&n(1,a=t.ariaLabel),"title"in t&&n(2,s=t.title),"buffer"in t&&n(3,l=t.buffer),"width"in t&&n(4,c=t.width),"height"in t&&n(5,u=t.height),"purifyHtml"in t&&n(6,f=t.purifyHtml),"$$scope"in t&&n(7,o=t.$$scope)},[i,a,s,l,c,u,f,o,r]}class tt extends V{constructor(t){super(),X(this,t,Q,J,s,{className:0,ariaLabel:1,title:2,buffer:3,width:4,height:5,purifyHtml:6})}}function et(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return t;const r=Array.isArray(e)?e:e.split(".");let o=t;for(let t=0;t<r.length&&null!=o;t++)o=o[r[t]];return null==o?n:o}var nt,rt={exports:{}};function ot(){return nt||(nt=1,function(t,e){t.exports=function(){const{entries:t,setPrototypeOf:e,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:o}=Object;let{freeze:i,seal:a,create:s}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;i||(i=function(t){return t}),a||(a=function(t){return t}),l||(l=function(t,e,n){return t.apply(e,n)}),c||(c=function(t,e){return new t(...e)});const u=w(Array.prototype.forEach),f=w(Array.prototype.pop),h=w(Array.prototype.push),p=w(String.prototype.toLowerCase),d=w(String.prototype.toString),g=w(String.prototype.match),m=w(String.prototype.replace),v=w(String.prototype.indexOf),y=w(String.prototype.trim),b=w(RegExp.prototype.test),x=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return c(t,n)}}(TypeError);function w(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return l(t,e,r)}}function _(t,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;e&&e(t,null);let i=r.length;for(;i--;){let e=r[i];if("string"==typeof e){const t=o(e);t!==e&&(n(r)||(r[i]=t),e=t)}t[e]=!0}return t}function k(e){const n=s(null);for(const[r,i]of t(e))void 0!==o(e,r)&&(n[r]=i);return n}function M(t,e){for(;null!==t;){const n=o(t,e);if(n){if(n.get)return w(n.get);if("function"==typeof n.value)return w(n.value)}t=r(t)}return function(t){return console.warn("fallback value for",t),null}}const E=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),A=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),T=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$=i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),S=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),N=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),O=i(["#text"]),L=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),z=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),C=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),R=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),D=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),P=a(/<%[\w\W]*|[\w\W]*%>/gm),j=a(/\${[\w\W]*}/gm),I=a(/^data-[\-\w.\u00B7-\uFFFF]/),F=a(/^aria-[\-\w]+$/),H=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),B=a(/^(?:\w+script|data):/i),U=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q=a(/^html$/i);var W=Object.freeze({__proto__:null,MUSTACHE_EXPR:D,ERB_EXPR:P,TMPLIT_EXPR:j,DATA_ATTR:I,ARIA_ATTR:F,IS_ALLOWED_URI:H,IS_SCRIPT_OR_DATA:B,ATTR_WHITESPACE:U,DOCTYPE_NAME:q}),Y=function e(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const r=t=>e(t);if(r.version="3.0.6",r.removed=[],!n||!n.document||9!==n.document.nodeType)return r.isSupported=!1,r;let{document:o}=n;const a=o,l=a.currentScript,{DocumentFragment:c,HTMLTemplateElement:w,Node:D,Element:P,NodeFilter:j,NamedNodeMap:I=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:F,DOMParser:B,trustedTypes:U}=n,Y=P.prototype,G=M(Y,"cloneNode"),X=M(Y,"nextSibling"),V=M(Y,"childNodes"),Z=M(Y,"parentNode");if("function"==typeof w){const t=o.createElement("template");t.content&&t.content.ownerDocument&&(o=t.content.ownerDocument)}let K,J="";const{implementation:Q,createNodeIterator:tt,createDocumentFragment:et,getElementsByTagName:nt}=o,{importNode:rt}=a;let ot={};r.isSupported="function"==typeof t&&"function"==typeof Z&&Q&&void 0!==Q.createHTMLDocument;const{MUSTACHE_EXPR:it,ERB_EXPR:at,TMPLIT_EXPR:st,DATA_ATTR:lt,ARIA_ATTR:ct,IS_SCRIPT_OR_DATA:ut,ATTR_WHITESPACE:ft}=W;let{IS_ALLOWED_URI:ht}=W,pt=null;const dt=_({},[...E,...A,...T,...S,...O]);let gt=null;const mt=_({},[...L,...z,...C,...R]);let vt=Object.seal(s(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yt=null,bt=null,xt=!0,wt=!0,_t=!1,kt=!0,Mt=!1,Et=!1,At=!1,Tt=!1,$t=!1,St=!1,Nt=!1,Ot=!0,Lt=!1,zt=!0,Ct=!1,Rt={},Dt=null;const Pt=_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let jt=null;const It=_({},["audio","video","img","source","image","track"]);let Ft=null;const Ht=_({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Bt="http://www.w3.org/1998/Math/MathML",Ut="http://www.w3.org/2000/svg",qt="http://www.w3.org/1999/xhtml";let Wt=qt,Yt=!1,Gt=null;const Xt=_({},[Bt,Ut,qt],d);let Vt=null;const Zt=["application/xhtml+xml","text/html"];let Kt=null,Jt=null;const Qt=o.createElement("form"),te=function(t){return t instanceof RegExp||t instanceof Function},ee=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Jt||Jt!==t){if(t&&"object"==typeof t||(t={}),t=k(t),Vt=Vt=-1===Zt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,Kt="application/xhtml+xml"===Vt?d:p,pt="ALLOWED_TAGS"in t?_({},t.ALLOWED_TAGS,Kt):dt,gt="ALLOWED_ATTR"in t?_({},t.ALLOWED_ATTR,Kt):mt,Gt="ALLOWED_NAMESPACES"in t?_({},t.ALLOWED_NAMESPACES,d):Xt,Ft="ADD_URI_SAFE_ATTR"in t?_(k(Ht),t.ADD_URI_SAFE_ATTR,Kt):Ht,jt="ADD_DATA_URI_TAGS"in t?_(k(It),t.ADD_DATA_URI_TAGS,Kt):It,Dt="FORBID_CONTENTS"in t?_({},t.FORBID_CONTENTS,Kt):Pt,yt="FORBID_TAGS"in t?_({},t.FORBID_TAGS,Kt):{},bt="FORBID_ATTR"in t?_({},t.FORBID_ATTR,Kt):{},Rt="USE_PROFILES"in t&&t.USE_PROFILES,xt=!1!==t.ALLOW_ARIA_ATTR,wt=!1!==t.ALLOW_DATA_ATTR,_t=t.ALLOW_UNKNOWN_PROTOCOLS||!1,kt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Mt=t.SAFE_FOR_TEMPLATES||!1,Et=t.WHOLE_DOCUMENT||!1,$t=t.RETURN_DOM||!1,St=t.RETURN_DOM_FRAGMENT||!1,Nt=t.RETURN_TRUSTED_TYPE||!1,Tt=t.FORCE_BODY||!1,Ot=!1!==t.SANITIZE_DOM,Lt=t.SANITIZE_NAMED_PROPS||!1,zt=!1!==t.KEEP_CONTENT,Ct=t.IN_PLACE||!1,ht=t.ALLOWED_URI_REGEXP||H,Wt=t.NAMESPACE||qt,vt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&te(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(vt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&te(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(vt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(vt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mt&&(wt=!1),St&&($t=!0),Rt&&(pt=_({},[...O]),gt=[],!0===Rt.html&&(_(pt,E),_(gt,L)),!0===Rt.svg&&(_(pt,A),_(gt,z),_(gt,R)),!0===Rt.svgFilters&&(_(pt,T),_(gt,z),_(gt,R)),!0===Rt.mathMl&&(_(pt,S),_(gt,C),_(gt,R))),t.ADD_TAGS&&(pt===dt&&(pt=k(pt)),_(pt,t.ADD_TAGS,Kt)),t.ADD_ATTR&&(gt===mt&&(gt=k(gt)),_(gt,t.ADD_ATTR,Kt)),t.ADD_URI_SAFE_ATTR&&_(Ft,t.ADD_URI_SAFE_ATTR,Kt),t.FORBID_CONTENTS&&(Dt===Pt&&(Dt=k(Dt)),_(Dt,t.FORBID_CONTENTS,Kt)),zt&&(pt["#text"]=!0),Et&&_(pt,["html","head","body"]),pt.table&&(_(pt,["tbody"]),delete yt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw x('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');K=t.TRUSTED_TYPES_POLICY,J=K.createHTML("")}else void 0===K&&(K=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(U,l)),null!==K&&"string"==typeof J&&(J=K.createHTML(""));i&&i(t),Jt=t}},ne=_({},["mi","mo","mn","ms","mtext"]),re=_({},["foreignobject","desc","title","annotation-xml"]),oe=_({},["title","style","font","a","script"]),ie=_({},A);_(ie,T),_(ie,$);const ae=_({},S);_(ae,N);const se=function(t){h(r.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},le=function(t,e){try{h(r.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){h(r.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!gt[t])if($t||St)try{se(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ce=function(t){let e=null,n=null;if(Tt)t="<remove></remove>"+t;else{const e=g(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===Vt&&Wt===qt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const r=K?K.createHTML(t):t;if(Wt===qt)try{e=(new B).parseFromString(r,Vt)}catch(t){}if(!e||!e.documentElement){e=Q.createDocument(Wt,"template",null);try{e.documentElement.innerHTML=Yt?J:r}catch(t){}}const i=e.body||e.documentElement;return t&&n&&i.insertBefore(o.createTextNode(n),i.childNodes[0]||null),Wt===qt?nt.call(e,Et?"html":"body")[0]:Et?e.documentElement:i},ue=function(t){return tt.call(t.ownerDocument||t,t,j.SHOW_ELEMENT|j.SHOW_COMMENT|j.SHOW_TEXT,null)},fe=function(t){return"function"==typeof D&&t instanceof D},he=function(t,e,n){ot[t]&&u(ot[t],(t=>{t.call(r,e,n,Jt)}))},pe=function(t){let e=null;if(he("beforeSanitizeElements",t,null),function(t){return t instanceof F&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof I)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)}(t))return se(t),!0;const n=Kt(t.nodeName);if(he("uponSanitizeElement",t,{tagName:n,allowedTags:pt}),t.hasChildNodes()&&!fe(t.firstElementChild)&&b(/<[/\w]/g,t.innerHTML)&&b(/<[/\w]/g,t.textContent))return se(t),!0;if(!pt[n]||yt[n]){if(!yt[n]&&ge(n)){if(vt.tagNameCheck instanceof RegExp&&b(vt.tagNameCheck,n))return!1;if(vt.tagNameCheck instanceof Function&&vt.tagNameCheck(n))return!1}if(zt&&!Dt[n]){const e=Z(t)||t.parentNode,n=V(t)||t.childNodes;if(n&&e)for(let r=n.length-1;r>=0;--r)e.insertBefore(G(n[r],!0),X(t))}return se(t),!0}return t instanceof P&&!function(t){let e=Z(t);e&&e.tagName||(e={namespaceURI:Wt,tagName:"template"});const n=p(t.tagName),r=p(e.tagName);return!!Gt[t.namespaceURI]&&(t.namespaceURI===Ut?e.namespaceURI===qt?"svg"===n:e.namespaceURI===Bt?"svg"===n&&("annotation-xml"===r||ne[r]):Boolean(ie[n]):t.namespaceURI===Bt?e.namespaceURI===qt?"math"===n:e.namespaceURI===Ut?"math"===n&&re[r]:Boolean(ae[n]):t.namespaceURI===qt?!(e.namespaceURI===Ut&&!re[r])&&!(e.namespaceURI===Bt&&!ne[r])&&!ae[n]&&(oe[n]||!ie[n]):!("application/xhtml+xml"!==Vt||!Gt[t.namespaceURI]))}(t)?(se(t),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!b(/<\/no(script|embed|frames)/i,t.innerHTML)?(Mt&&3===t.nodeType&&(e=t.textContent,u([it,at,st],(t=>{e=m(e,t," ")})),t.textContent!==e&&(h(r.removed,{element:t.cloneNode()}),t.textContent=e)),he("afterSanitizeElements",t,null),!1):(se(t),!0)},de=function(t,e,n){if(Ot&&("id"===e||"name"===e)&&(n in o||n in Qt))return!1;if(wt&&!bt[e]&&b(lt,e));else if(xt&&b(ct,e));else if(!gt[e]||bt[e]){if(!(ge(t)&&(vt.tagNameCheck instanceof RegExp&&b(vt.tagNameCheck,t)||vt.tagNameCheck instanceof Function&&vt.tagNameCheck(t))&&(vt.attributeNameCheck instanceof RegExp&&b(vt.attributeNameCheck,e)||vt.attributeNameCheck instanceof Function&&vt.attributeNameCheck(e))||"is"===e&&vt.allowCustomizedBuiltInElements&&(vt.tagNameCheck instanceof RegExp&&b(vt.tagNameCheck,n)||vt.tagNameCheck instanceof Function&&vt.tagNameCheck(n))))return!1}else if(Ft[e]);else if(b(ht,m(n,ft,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==v(n,"data:")||!jt[t])if(_t&&!b(ut,m(n,ft,"")));else if(n)return!1;return!0},ge=function(t){return t.indexOf("-")>0},me=function(t){he("beforeSanitizeAttributes",t,null);const{attributes:e}=t;if(!e)return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:gt};let o=e.length;for(;o--;){const i=e[o],{name:a,namespaceURI:s,value:l}=i,c=Kt(a);let h="value"===a?l:y(l);if(n.attrName=c,n.attrValue=h,n.keepAttr=!0,n.forceKeepAttr=void 0,he("uponSanitizeAttribute",t,n),h=n.attrValue,n.forceKeepAttr)continue;if(le(a,t),!n.keepAttr)continue;if(!kt&&b(/\/>/i,h)){le(a,t);continue}Mt&&u([it,at,st],(t=>{h=m(h,t," ")}));const p=Kt(t.nodeName);if(de(p,c,h)){if(!Lt||"id"!==c&&"name"!==c||(le(a,t),h="user-content-"+h),K&&"object"==typeof U&&"function"==typeof U.getAttributeType)if(s);else switch(U.getAttributeType(p,c)){case"TrustedHTML":h=K.createHTML(h);break;case"TrustedScriptURL":h=K.createScriptURL(h)}try{s?t.setAttributeNS(s,a,h):t.setAttribute(a,h),f(r.removed)}catch(t){}}}he("afterSanitizeAttributes",t,null)},ve=function t(e){let n=null;const r=ue(e);for(he("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)he("uponSanitizeShadowNode",n,null),pe(n)||(n.content instanceof c&&t(n.content),me(n));he("afterSanitizeShadowDOM",e,null)};return r.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,o=null,i=null,s=null;if(Yt=!t,Yt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!fe(t)){if("function"!=typeof t.toString)throw x("toString is not a function");if("string"!=typeof(t=t.toString()))throw x("dirty is not a string, aborting")}if(!r.isSupported)return t;if(At||ee(e),r.removed=[],"string"==typeof t&&(Ct=!1),Ct){if(t.nodeName){const e=Kt(t.nodeName);if(!pt[e]||yt[e])throw x("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof D)n=ce("\x3c!----\x3e"),o=n.ownerDocument.importNode(t,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?n=o:n.appendChild(o);else{if(!$t&&!Mt&&!Et&&-1===t.indexOf("<"))return K&&Nt?K.createHTML(t):t;if(n=ce(t),!n)return $t?null:Nt?J:""}n&&Tt&&se(n.firstChild);const l=ue(Ct?t:n);for(;i=l.nextNode();)pe(i)||(i.content instanceof c&&ve(i.content),me(i));if(Ct)return t;if($t){if(St)for(s=et.call(n.ownerDocument);n.firstChild;)s.appendChild(n.firstChild);else s=n;return(gt.shadowroot||gt.shadowrootmode)&&(s=rt.call(a,s,!0)),s}let f=Et?n.outerHTML:n.innerHTML;return Et&&pt["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&b(q,n.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+f),Mt&&u([it,at,st],(t=>{f=m(f,t," ")})),K&&Nt?K.createHTML(f):f},r.setConfig=function(){ee(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),At=!0},r.clearConfig=function(){Jt=null,At=!1},r.isValidAttribute=function(t,e,n){Jt||ee({});const r=Kt(t),o=Kt(e);return de(r,o,n)},r.addHook=function(t,e){"function"==typeof e&&(ot[t]=ot[t]||[],h(ot[t],e))},r.removeHook=function(t){if(ot[t])return f(ot[t])},r.removeHooks=function(t){ot[t]&&(ot[t]=[])},r.removeAllHooks=function(){ot={}},r}();return Y}()}(rt)),rt.exports}window.DOMPurify||(window.DOMPurify=ot().default||ot());var it="object"==typeof self&&self.self===self&&self||"object"==typeof Xl&&Xl.global===Xl&&Xl||Function("return this")()||{},at=Object.prototype,st=at.toString,lt=at.hasOwnProperty,ct=Array.isArray,ut=Object.keys,ft=!{toString:null}.propertyIsEnumerable("toString"),ht=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function pt(t){return t instanceof pt?t:this instanceof pt?void(this._wrapped=t):new pt(t)}function dt(t){return t}function gt(t){var e="[object "+t+"]";return function(t){return st.call(t)===e}}pt.VERSION="1.13.6",pt.prototype.value=function(){return this._wrapped},pt.prototype.valueOf=pt.prototype.toJSON=pt.prototype.value,pt.prototype.toString=function(){return String(this._wrapped)};var mt=gt("Function"),vt=it.document&&it.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof vt&&(mt=function(t){return"function"==typeof t||!1});var yt=mt;function bt(t){var e=typeof t;return"function"===e||"object"===e&&!!t}var xt=ct||gt("Array");function wt(t,e){return null!=t&&lt.call(t,e)}function _t(t){if(!bt(t))return[];if(ut)return ut(t);var e=[];for(var n in t)wt(t,n)&&e.push(n);return ft&&function(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=ht.length,r=t.constructor,o=yt(r)&&r.prototype||at,i="constructor";for(wt(t,i)&&!e.contains(i)&&e.push(i);n--;)(i=ht[n])in t&&t[i]!==o[i]&&!e.contains(i)&&e.push(i)}(t,e),e}var kt,Mt=(kt=_t,function(t){var e=arguments.length;if(e<2||null==t)return t;for(var n=1;n<e;n++)for(var r=arguments[n],o=kt(r),i=o.length,a=0;a<i;a++){var s=o[a];t[s]=r[s]}return t});function Et(t){return pt.toPath(t)}function At(t,e,n){return null==t?dt:yt(t)?function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}}(t,e,n):bt(t)&&!xt(t)?function(t){return t=Mt({},t),function(e){return function(t,e){var n=_t(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var a=n[i];if(e[a]!==o[a]||!(a in o))return!1}return!0}(e,t)}}(t):function(t){return t=Et(t),function(e){return function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}(e,t)}}(t)}function Tt(t,e){for(var n=(e=Et(e)).length,r=0;r<n;r++){var o=e[r];if(!wt(t,o))return!1;t=t[o]}return!!n}function $t(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}pt.toPath=function(t){return xt(t)?t:[t]},pt.iteratee=function(t,e){return At(t,e,1/0)};var St=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Nt(t){var e,n;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,o=t-1;r>1;)o*=r,r--;return 0===o&&(o=1),o}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*Nt(1-t));if(t>=171.35)return 1/0;if(t>85){var i=t*t,a=i*t,s=a*t,l=s*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*i)-139/(51840*a)-571/(2488320*s)+163879/(209018880*l)+5246819/(75246796800*l*t))}--t,n=St[0];for(var c=1;c<St.length;++c)n+=St[c]/(t+c);return e=t+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n}var Ot=1/3,Lt=Object.freeze({__proto__:null,add:function(t,e){return Number(t)+Number(e)},sub:function(t,e){return t-e},mul:function(t,e){return t*e},div:function(t,e){return t/e},mod:function(t,e){return t%e},concat:function(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e},equal:function(t,e){return t===e},notEqual:function(t,e){return t!==e},greaterThan:function(t,e){return t>e},lessThan:function(t,e){return t<e},greaterThanEqual:function(t,e){return t>=e},lessThanEqual:function(t,e){return t<=e},andOperator:function(t,e){return Boolean(t&&e)},orOperator:function(t,e){return Boolean(t||e)},inOperator:function(t,e){return $t(e,t)},sinh:function(t){return(Math.exp(t)-Math.exp(-t))/2},cosh:function(t){return(Math.exp(t)+Math.exp(-t))/2},tanh:function(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},asinh:function(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},atanh:function(t){return Math.log((1+t)/(1-t))/2},log10:function(t){return Math.log(t)*Math.LOG10E},neg:function(t){return-t},not:function(t){return!t},trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)},random:function(t){return Math.random()*(t||1)},factorial:function(t){return Nt(t+1)},gamma:Nt,stringOrArrayLength:function(t){return Array.isArray(t)?t.length:String(t).length},hypot:function(){for(var t=0,e=0,n=0;n<arguments.length;n++){var r,o=Math.abs(arguments[n]);e<o?(t=t*(r=e/o)*r+1,e=o):t+=o>0?(r=o/e)*r:o}return e===1/0?1/0:e*Math.sqrt(t)},condition:function(t,e,n){return t?e:n},roundTo:function(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))},setVar:function(t,e,n){return n&&(n[t]=e),e},arrayIndex:function(t,e){return t[0|e]},max:function(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)},min:function(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)},arrayMap:function(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,n){return t(e,n)}))},arrayFold:function(t,e,n){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(e,n,r){return t(e,n,r)}),e)},arrayFilter:function(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,n){return t(e,n)}))},stringOrArrayIndexOf:function(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)},arrayJoin:function(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)},sign:function(t){return(t>0)-(t<0)||+t},cbrt:function(t){return t<0?-Math.pow(-t,Ot):Math.pow(t,Ot)},expm1:function(t){return Math.exp(t)-1},log1p:function(t){return Math.log(1+t)},log2:function(t){return Math.log(t)/Math.LN2},sum:function(t){if(!Array.isArray(t))throw new Error("Sum argument is not an array");return t.reduce((function(t,e){return t+Number(e)}),0)}}),zt="INUMBER",Ct="IOP1",Rt="IOP2",Dt="IOP3",Pt="IVAR",jt="IVARNAME",It="IFUNCALL",Ft="IFUNDEF",Ht="IEXPR",Bt="IEXPREVAL",Ut="IMEMBER",qt="IENDSTATEMENT",Wt="IARRAY";function Yt(t,e){this.type=t,this.value=null!=e?e:0}function Gt(t){return new Yt(Ct,t)}function Xt(t){return new Yt(Rt,t)}function Vt(t,e,n){var r,o,i,a,s,l,c=[];if(Kt(t))return Jt(t,n);for(var u=t.length,f=0;f<u;f++){var h=t[f],p=h.type;if(p===zt||p===jt)c.push(h.value);else if(p===Rt)o=c.pop(),r=c.pop(),"and"===h.value?c.push(!!r&&!!Vt(o,e,n)):"or"===h.value?c.push(!!r||!!Vt(o,e,n)):"="===h.value?(a=e.binaryOps[h.value],c.push(a(r,Vt(o,e,n),n))):(a=e.binaryOps[h.value],c.push(a(Jt(r,n),Jt(o,n))));else if(p===Dt)i=c.pop(),o=c.pop(),r=c.pop(),"?"===h.value?c.push(Vt(r?o:i,e,n)):(a=e.ternaryOps[h.value],c.push(a(Jt(r,n),Jt(o,n),Jt(i,n))));else if(p===Pt){if(/^__proto__|prototype|constructor$/.test(h.value))throw new Error("prototype access detected");if(h.value in e.functions)c.push(e.functions[h.value]);else if(h.value in e.unaryOps&&e.parser.isOperatorEnabled(h.value))c.push(e.unaryOps[h.value]);else{var d=n[h.value];if(void 0===d)throw new Error("undefined variable: "+h.value);c.push(d)}}else if(p===Ct)r=c.pop(),a=e.unaryOps[h.value],c.push(a(Jt(r,n)));else if(p===It){for(l=h.value,s=[];l-- >0;)s.unshift(Jt(c.pop(),n));if(!(a=c.pop()).apply||!a.call)throw new Error(a+" is not a function");c.push(a.apply(void 0,s))}else if(p===Ft)c.push(function(){for(var t=c.pop(),r=[],o=h.value;o-- >0;)r.unshift(c.pop());var i=c.pop(),a=function(){for(var o=Object.assign({},n),i=0,a=r.length;i<a;i++)o[r[i]]=arguments[i];return Vt(t,e,o)};return Object.defineProperty(a,"name",{value:i,writable:!1}),n[i]=a,a}());else if(p===Ht)c.push(Zt(h,e));else if(p===Bt)c.push(h);else if(p===Ut)r=c.pop(),c.push(r[h.value]);else if(p===qt)c.pop();else{if(p!==Wt)throw new Error("invalid Expression");for(l=h.value,s=[];l-- >0;)s.unshift(c.pop());c.push(s)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:Jt(c[0],n)}function Zt(t,e,n){return Kt(t)?t:{type:Bt,value:function(n){return Vt(t.value,e,n)}}}function Kt(t){return t&&t.type===Bt}function Jt(t,e){return Kt(t)?t.value(e):t}Yt.prototype.toString=function(){switch(this.type){case zt:case Ct:case Rt:case Dt:case Pt:case jt:case qt:return this.value;case It:return"CALL "+this.value;case Ft:return"DEF "+this.value;case Wt:return"ARRAY "+this.value;case Ut:return"."+this.value;default:return"Invalid Instruction"}};var Qt="TEOF",te="TOP",ee="TNUMBER",ne="TSTRING",re="TPAREN",oe="TBRACKET",ie="TCOMMA",ae="TNAME",se="TSEMICOLON";function le(t,e,n){this.type=t,this.value=e,this.index=n}function ce(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}le.prototype.toString=function(){return this.type+": "+this.value},ce.prototype.newToken=function(t,e,n){return new le(t,e,null!=n?n:this.pos)},ce.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},ce.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},ce.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(Qt,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},ce.prototype.isString=function(){var t=!1,e=this.pos,n=this.expression.charAt(e);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var o=this.expression.substring(e+1,r);this.current=this.newToken(ne,this.unescape(o),e),t=!0;break}r=this.expression.indexOf(n,r+1)}return t},ce.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(re,t),this.pos++,!0)},ce.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("[")||(this.current=this.newToken(oe,t),this.pos++,0))},ce.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(ie,","),this.pos++,!0)},ce.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(se,";"),this.pos++,!0)},ce.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken(ee,this.consts[r]),this.pos+=r.length,!0}return!1},ce.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(te,r),this.pos+=r.length,!0}return!1},ce.prototype.isName=function(){for(var t=this.pos,e=t,n=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(e===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var o=this.expression.substring(t,e);return this.current=this.newToken(ae,o),this.pos+=o.length,!0}return!1},ce.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var ue=/^[0-9a-f]{4}$/i;function fe(t,e,n){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess,this.restrictMemberAccess=new Set(n.restrictMemberAccess||[])}ce.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var n=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var o=t.substring(e+1,e+5);ue.test(o)||this.parseError("Illegal escape sequence: \\u"+o),n+=String.fromCharCode(parseInt(o,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var i=t.indexOf("\\",e);n+=t.substring(e,i<0?t.length:i),e=i}return n},ce.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},ce.prototype.isRadixInteger=function(){var t,e,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))t=16,e=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;t=2,e=/^[01]$/i,++n}for(var r=!1,o=n;n<this.expression.length;){var i=this.expression.charAt(n);if(!e.test(i))break;n++,r=!0}return r&&(this.current=this.newToken(ee,parseInt(this.expression.substring(o,n),t)),this.pos=n),r},ce.prototype.isNumber=function(){for(var t,e=!1,n=this.pos,r=n,o=n,i=!1,a=!1;n<this.expression.length&&((t=this.expression.charAt(n))>="0"&&t<="9"||!i&&"."===t);)"."===t?i=!0:a=!0,n++,e=a;if(e&&(o=n),"e"===t||"E"===t){n++;for(var s=!0,l=!1;n<this.expression.length;){if(t=this.expression.charAt(n),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;l=!0,s=!1}else s=!1;n++}l||(n=o)}return e?(this.current=this.newToken(ee,parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=o,e},ce.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(te,e);else if("∙"===e||"•"===e)this.current=this.newToken(te,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(te,">="),this.pos++):this.current=this.newToken(te,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(te,"<="),this.pos++):this.current=this.newToken(te,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(te,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(te,"=="),this.pos++):this.current=this.newToken(te,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(te,"!="),this.pos++):this.current=this.newToken(te,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},ce.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},ce.prototype.getCoordinates=function(){var t,e=0,n=-1;do{e++,t=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:e,column:t}},ce.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},fe.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},fe.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?$t(e,t.value):"function"==typeof e?e(t):t.value===e)},fe.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},fe.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},fe.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e)||(this.next(),0))},fe.prototype.expect=function(t,e){if(!this.accept(t,e)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(e||t))}},fe.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept(ae)||this.accept(te,(function(t){return t.value in e})))t.push(new Yt(Pt,this.current.value));else if(this.accept(ee))t.push(new Yt(zt,this.current.value));else if(this.accept(ne))t.push(new Yt(zt,this.current.value));else if(this.accept(re,"("))this.parseExpression(t),this.expect(re,")");else{if(!this.accept(oe,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(oe,"]"))t.push(new Yt(Wt,0));else{var n=this.parseArrayList(t);t.push(new Yt(Wt,n))}}},fe.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},fe.prototype.pushExpression=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n])},fe.prototype.parseUntilEndStatement=function(t,e){return!!this.accept(se)&&(!this.nextToken||this.nextToken.type===Qt||this.nextToken.type===re&&")"===this.nextToken.value||e.push(new Yt(qt)),this.nextToken.type!==Qt&&this.parseExpression(e),t.push(new Yt(Ht,e)),!0)},fe.prototype.parseArrayList=function(t){for(var e=0;!this.accept(oe,"]");)for(this.parseExpression(t),++e;this.accept(ie);)this.parseExpression(t),++e;return e},fe.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(te,"=");){var e=t.pop(),n=[],r=t.length-1;if(e.type!==It){if(e.type!==Pt&&e.type!==Ut)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),t.push(new Yt(jt,e.value)),t.push(new Yt(Ht,n)),t.push(Xt("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,i=e.value+1;o<i;o++){var a=r-o;t[a].type===Pt&&(t[a]=new Yt(jt,t[a].value))}this.parseVariableAssignmentExpression(n),t.push(new Yt(Ht,n)),t.push(new Yt(Ft,e.value))}}},fe.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(te,"?");){var e=[],n=[];this.parseConditionalExpression(e),this.expect(te,":"),this.parseConditionalExpression(n),t.push(new Yt(Ht,e)),t.push(new Yt(Ht,n)),t.push(new Yt(Dt,"?"))}},fe.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(te,"or");){var e=[];this.parseAndExpression(e),t.push(new Yt(Ht,e)),t.push(Xt("or"))}},fe.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(te,"and");){var e=[];this.parseComparison(e),t.push(new Yt(Ht,e)),t.push(Xt("and"))}};var he=["==","!=","<","<=",">=",">","in"];fe.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(te,he);){var e=this.current;this.parseAddSub(t),t.push(Xt(e.value))}};var pe=["+","-","||"];fe.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(te,pe);){var e=this.current;this.parseTerm(t),t.push(Xt(e.value))}};var de=["*","/","%"];fe.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(te,de);){var e=this.current;this.parseFactor(t),t.push(Xt(e.value))}},fe.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(te,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===re&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if(this.nextToken.type===se||this.nextToken.type===ie||this.nextToken.type===Qt||this.nextToken.type===re&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var n=this.current;this.parseFactor(t),t.push(Gt(n.value))}else this.parseExponential(t)},fe.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(te,"^");)this.parseFactor(t),t.push(Xt("^"))},fe.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(te,"!");)t.push(Gt("!"))},fe.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(te,(function(t){return t.value in e}))){var n=this.current;this.parseAtom(t),t.push(Gt(n.value))}else for(this.parseMemberExpression(t);this.accept(re,"(");)if(this.accept(re,")"))t.push(new Yt(It,0));else{var r=this.parseArgumentList(t);t.push(new Yt(It,r))}},fe.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(re,")");)for(this.parseExpression(t),++e;this.accept(ie);)this.parseExpression(t),++e;return e},fe.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(te,".")||this.accept(oe,"[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');if(this.restrictMemberAccess.has(this.nextToken.value))throw new Error('access to member "'+this.nextToken.value+'" is not permitted');this.expect(ae),t.push(new Yt(Ut,this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect(oe,"]"),t.push(Xt("["))}}};const{add:ge,sub:me,mul:ve,div:ye,mod:be,equal:xe,notEqual:we,greaterThan:_e,lessThan:ke,greaterThanEqual:Me,lessThanEqual:Ee,andOperator:Ae,orOperator:Te,log10:$e,neg:Se,not:Ne,trunc:Oe,random:Le,stringOrArrayLength:ze,condition:Ce,roundTo:Re,arrayIndex:De,max:Pe,min:je,sum:Ie,arrayMap:Fe,arrayFold:He,arrayFilter:Be,sign:Ue,log1p:qe,log2:We}=Lt;function Ye(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}function Ge(t){return t.trim()}Ye.prototype.evaluate=function(t){return t=t||{},Vt(this.tokens,this,t)},Ye.prototype.variables=function(){return(this.tokens||[]).filter((t=>"IVAR"===t.type)).map((t=>t.value))};const Xe=new Set(["__proto__","prototype","constructor"]);function Ve(t){this.options=t||{},this.unaryOps={SIN:Math.sin,COS:Math.cos,TAN:Math.tan,ASIN:Math.asin,ACOS:Math.acos,ATAN:Math.atan,SQRT:Math.sqrt,LOG:Math.log,LOG2:Math.log2||We,LN:Math.log,LOG10:Math.log10||$e,LG:Math.log10||$e,LOG1P:Math.log1p||qe,ABS:Math.abs,CEIL:Math.ceil,FLOOR:Math.floor,ISNULL:t=>null===t,TRUNC:Math.trunc||Oe,"-":Se,"+":Number,EXP:Math.exp,NOT:Ne,LENGTH:ze,"!":Ne,SIGN:Math.sign||Ue,TEXT:t=>e(t)?t.toISOString():String(t),NUMBER:Number},this.binaryOps={"+":ge,"-":me,"*":ve,"/":ye,"%":be,"^":Math.pow,"==":xe,"!=":we,">":_e,"<":ke,">=":Me,"<=":Ee,and:Ae,or:Te,in:(t,e)=>Array.isArray(e)?e.includes(t):String(e).includes(t),"[":De},this.ternaryOps={"?":Ce};const e=t=>t instanceof Date&&!isNaN(t),n=t=>{if(e(t))return t;try{const n=new Date(t);return e(n)?n:null}catch(t){return null}};function r(t){return(1===arguments.length&&Array.isArray(t)?t:Array.from(arguments)).slice(0).filter((t=>!isNaN(t)&&Number.isFinite(t)))}let o=/\w*/g,i=/\w\S*/g;const a=/[\\^$*+?.()|[\]{}]/g;try{o=new RegExp("\\p{L}*","ug"),i=new RegExp("[\\p{L}\\p{N}]\\S*","ug")}catch(t){}this.functions={IF:Ce,RANDOM:Le,MIN(){const t=r.apply(this,arguments);return je(t)},MAX(){return Pe(r.apply(this,arguments))},SUM(){return Ie(r.apply(this,arguments))},MEAN(){const t=r.apply(this,arguments);return Ie(t)/t.length},MEDIAN(){const t=r.apply(this,arguments).sort(((t,e)=>t-e)),e=Math.floor(t.length/2);return t.length%2==1?t[e]:.5*(t[e-1]+t[e])},POW:Math.pow,ATAN2:Math.atan2,ROUND:Re,CONCAT(){return Array.from(arguments).join("")},TRIM:Ge,SUBSTR:(t,e,n)=>t.substr(e,n),REPLACE:(t,e,n)=>t.replace(new RegExp(String(e).replace(a,"\\$&"),"g"),n),REPLACE_REGEX:(t,e,n)=>t.replace(new RegExp(e,"g"),n),SPLIT:(t,e)=>String(t).split(e),LOWER:t=>String(t).toLowerCase(),UPPER:t=>String(t).toUpperCase(),PROPER:t=>String(t).replace(o,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())),TITLE:t=>String(t).replace(i,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())),SORT(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Xe.has(n))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to SORT is not an array");return t.slice(0).sort(((t,r)=>((t="string"==typeof n?t[n]:"function"==typeof n?n(t):t)>(r="string"==typeof n?r[n]:"function"==typeof n?n(r):r)?1:t<r?-1:0)*(e?1:-1)))},SLICE(t,e,n){if(!Array.isArray(t))throw new Error("First argument to SLICE is not an array");return t.slice(e,n)},JOIN(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(t))throw new Error("First argument to JOIN is not an array");return n?[t.slice(0,t.length-1).join(e),t[t.length-1]].join(n):t.join(e)},MAP:Fe,FOLD:He,FILTER:Be,PLUCK(t,e){if(Xe.has(e))throw new Error("Invalid key");if(!Array.isArray(t))throw new Error("First argument to PLUCK is not an array");return t.map((t=>Object.prototype.hasOwnProperty.call(t,e)?t[e]:null))},INDEXOF:(t,e)=>(Array.isArray(t)||(t=String(t)),t.indexOf(e)),FIND(t,e){if(!Array.isArray(t))throw new Error("First argument to FIND is not an array");if("function"!=typeof e)throw new Error("Second argument to FIND is not a function");const n=t.length;for(let r=0;r<n;r++)if(e(t[r]))return t[r];return null},RANGE(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o},EVERY(t,e){if(!Array.isArray(t))throw new Error("First argument to EVERY is not an array");if("function"!=typeof e)throw new Error("Second argument to EVERY is not a function");const n=t.length;let r=!0;for(let o=0;o<n;o++)if(r=r&&e(t[o]),!r)return!1;return!0},SOME(t,e){if(!Array.isArray(t))throw new Error("First argument to SOME is not an array");if("function"!=typeof e)throw new Error("Second argument to SOME is not a function");const n=t.length;let r=!1;for(let o=0;o<n;o++)if(r=r||e(t[o]),r)return!0;return!1},DATE(){return arguments.length>1&&(arguments[1]=arguments[1]-1),new Date(...arguments)},YEAR:t=>(t=n(t))?t.getFullYear():null,MONTH:t=>(t=n(t))?t.getMonth()+1:null,DAY:t=>(t=n(t))?t.getDate():null,WEEKDAY:t=>(t=n(t))?t.getDay():null,HOURS:t=>(t=n(t))?t.getHours():null,MINUTES:t=>(t=n(t))?t.getMinutes():null,SECONDS:t=>(t=n(t))?t.getSeconds():null,DATEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/864e5:null),TIMEDIFF:(t,e)=>(t=n(t),e=n(e),t&&e?(e.getTime()-t.getTime())/1e3:null)},this.unaryOps.LOWER=this.functions.LOWER,this.unaryOps.UPPER=this.functions.UPPER,this.unaryOps.PROPER=this.functions.PROPER,this.unaryOps.TITLE=this.functions.TITLE,this.unaryOps.TRIM=this.functions.TRIM,this.unaryOps.YEAR=this.functions.YEAR,this.unaryOps.MONTH=this.functions.MONTH,this.unaryOps.DAY=this.functions.DAY,this.unaryOps.WEEKDAY=this.functions.WEEKDAY,this.unaryOps.HOURS=this.functions.HOURS,this.unaryOps.MINUTES=this.functions.MINUTES,this.unaryOps.SECONDS=this.functions.SECONDS,this.consts={E:Math.E,PI:Math.PI,TRUE:!0,FALSE:!1,NA:Number.NaN,NULL:Number.NaN}}Ve.prototype.parse=function(t){var e=[],n=new fe(this,new ce(this,t),{allowMemberAccess:!0,restrictMemberAccess:Xe});return n.parseExpression(e),n.expect(Qt,"EOF"),new Ye(e,this)},Ve.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var Ze=new Ve;Ve.parse=function(t){return Ze.parse(t)},Ve.evaluate=function(t,e){return Ze.parse(t).evaluate(e)},Ve.keywords=["ABS","ACOS","ACOSH","and","ASIN","ASINH","ATAN","ATAN2","ATANH","CBRT","CEIL","CONCAT","COS","COSH","DATEDIFF","DAY","E","EVERY","EXP","EXPM1","FIND","FLOOR","HOURS","IF","in","INDEXOF","ISNULL","JOIN","LENGTH","LN","LOG","LOG10","LOG1P","LOG2","LOWER","MAP","MAX","MEAN","MEDIAN","MIN","MINUTES","MONTH","NOT","NOT","or","PI","PLUCK","POW","PROPER","RANDOM","RANGE","REPLACE","REPLACE_REGEX","ROUND","SECONDS","SIGN","SIN","SINH","SLICE","SOME","SORT","SPLIT","SQRT","SUBSTR","SUM","TAN","TANH","TIMEDIFF","TITLE","TRIM","TRUNC","UPPER","WEEKDAY","YEAR"];var Ke={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",AND:"logical",OR:"logical",NOT:"logical",IN:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Ve.prototype.isOperatorEnabled=function(t){var e=function(t){return Object.prototype.hasOwnProperty.call(Ke,t)?Ke[t]:t}(t),n=this.options.operators||{};return!(e in n)||!!n[e]};const Je="%UNDEFINED%",Qe={color:{prop:"color"},fontWeight:{prop:"font-weight"},fontStretch:{prop:"font-stretch"},typeface:{prop:"font-family"},textTransform:{prop:"text-transform"},letterSpacing:{tsf:t=>en(t),prop:"letter-spacing"},fontSize:{prop:"font-size",tsf:t=>en(t)},lineHeight:{prop:"line-height",tsf:t=>{return(e=t)===Je?e:e>3?"".concat(e,"px"):String(e);var e}},underlined:{prop:"text-decoration",tsf:t=>t?"underline":"none"},cursive:{prop:"font-style",tsf:t=>t?"italic":"normal"}};function tn(t,e){const n=function(t){let e="";for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(const n of t)e+=n+(r.length?r.shift():"");return e.split("\n").filter((t=>t)).filter((t=>!t.includes(Je))).join("\n")};function r(t,e,n){return et(t,e,void 0===n?Je:n)}return{getProp:(t,n)=>r(e,t,n),getObjProp:r,typography:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(Qe).filter((n=>{let[r]=n;return Tt(t,r)||Tt(e,r)})).map((n=>{let[r,{prop:o,tsf:i=dt}]=n;return"".concat(o,": ").concat(i(et(t,r,e[r])),";")})).join("\n")},css:function(){return t.css(n(...arguments))},cssTemplate:n,UNDEFINED_STYLE:Je}}function en(t){return t===Je?t:Number.isFinite(t)?"".concat(t,"px"):t}const nn=Math.cos,rn=Math.sin,on=Math.sqrt,an=Math.PI,sn=2*an,ln=Math.PI,cn=2*ln,un=1e-6,fn=cn-un;function hn(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class pn{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?hn:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: ".concat(t));if(e>15)return hn;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append(jd||(jd=Pd(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Id||(Id=Pd(["Z"]))))}lineTo(t,e){this._append(Fd||(Fd=Pd(["L",",",""])),this._x1=+t,this._y1=+e)}quadraticCurveTo(t,e,n,r){this._append(Hd||(Hd=Pd(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+r)}bezierCurveTo(t,e,n,r,o,i){this._append(Bd||(Bd=Pd(["C",",",",",",",",",",",""])),+t,+e,+n,+r,this._x1=+o,this._y1=+i)}arcTo(t,e,n,r,o){if(t=+t,e=+e,n=+n,r=+r,(o=+o)<0)throw new Error("negative radius: ".concat(o));let i=this._x1,a=this._y1,s=n-t,l=r-e,c=i-t,u=a-e,f=c*c+u*u;if(null===this._x1)this._append(Ud||(Ud=Pd(["M",",",""])),this._x1=t,this._y1=e);else if(f>un)if(Math.abs(u*s-l*c)>un&&o){let h=n-i,p=r-a,d=s*s+l*l,g=h*h+p*p,m=Math.sqrt(d),v=Math.sqrt(f),y=o*Math.tan((ln-Math.acos((d+f-g)/(2*m*v)))/2),b=y/v,x=y/m;Math.abs(b-1)>un&&this._append(qd||(qd=Pd(["L",",",""])),t+b*c,e+b*u),this._append(Wd||(Wd=Pd(["A",",",",0,0,",",",",",""])),o,o,+(u*h>c*p),this._x1=t+x*s,this._y1=e+x*l)}else this._append(Yd||(Yd=Pd(["L",",",""])),this._x1=t,this._y1=e)}arc(t,e,n,r,o,i){if(t=+t,e=+e,i=!!i,(n=+n)<0)throw new Error("negative radius: ".concat(n));let a=n*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,u=1^i,f=i?r-o:o-r;null===this._x1?this._append(Gd||(Gd=Pd(["M",",",""])),l,c):(Math.abs(this._x1-l)>un||Math.abs(this._y1-c)>un)&&this._append(Xd||(Xd=Pd(["L",",",""])),l,c),n&&(f<0&&(f=f%cn+cn),f>fn?this._append(Vd||(Vd=Pd(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,t-a,e-s,n,n,u,this._x1=l,this._y1=c):f>un&&this._append(Zd||(Zd=Pd(["A",",",",0,",",",",",",",""])),n,n,+(f>=ln),u,this._x1=t+n*Math.cos(o),this._y1=e+n*Math.sin(o)))}rect(t,e,n,r){this._append(Kd||(Kd=Pd(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+r,-n)}toString(){return this._}}function dn(){return new pn}dn.prototype=pn.prototype;var gn={draw(t,e){const n=on(e/an);t.moveTo(n,0),t.arc(0,0,n,0,sn)}},mn={draw(t,e){const n=on(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},vn={draw(t,e){const n=on(e),r=-n/2;t.rect(r,r,n,n)}};const yn=rn(an/10)/rn(7*an/10),bn=rn(sn/10)*yn,xn=-nn(sn/10)*yn;var wn={draw(t,e){const n=on(.8908130915292852*e),r=bn*n,o=xn*n;t.moveTo(0,-n),t.lineTo(r,o);for(let e=1;e<5;++e){const i=sn*e/5,a=nn(i),s=rn(i);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*o,s*r+a*o)}t.closePath()}};const _n=-.5,kn=on(3)/2,Mn=1/on(12),En=3*(Mn/2+1);var An={draw(t,e){const n=on(e/En),r=n/2,o=n*Mn,i=r,a=n*Mn+n,s=-i,l=a;t.moveTo(r,o),t.lineTo(i,a),t.lineTo(s,l),t.lineTo(_n*r-kn*o,kn*r+_n*o),t.lineTo(_n*i-kn*a,kn*i+_n*a),t.lineTo(_n*s-kn*l,kn*s+_n*l),t.lineTo(_n*r+kn*o,_n*o-kn*r),t.lineTo(_n*i+kn*a,_n*a-kn*i),t.lineTo(_n*s+kn*l,_n*l-kn*s),t.closePath()}},Tn=Object.assign(Object.assign({name:"circle"},gn),{bbox(t){const e=2*Math.sqrt(t/Math.PI);return{width:e,height:e}}}),$n=Object.assign(Object.assign({name:"cross"},mn),{bbox(t){const e=3*Math.sqrt(t/5);return{width:e,height:e}},verticalAlign:"bottom"}),Sn={name:"diamond",draw(t,e){const n=.7071*Math.sqrt(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()},bbox(t){const e=.7071*Math.sqrt(t);return{width:2*e,height:2*e}}},Nn={name:"hexagon",draw(t,e){const n=.56416*Math.sqrt(e),r=1.09963*n,o=r/2,i=.952436*n;t.moveTo(0,-r),t.lineTo(i,-o),t.lineTo(i,o),t.lineTo(0,r),t.lineTo(-i,o),t.lineTo(-i,-o),t.lineTo(0,-r)},bbox(t){const e=.56416*Math.sqrt(t);return{width:.952436*e*2,height:1.09963*e*2}}},On={name:"marker",draw(t,e){const n=.691*Math.sqrt(e);t.moveTo(.004066*n,-2.757056*n),t.bezierCurveTo(-.462735*n,-2.757056*n,-.841214*n,-2.378661*n,-.841214*n,-1.9117769999999998*n),t.bezierCurveTo(-.841214*n,-1.7810229999999998*n,-.811497*n,-1.6570359999999997*n,-.75842*n,-1.54659*n),t.bezierCurveTo(-.75545*n,-1.5403129999999998*n,.004064999999999985*n,0,.004064999999999985*n,0),t.lineTo(.757389*n,-1.5280999999999998*n),t.bezierCurveTo(.8161619999999999*n,-1.6431679999999997*n,.849344*n,-1.7735959999999997*n,.849344*n,-1.9117769999999998*n),t.bezierCurveTo(.849344*n,-2.378662*n,.470949*n,-2.757056*n,.0040639999999999565*n,-2.757056*n),t.moveTo(.507167*n,n*(-1.404609-.507167)),t.arc(0,n*(-1.404609-.507167),.507167*n,0,2*Math.PI)},bbox(t){const e=Math.sqrt(t);return{width:1.1682*e,height:1.9051*e}},baseline:1},Ln={name:"spike",draw(t,e){t.moveTo(-2,0),t.lineTo(0,-e),t.lineTo(2,0)},bbox:t=>({width:4,height:t}),baseline:1},zn=Object.assign(Object.assign({name:"square"},vn),{bbox(t){const e=Math.sqrt(t);return{width:e,height:e}}}),Cn=Object.assign(Object.assign({name:"star"},wn),{bbox(t){const e=Math.sqrt(t);return{width:1.7897*e,height:1.7048*e}},baseline:.55}),Rn=Object.assign(Object.assign({name:"wye"},An),{bbox(t){const e=Math.sqrt(t);return{width:1.472*e,height:1.2763*e}},baseline:.455});const Dn=Math.sqrt(3);var Pn={name:"triangleUp",draw(t,e){const n=-Math.sqrt(e/(3*Dn));t.moveTo(0,2*n),t.lineTo(-Dn*n,-n),t.lineTo(Dn*n,-n),t.closePath()},bbox(t){const e=Math.sqrt(t/(3*Dn));return{width:Dn*e*2,height:3*e}},baseline:.66667};const jn=Math.sqrt(3);var In={name:"triangleDown",draw(t,e){const n=-Math.sqrt(e/(3*jn));t.moveTo(0,2*-n),t.lineTo(-jn*n,n),t.lineTo(jn*n,n),t.closePath()},bbox(t){const e=Math.sqrt(t/(3*jn));return{width:jn*e*2,height:3*e}},baseline:.3333},Fn=Object.freeze({__proto__:null,symbolCircle:Tn,symbolCross:$n,symbolDiamond:Sn,symbolHexagon:Nn,symbolMarker:On,symbolSpike:Ln,symbolSquare:zn,symbolStar:Cn,symbolTriangleDown:In,symbolTriangleUp:Pn,symbolWye:Rn});function Hn(t){let e;function n(t,e){return t[12]?Un:Bn}let r=n(t),o=r(t);return{c(){o.c(),e=m()},m(t,n){o.m(t,n),u(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&f(e)}}}function Bn(t){let e,n;return{c(){e=p("div"),y(e,"class",n="legend-color buffer ".concat(t[32])),x(e,"width",en((t[10]?t[10]:t[17])+t[1].size)),x(e,"height",en(t[26]+t[1].size)),x(e,"background",t[1].color),x(e,"margin-left",t[0]?en(t[27]):null),x(e,"margin-right",t[0]?null:en(t[27])),x(e,"position","absolute"),x(e,"z-index","0"),x(e,"right",t[0]?en(-t[1].size/2):null),x(e,"left",t[0]?null:en(-t[1].size/2)),x(e,"top","calc(60% - ".concat(t[26]/2+t[1].size,"px)"))},m(t,n){u(t,e,n)},p(t,r){2&r[1]&&n!==(n="legend-color buffer ".concat(t[32]))&&y(e,"class",n),132098&r[0]&&x(e,"width",en((t[10]?t[10]:t[17])+t[1].size)),67108866&r[0]&&x(e,"height",en(t[26]+t[1].size)),2&r[0]&&x(e,"background",t[1].color),134217729&r[0]&&x(e,"margin-left",t[0]?en(t[27]):null),134217729&r[0]&&x(e,"margin-right",t[0]?null:en(t[27])),3&r[0]&&x(e,"right",t[0]?en(-t[1].size/2):null),3&r[0]&&x(e,"left",t[0]?null:en(-t[1].size/2)),67108866&r[0]&&x(e,"top","calc(60% - ".concat(t[26]/2+t[1].size,"px)"))},d(t){t&&f(e)}}}function Un(t){let e,n,r,o=t[12].strokeWidth>0&&qn(t),i=t[12].symbol&&Wn(t);return{c(){e=d("svg"),o&&o.c(),n=m(),i&&i.c(),y(e,"class",r="legend-color buffer ".concat(t[32])),x(e,"width",en(t[17])),x(e,"height",en(t[26])),x(e,"margin-left",t[0]?en(t[27]):null),x(e,"margin-right",t[0]?null:en(t[27])),x(e,"position","absolute"),x(e,"z-index","0"),x(e,"right",t[0]?en(-t[1].size/2):null),x(e,"left",t[0]?null:en(-t[1].size/2)),x(e,"top","calc(60% - ".concat(t[26]/2+t[1].size,"px)"))},m(t,r){u(t,e,r),o&&o.m(e,null),c(e,n),i&&i.m(e,null)},p(t,a){t[12].strokeWidth>0?o?o.p(t,a):(o=qn(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),t[12].symbol?i?i.p(t,a):(i=Wn(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null),2&a[1]&&r!==(r="legend-color buffer ".concat(t[32]))&&y(e,"class",r),131072&a[0]&&x(e,"width",en(t[17])),67108864&a[0]&&x(e,"height",en(t[26])),134217729&a[0]&&x(e,"margin-left",t[0]?en(t[27]):null),134217729&a[0]&&x(e,"margin-right",t[0]?null:en(t[27])),3&a[0]&&x(e,"right",t[0]?en(-t[1].size/2):null),3&a[0]&&x(e,"left",t[0]?null:en(-t[1].size/2)),67108866&a[0]&&x(e,"top","calc(60% - ".concat(t[26]/2+t[1].size,"px)"))},d(t){t&&f(e),o&&o.d(),i&&i.d()}}}function qn(t){let e,n,r,o,i,a,s;return{c(){e=d("line"),y(e,"x1",n=t[21]+(t[0]?-t[1].size:0)),y(e,"y1",r=t[26]/2+t[1].size/4),y(e,"x2",o=t[22]+(t[0]?0:t[1].size)),y(e,"y2",i=t[26]/2+t[1].size/4),y(e,"stroke",a=t[1].color),y(e,"stroke-width",s=t[12].strokeWidth+t[1].size),y(e,"stroke-linecap",t[18])},m(t,n){u(t,e,n)},p(t,l){2097155&l[0]&&n!==(n=t[21]+(t[0]?-t[1].size:0))&&y(e,"x1",n),67108866&l[0]&&r!==(r=t[26]/2+t[1].size/4)&&y(e,"y1",r),4194307&l[0]&&o!==(o=t[22]+(t[0]?0:t[1].size))&&y(e,"x2",o),67108866&l[0]&&i!==(i=t[26]/2+t[1].size/4)&&y(e,"y2",i),2&l[0]&&a!==(a=t[1].color)&&y(e,"stroke",a),4098&l[0]&&s!==(s=t[12].strokeWidth+t[1].size)&&y(e,"stroke-width",s),262144&l[0]&&y(e,"stroke-linecap",t[18])},d(t){t&&f(e)}}}function Wn(t){let e,n,r,o,i;return{c(){e=d("path"),y(e,"class","symbol"),y(e,"transform",n="translate("+(t[16]+.5*t[1].size*(t[0]?-1:1))+", "+t[26]/2+")"),y(e,"d",t[23]),y(e,"fill",r=t[1].color),y(e,"stroke",o=t[1].color),y(e,"stroke-width",i=t[1].size)},m(t,n){u(t,e,n)},p(t,a){67174403&a[0]&&n!==(n="translate("+(t[16]+.5*t[1].size*(t[0]?-1:1))+", "+t[26]/2+")")&&y(e,"transform",n),8388608&a[0]&&y(e,"d",t[23]),2&a[0]&&r!==(r=t[1].color)&&y(e,"fill",r),2&a[0]&&o!==(o=t[1].color)&&y(e,"stroke",o),2&a[0]&&i!==(i=t[1].size)&&y(e,"stroke-width",i)},d(t){t&&f(e)}}}function Yn(t){let e,n,r,o=t[5]&&Vn(t);return{c(){e=p("div"),o&&o.c(),r=m(),y(e,"class",n="legend-color ".concat(t[32])),x(e,"width",en(t[10]||t[17])),x(e,"height",en(t[26])),x(e,"margin-left",t[0]?en(t[27]):null),x(e,"margin-right",t[0]?null:en(t[27])),x(e,"background",t[7]),x(e,"mix-blend-mode",t[5]?"screen":null)},m(t,n){u(t,e,n),o&&o.m(t,n),u(t,r,n)},p(t,i){2&i[1]&&n!==(n="legend-color ".concat(t[32]))&&y(e,"class",n),132096&i[0]&&x(e,"width",en(t[10]||t[17])),67108864&i[0]&&x(e,"height",en(t[26])),134217729&i[0]&&x(e,"margin-left",t[0]?en(t[27]):null),134217729&i[0]&&x(e,"margin-right",t[0]?null:en(t[27])),128&i[0]&&x(e,"background",t[7]),32&i[0]&&x(e,"mix-blend-mode",t[5]?"screen":null),t[5]?o?o.p(t,i):(o=Vn(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(t){t&&f(e),o&&o.d(t),t&&f(r)}}}function Gn(t){let e,n,r,o,i,a,s=t[12].symbol&&Zn(t);return{c(){e=d("svg"),n=d("line"),s&&s.c(),y(n,"x1",t[21]),y(n,"y1",r=t[26]/2),y(n,"x2",t[22]),y(n,"y2",o=t[26]/2),y(n,"stroke",t[7]),y(n,"stroke-width",i=t[12].strokeWidth),y(n,"stroke-dasharray",a=t[12].dashArray),y(n,"stroke-linecap",t[18]),x(e,"width",en(t[17])),x(e,"height",en(t[26])),x(e,"margin-left",t[0]?en(t[27]):null),x(e,"margin-right",t[0]?null:en(t[27]))},m(t,r){u(t,e,r),c(e,n),s&&s.m(e,null)},p(t,l){2097152&l[0]&&y(n,"x1",t[21]),67108864&l[0]&&r!==(r=t[26]/2)&&y(n,"y1",r),4194304&l[0]&&y(n,"x2",t[22]),67108864&l[0]&&o!==(o=t[26]/2)&&y(n,"y2",o),128&l[0]&&y(n,"stroke",t[7]),4096&l[0]&&i!==(i=t[12].strokeWidth)&&y(n,"stroke-width",i),4096&l[0]&&a!==(a=t[12].dashArray)&&y(n,"stroke-dasharray",a),262144&l[0]&&y(n,"stroke-linecap",t[18]),t[12].symbol?s?s.p(t,l):(s=Zn(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),131072&l[0]&&x(e,"width",en(t[17])),67108864&l[0]&&x(e,"height",en(t[26])),134217729&l[0]&&x(e,"margin-left",t[0]?en(t[27]):null),134217729&l[0]&&x(e,"margin-right",t[0]?null:en(t[27]))},d(t){t&&f(e),s&&s.d()}}}function Xn(t){let e,n,r,o,i,a,s,l,h,p,g,m;return{c(){e=d("svg"),n=d("defs"),r=d("pattern"),o=d("line"),p=d("rect"),y(o,"x1",i=t[29]/2),y(o,"y1","0"),y(o,"x2",a=t[29]/2),y(o,"y2",t[29]),y(o,"stroke",t[7]),y(o,"stroke-width",s=t[11].strokeWidth),y(r,"id",l="color-legend-fill-pattern-".concat(t[2])),y(r,"patternTransform",h="rotate(".concat(180-(t[30]||0)," 0 0)")),y(r,"patternUnits","userSpaceOnUse"),y(r,"width",t[29]),y(r,"height",t[29]),y(p,"width",g=t[10]||t[17]),y(p,"height",t[26]),y(p,"fill",m="url(#color-legend-fill-pattern-".concat(t[2],")")),y(p,"rx",t[20]),y(p,"ry",t[20]),x(e,"width",en(t[10]||t[17])),x(e,"height",en(t[26])),x(e,"margin-left",t[0]?en(t[27]):null),x(e,"margin-right",t[0]?null:en(t[27]))},m(t,i){u(t,e,i),c(e,n),c(n,r),c(r,o),c(e,p)},p(t,n){536870912&n[0]&&i!==(i=t[29]/2)&&y(o,"x1",i),536870912&n[0]&&a!==(a=t[29]/2)&&y(o,"x2",a),536870912&n[0]&&y(o,"y2",t[29]),128&n[0]&&y(o,"stroke",t[7]),2048&n[0]&&s!==(s=t[11].strokeWidth)&&y(o,"stroke-width",s),4&n[0]&&l!==(l="color-legend-fill-pattern-".concat(t[2]))&&y(r,"id",l),1073741824&n[0]&&h!==(h="rotate(".concat(180-(t[30]||0)," 0 0)"))&&y(r,"patternTransform",h),536870912&n[0]&&y(r,"width",t[29]),536870912&n[0]&&y(r,"height",t[29]),132096&n[0]&&g!==(g=t[10]||t[17])&&y(p,"width",g),67108864&n[0]&&y(p,"height",t[26]),4&n[0]&&m!==(m="url(#color-legend-fill-pattern-".concat(t[2],")"))&&y(p,"fill",m),1048576&n[0]&&y(p,"rx",t[20]),1048576&n[0]&&y(p,"ry",t[20]),132096&n[0]&&x(e,"width",en(t[10]||t[17])),67108864&n[0]&&x(e,"height",en(t[26])),134217729&n[0]&&x(e,"margin-left",t[0]?en(t[27]):null),134217729&n[0]&&x(e,"margin-right",t[0]?null:en(t[27]))},d(t){t&&f(e)}}}function Vn(t){let e,n;return{c(){e=p("div"),y(e,"class",n="legend-color blend-multiply-background ".concat(t[32])),x(e,"width",en(t[10]||t[17])),x(e,"height",en(t[26])),x(e,"margin-left",t[0]?null:en(-(t[10]||t[17])-t[27])),x(e,"margin-right",t[0]?en(-(t[10]||t[17])-t[27]):null),x(e,"background",t[6]),x(e,"position","relative"),x(e,"z-index","-1")},m(t,n){u(t,e,n)},p(t,r){2&r[1]&&n!==(n="legend-color blend-multiply-background ".concat(t[32]))&&y(e,"class",n),132096&r[0]&&x(e,"width",en(t[10]||t[17])),67108864&r[0]&&x(e,"height",en(t[26])),134349825&r[0]&&x(e,"margin-left",t[0]?null:en(-(t[10]||t[17])-t[27])),134349825&r[0]&&x(e,"margin-right",t[0]?en(-(t[10]||t[17])-t[27]):null),64&r[0]&&x(e,"background",t[6])},d(t){t&&f(e)}}}function Zn(t){let e,n,r,o,i,a;return{c(){var s;e=d("path"),y(e,"class","symbol"),y(e,"transform",n="translate("+t[16]+", "+t[26]/2+")"),y(e,"d",t[23]),y(e,"fill",r="hollow"===t[24]?null===(s=t[3].colors)||void 0===s?void 0:s.background:t[7]),y(e,"stroke",o="hollow"===t[24]?t[7]:null),y(e,"stroke-width",i="hollow"===t[24]?t[12].strokeWidth:null),y(e,"opacity",a=t[12].symbol.opacity)},m(t,n){u(t,e,n)},p(t,s){var l;67174400&s[0]&&n!==(n="translate("+t[16]+", "+t[26]/2+")")&&y(e,"transform",n),8388608&s[0]&&y(e,"d",t[23]),16777352&s[0]&&r!==(r="hollow"===t[24]?null===(l=t[3].colors)||void 0===l?void 0:l.background:t[7])&&y(e,"fill",r),16777344&s[0]&&o!==(o="hollow"===t[24]?t[7]:null)&&y(e,"stroke",o),16781312&s[0]&&i!==(i="hollow"===t[24]?t[12].strokeWidth:null)&&y(e,"stroke-width",i),4096&s[0]&&a!==(a=t[12].symbol.opacity)&&y(e,"opacity",a)},d(t){t&&f(e)}}}function Kn(t){let n,r,o,a,s,l,h,d=t[4](t[19])+"",g=t[4](t[31])+"",b=t[1]&&Hn(t);function _(t,e){return t[11]?Xn:t[12]&&(t[12].strokeWidth>0||t[12].symbol)?Gn:Yn}let k=_(t),M=k(t);return{c(){n=p("div"),r=p("div"),b&&b.c(),o=m(),M.c(),a=p("div"),s=p("div"),y(a,"class","legend-label"),x(a,"text-shadow",t[1]?t[1].textShadow:null),x(a,"color",t[25]),y(r,"class","legend-no-break"),y(s,"class","legend-label"),x(s,"text-shadow",t[1]?t[1].textShadow:null),x(s,"color",t[25]),y(n,"class","legend-swatch"),y(n,"aria-hidden","true"),w(n,"highlight",t[15]),x(n,"margin-left",t[0]?en(t[28]):null),x(n,"margin-right",t[0]?null:en(t[28]))},m(e,i){u(e,n,i),c(n,r),b&&b.m(r,null),c(r,o),M.m(r,null),c(r,a),a.innerHTML=d,c(n,s),s.innerHTML=g,l||(h=[v(n,"mouseenter",t[41]),v(n,"click",t[42]),v(n,"mousemove",t[39]),v(n,"mouseleave",t[40])],l=!0)},p(t,e){t[1]?b?b.p(t,e):(b=Hn(t),b.c(),b.m(r,o)):b&&(b.d(1),b=null),k===(k=_(t))&&M?M.p(t,e):(M.d(1),M=k(t),M&&(M.c(),M.m(r,a))),524304&e[0]&&d!==(d=t[4](t[19])+"")&&(a.innerHTML=d),2&e[0]&&x(a,"text-shadow",t[1]?t[1].textShadow:null),33554432&e[0]&&x(a,"color",t[25]),16&e[0]|1&e[1]&&g!==(g=t[4](t[31])+"")&&(s.innerHTML=g),2&e[0]&&x(s,"text-shadow",t[1]?t[1].textShadow:null),33554432&e[0]&&x(s,"color",t[25]),32768&e[0]&&w(n,"highlight",t[15]),268435457&e[0]&&x(n,"margin-left",t[0]?en(t[28]):null),268435457&e[0]&&x(n,"margin-right",t[0]?null:en(t[28]))},i:e,o:e,d(t){t&&f(n),b&&b.d(),M.d(),l=!1,i(h)}}}function Jn(t,e,n){let r,o,i,a,s,l,c,u,f,h,p,d,g,m,v;var y;const b=M();let{rtl:x}=e,{buffer:w}=e,{id:_}=e,{themeData:k}=e,{chroma:A}=e,{purifyHtml:T}=e,{blendMultiply:$=!1}=e,{blendMultiplyBackground:S=""}=e;if($&&!S)throw new Error("Property 'blendMultiplyBackground' missing from legend");let{color:N}=e,{label:O}=e,{key:L}=e,{width:z}=e,{pattern:C}=e,{line:R}=e,{min:D}=e,{max:P}=e,{highlight:j=!1}=e;const I={horizontal:90,vertical:0,"diagonal-up":135,"diagonal-down":45};let F,H,B,U,q;return t.$$set=t=>{"rtl"in t&&n(0,x=t.rtl),"buffer"in t&&n(1,w=t.buffer),"id"in t&&n(2,_=t.id),"themeData"in t&&n(3,k=t.themeData),"chroma"in t&&n(34,A=t.chroma),"purifyHtml"in t&&n(4,T=t.purifyHtml),"blendMultiply"in t&&n(5,$=t.blendMultiply),"blendMultiplyBackground"in t&&n(6,S=t.blendMultiplyBackground),"color"in t&&n(7,N=t.color),"label"in t&&n(8,O=t.label),"key"in t&&n(9,L=t.key),"width"in t&&n(10,z=t.width),"pattern"in t&&n(11,C=t.pattern),"line"in t&&n(12,R=t.line),"min"in t&&n(13,D=t.min),"max"in t&&n(14,P=t.max),"highlight"in t&&n(15,j=t.highlight)},t.$$.update=()=>{if(8&t.$$.dirty[0]&&n(20,r=et(k,"vis.base.legend.swatch.borderRadius")),1048576&t.$$.dirty[0]&&n(32,o="50%"===r?"dw-circle":"export-rect"),256&t.$$.dirty[0]&&n(19,i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=t.trim().indexOf(" "),n=t.trim().indexOf("-");return e<0&&n<0?t:n<0||e<n?t.slice(0,e):t.slice(0,n+1)}(O)),524544&t.$$.dirty[0]&&n(31,a=O.slice(i.length)),2048&t.$$.dirty[0]&&n(30,s=C?I[C.type]:0),2048&t.$$.dirty[0]&&n(29,l=C?C.lineGap+C.strokeWidth:0),8&t.$$.dirty[0]&&n(28,c=et(k,"vis.base.legend.text.marginRight",10)),8&t.$$.dirty[0]&&n(27,u=et(k,"vis.base.legend.swatch.marginRight",3)),4104&t.$$.dirty[0]&&n(17,f=R?et(k,"vis.d3-lines.legend.swatch.width",16):et(k,"vis.base.legend.swatch.width",et(k,"vis.base.legend.swatch.size",14))),4104&t.$$.dirty[0]&&n(26,h=R?et(k,"vis.d3-lines.legend.swatch.height",20):et(k,"vis.base.legend.swatch.height",et(k,"vis.base.legend.swatch.size",14))),8&t.$$.dirty[0]&&n(38,p=et(k,"colors.background","#ffffff")),136&t.$$.dirty[0]|136&t.$$.dirty[1]&&n(25,d=et(k,"vis.base.legend.text.useSwatchColor")&&function(t,e,n,r){const[o,i,a]=r(t).lch(),s=r(e).lch()[0];if(r.contrast(t,e)>=n)return t;const l=r.contrast("#000000",e),c=r.contrast("#ffffff",e),u=s>o&&l>=n||s<=o&&c<n;return u?f(0,o,10):f(o,100,10);function f(t,o,s){const l=.5*(t+o),c=r.lch(l,i,a),h=r.contrast(c,e);return Math.abs(h-n)<.2||!s?c.hex():h<n&&u||h>n&&!u?f(t,l,s-1):f(l,o,s-1)}}(N,p,4.5,A)),8&t.$$.dirty[0]&&n(18,g=et(k,"vis.d3-lines.legend.swatch.linecap","round")),4096&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(37,m=(null==R?void 0:R.symbol)?(null===n(35,y=null==R?void 0:R.symbol)||void 0===y?void 0:y.position)||"center":null),4096&t.$$.dirty[0]&&(null==R?void 0:R.symbol)&&n(36,B=(null==R?void 0:R.symbol.size)||5),135168&t.$$.dirty[0]|96&t.$$.dirty[1]&&(null==R?void 0:R.symbol)&&n(16,q="left"===m?B/2:"right"===m?f-B/2:f/2),462848&t.$$.dirty[0]|64&t.$$.dirty[1]){const t=R&&"butt"!==g?.5*R.strokeWidth:0;n(21,F=t),n(22,H=f-t),"left"===m?n(21,F=q):"right"===m&&n(22,H=q)}if(4096&t.$$.dirty[0]|32&t.$$.dirty[1]&&(null==R?void 0:R.symbol)){const t=dn(),e=R.symbol,r=Object.values(Fn).find((t=>t.name===e.shape));if(void 0===r)throw new Error("'".concat(e.shape,"' is not a valid shape"));const o=Math.pow(B/2,2)*Math.PI;r.draw(t,o),n(23,U=t.toString())}8&t.$$.dirty[0]&&n(24,v=et(k,"vis.d3-lines.symbols.style","fill"))},[x,w,_,k,T,$,S,N,O,L,z,C,R,D,P,j,q,f,g,i,r,F,H,U,v,d,h,u,c,l,s,a,o,b,A,y,B,m,p,function(e){E.call(this,t,e)},function(e){E.call(this,t,e)},()=>b("mouseenter",{key:L,label:O,color:N,min:D,max:P,value:L}),()=>b("mouseenter",{key:L,label:O,color:N,min:D,max:P,value:L})]}class Qn extends V{constructor(t){super(),X(this,t,Jn,Kn,s,{rtl:0,buffer:1,id:2,themeData:3,chroma:34,purifyHtml:4,blendMultiply:5,blendMultiplyBackground:6,color:7,label:8,key:9,width:10,pattern:11,line:12,min:13,max:14,highlight:15},null,[-1,-1])}}function tr(t,e,n){const{css:r,getProp:o,typography:i}=tn(t,e),a="vis.base.legend.caption",s="vis.base.labels.legend",l=o("vis.base.legend.alignment"),c="below"===n;return r(Jd||(Jd=Pd(["\n        text-align: ",";\n        &.dir-rtl {\n            direction: rtl;\n            text-align: ",";\n        }\n\n        padding-top: ",";\n        padding-bottom: ",";\n\n        width: ",";\n        height: ",";\n\n        .legend-title {\n            position: relative;\n            margin-bottom: ",";\n        }\n        .legend-title,\n        .legend-title span {\n            ","\n        }\n        .legend-title:not(.buffer) > span {\n            position: relative;\n            z-index: 10;\n        }\n        .legend-title.buffer {\n            position: absolute;\n            top: 0;\n            width: 100%;\n            z-index: 1;\n        }\n        text:not(.buffer) {\n            fill: currentColor;\n        }\n        g.group text.label,\n        g.group text.label tspan,\n        g.swatch text,\n        g.swatch text tspan {\n            font-size: ",";\n            font-family: ",";\n        }\n    "])),l,("left"===l?"right":"right"===l?"left":null)||l,en(c?o("vis.base.legend.padding.bottom",10):o("vis.base.legend.padding.top")),en(c?o("vis.base.legend.padding.top"):o("vis.base.legend.padding.bottom",10)),en(o("".concat(s,".width"))),en(o("".concat(s,".height"))),en(o("".concat(a,".margin.vertical"),4)),i(et(e,a),{fontWeight:700}),en(o("vis.base.labels.legend.fontSize")),o("vis.base.labels.legend.typeface"))}function er(t,e){const{css:n}=tn(t,e);return n(Qd||(Qd=Pd(["\n        /* general styles */\n        svg {\n            overflow: visible;\n            display: block;\n        }\n\n        &.dir-rtl {\n            direction: rtl;\n        }\n\n        /* shared styles */\n        g.group text.label,\n        g.group text.label tspan {\n            dominant-baseline: middle;\n        }\n\n        g.swatch path.tick {\n            shape-rendering: crispEdges;\n        }\n\n        g.swatch text {\n            transition: opacity 0.15s ease-in-out;\n        }\n\n        &.vertical {\n            & g.swatch text,\n            & g.swatch text tspan {\n                text-anchor: start;\n                dominant-baseline: middle;\n            }\n\n            & g.labels text,\n            & g.labels text tspan {\n                text-anchor: start;\n            }\n\n            & .group text.label,\n            & .group text.label tspan {\n                dominant-baseline: middle;\n            }\n\n            &:not(.dir-rtl) {\n                & .group text.label,\n                & .group text.label tspan {\n                    text-anchor: end;\n                }\n            }\n\n            &.dir-rtl {\n                & .group text.label,\n                & .group text.label tspan {\n                    text-anchor: start;\n                }\n            }\n        }\n\n        &.horizontal {\n            & g.swatch text,\n            & g.swatch text tspan {\n                text-anchor: middle;\n                dominant-baseline: hanging;\n            }\n\n            & g.labels text,\n            & g.labels text tspan {\n                dominant-baseline: hanging;\n            }\n        }\n\n        & g.highlighted g.swatch {\n            & text {\n                opacity: 0.3;\n            }\n\n            & rect,\n            & path {\n                opacity: 0.2;\n            }\n\n            &.highlight {\n                & text,\n                & rect,\n                & path {\n                    opacity: 1;\n                }\n            }\n        }\n    "])))}function nr(t){let{colors:e,title:n="",format:r,swatches:o,limits:i}=t;if("function"==typeof e&&i){const[t,e]=[i[0],i[i.length-1]].map(r);return"Continuous color legend".concat(n?', titled "'.concat(n,'"'):"",", ranging from ").concat(t," to ").concat(e,".")}{if(!o||!o.length)return"";const[t,e]=[o[0].label,o[o.length-1].label].map((t=>t.replace("<","less than").replace("≥","greater or equal than")));return"Color legend with ".concat(o.length," steps ").concat(n?', titled "'.concat(n,'"'):"",", ranging from ").concat(t," to ").concat(e,".")}}function rr(t,e){if(!t)return"";const n=t.map((t=>t.label)),r=n.length<=5?"The items are ".concat(n.slice(0,-1).join(", ")," and ").concat(n[n.length-1]):"The first 3 items are ".concat(n.slice(0,2).join(", ")," and ").concat(n[2],". The last one is ").concat(n[n.length-1]);return 1===n.length?e?'Category legend titled "'.concat(e,'" with 1 item, ').concat(n[0],"."):"Category legend with 1 item, ".concat(n[0],"."):(n.length,e?"Category legend with ".concat(n.length,' items, titled "').concat(e,'". ').concat(r,"."):"Category legend with ".concat(n.length," items. ").concat(r,"."))}function or(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:700,r=null,o=!1,i=!0;return{set(a){let s=a;"string"!=typeof a&&(s=JSON.stringify(a)),r!==s&&(e&&clearTimeout(e),e=setTimeout((()=>{i=!1,t(a)}),i?n:0)),r=s,o=!0},clear(){o&&null===r||(r=null,i=!0,e&&clearTimeout(e),t(null)),o=!0},get:()=>r}}function ir(t,e){const n="ontouchstart"in window||navigator.maxTouchPoints,r=or((t=>{i&&i("string"==typeof t||"number"==typeof t?t:null)}),n?0:700),o=e=>{r.clear(),t(e.type)};let i;return{onMouseEnter:n=>{e&&r.set(n.detail.key),t(n.type,n.detail)},onMouseLeave:o,onClick:t=>{n&&t.target instanceof HTMLElement&&t.target.closest("#chart")&&o(new MouseEvent("mouseleave"))},onHighlight:t=>{i=t}}}function ar(t){const e={size:5,color:t};return Object.assign(Object.assign({},e),{textStroke:"".concat(e.size,"px ").concat(e.color),textShadow:"1px 1px 0px ".concat(e.color,", 0px 1px 0px ").concat(e.color,", -1px 1px 0px ").concat(e.color,", 1px -1px 0px ").concat(e.color,", 0px -1px 0px ").concat(e.color,", -1px -1px 0px ").concat(e.color,", 1px 0px 0px ").concat(e.color,", 0px 0px 0px ").concat(e.color,", -1px 0px 0px ").concat(e.color),svgTextStyles:{fill:e.color,stroke:e.color,"stroke-width":e.size,"stroke-linejoin":"round"}})}function sr(t,e,n){const r=t.slice();return r[34]=e[n],r[36]=n,r}function lr(t){let e,n,r=t[17],o=[];for(let e=0;e<r.length;e+=1)o[e]=cr(sr(t,r,e));const i=t=>q(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=m()},m(t,r){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,r);u(t,e,r),n=!0},p(t,n){if(5118329&n[0]){let a;for(r=t[17],a=0;a<r.length;a+=1){const i=sr(t,r,a);o[a]?(o[a].p(i,n),U(o[a],1)):(o[a]=cr(i),o[a].c(),U(o[a],1),o[a].m(e.parentNode,e))}for(H(),a=r.length;a<o.length;a+=1)i(a);B()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)U(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)q(o[t]);n=!1},d(t){h(o,t),t&&f(e)}}}function cr(t){let e,r;const o=[t[34],{id:"".concat(t[22],"-").concat(t[36])},{rtl:t[4]},{themeData:t[8]},{chroma:t[5]},{purifyHtml:t[6]},{buffer:t[18]},{highlight:t[0]?t[0]===t[34].key:t[3].includes(t[34].key)},{blendMultiply:t[11]},{blendMultiplyBackground:t[12]}];let i={};for(let t=0;t<o.length;t+=1)i=n(i,o[t]);return e=new Qn({props:i}),e.$on("mouseenter",t[19]),{c(){W(e.$$.fragment)},m(t,n){Y(e,t,n),r=!0},p(t,n){const r=4594041&n[0]?function(t,e){const n={},r={},o={$$scope:1};let i=t.length;for(;i--;){const a=t[i],s=e[i];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)o[t]||(n[t]=s[t],o[t]=1);t[i]=s}else for(const t in a)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(o,[131072&n[0]&&(i=t[34],"object"==typeof i&&null!==i?i:{}),4194304&n[0]&&{id:"".concat(t[22],"-").concat(t[36])},16&n[0]&&{rtl:t[4]},256&n[0]&&{themeData:t[8]},32&n[0]&&{chroma:t[5]},64&n[0]&&{purifyHtml:t[6]},262144&n[0]&&{buffer:t[18]},131081&n[0]&&{highlight:t[0]?t[0]===t[34].key:t[3].includes(t[34].key)},2048&n[0]&&{blendMultiply:t[11]},4096&n[0]&&{blendMultiplyBackground:t[12]}]):{};var i;e.$set(r)},i(t){r||(U(e.$$.fragment,t),r=!0)},o(t){q(e.$$.fragment,t),r=!1},d(t){G(e,t)}}}function ur(t){let e,n,r,o,i,a=t[7]&&lr(t);return{c(){e=p("div"),a&&a.c(),y(e,"class",n=["legend-categories",t[15],t[14],t[13],t[2]?"horizontal":"vertical"].join(" ")),w(e,"highlighted",""!==t[0]||t[3].length)},m(n,s){u(n,e,s),a&&a.m(e,null),r=!0,o||(i=v(e,"mouseleave",t[20]),o=!0)},p(t,o){t[7]?a?(a.p(t,o),128&o[0]&&U(a,1)):(a=lr(t),a.c(),U(a,1),a.m(e,null)):a&&(H(),q(a,1,1,(()=>{a=null})),B()),(!r||57348&o[0]&&n!==(n=["legend-categories",t[15],t[14],t[13],t[2]?"horizontal":"vertical"].join(" ")))&&y(e,"class",n),(!r||57357&o[0])&&w(e,"highlighted",""!==t[0]||t[3].length)},i(t){r||(U(a),r=!0)},o(t){q(a),r=!1},d(t){t&&f(e),a&&a.d(),o=!1,i()}}}function fr(t){let e,n,r,o;return e=new tt({props:{title:t[1],buffer:t[18],className:["category-legend",t[2]?"horizontal":"vertical",t[14],t[13],t[16]].join(" "),width:en(t[9]),height:en(t[10]),ariaLabel:rr(t[17],t[1]),purifyHtml:t[6],$$slots:{default:[ur]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(i,a){Y(e,i,a),n=!0,r||(o=v(window,"click",t[21]),r=!0)},p(t,n){const r={};2&n[0]&&(r.title=t[1]),262144&n[0]&&(r.buffer=t[18]),90116&n[0]&&(r.className=["category-legend",t[2]?"horizontal":"vertical",t[14],t[13],t[16]].join(" ")),512&n[0]&&(r.width=en(t[9])),1024&n[0]&&(r.height=en(t[10])),131074&n[0]&&(r.ariaLabel=rr(t[17],t[1])),64&n[0]&&(r.purifyHtml=t[6]),457213&n[0]|64&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){G(e,t),r=!1,o()}}}function hr(t,e,n){let r,o,i,a,s,l,c,u;var f;const h=M();let{title:p=""}=e,{horizontal:d=!0}=e,{highlight:g=!1}=e,{defaultHighlighted:m=[]}=e,{reverse:v=!1}=e,{rtl:y=!1}=e,{emotion:b}=e,{chroma:x}=e,{purifyHtml:w}=e,{swatches:_}=e,{themeData:k={}}=e,{width:E="100%"}=e,{height:A="auto"}=e,{position:T="above"}=e,{buffer:$=!1}=e,{blendMultiply:S=!1}=e,{blendMultiplyBackground:N=""}=e,{highlightedKey:O=""}=e,{highlightedValue:L=null}=e;const{onMouseEnter:z,onMouseLeave:C,onClick:R,onHighlight:D}=ir(h,g);D((t=>{n(0,O=t||""),""===O&&n(23,L=null)}));const P=Math.random().toString().replace(".","");return t.$$set=t=>{"title"in t&&n(1,p=t.title),"horizontal"in t&&n(2,d=t.horizontal),"highlight"in t&&n(24,g=t.highlight),"defaultHighlighted"in t&&n(3,m=t.defaultHighlighted),"reverse"in t&&n(25,v=t.reverse),"rtl"in t&&n(4,y=t.rtl),"emotion"in t&&n(26,b=t.emotion),"chroma"in t&&n(5,x=t.chroma),"purifyHtml"in t&&n(6,w=t.purifyHtml),"swatches"in t&&n(7,_=t.swatches),"themeData"in t&&n(8,k=t.themeData),"width"in t&&n(9,E=t.width),"height"in t&&n(10,A=t.height),"position"in t&&n(27,T=t.position),"buffer"in t&&n(28,$=t.buffer),"blendMultiply"in t&&n(11,S=t.blendMultiply),"blendMultiplyBackground"in t&&n(12,N=t.blendMultiplyBackground),"highlightedKey"in t&&n(0,O=t.highlightedKey),"highlightedValue"in t&&n(23,L=t.highlightedValue)},t.$$.update=()=>{256&t.$$.dirty[0]&&n(31,r=et(k,"colors.background","white")),268435456&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(18,o=$&&ar(r)),32&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(30,i=x(r).lab()[0]<50),33554560&t.$$.dirty[0]&&n(17,a=v?_.slice(0).reverse():_),201326848&t.$$.dirty[0]&&n(16,s=b&&tr(b,k,T)),67109120&t.$$.dirty[0]&&n(15,l=b&&function(t,e){const{css:n,getProp:r,typography:o}=tn(t,e);return n(tg||(tg=Pd(["\n        line-height: 1.4;\n        ","\n\n        svg {\n            overflow: visible;\n            border-radius: ",";\n            vertical-align: middle;\n            position: relative;\n            z-index: 10;\n        }\n\n        .legend-color {\n            display: inline-block;\n            vertical-align: middle;\n            border-radius: ",";\n            position: relative;\n            z-index: 10;\n        }\n\n        &:not(.dir-rtl) .legend-color {\n            margin-right: 3px;\n        }\n        &.dir-rtl .legend-color {\n            margin-left: 3px;\n        }\n\n        .legend-no-break {\n            white-space: nowrap;\n            display: inline-block;\n            position: relative;\n        }\n\n        .legend-label {\n            display: inline;\n            white-space: normal;\n            vertical-align: middle;\n            position: relative;\n        }\n        .legend-label span {\n            position: relative;\n            z-index: 10;\n        }\n        .legend-label.buffer {\n            position: absolute;\n            right: 0;\n            z-index: 1;\n        }\n\n        .legend-swatch {\n            margin-bottom: 3px;\n            margin-bottom: ",";\n        }\n        &.horizontal:not(.dir-rtl) .legend-swatch {\n            margin-right: 10px;\n        }\n        &.horizontal.dir-rtl .legend-swatch {\n            margin-left: 10px;\n        }\n        &.horizontal .legend-swatch {\n            display: inline;\n        }\n        &.horizontal .legend-swatch .legend-color {\n            display: inline-block;\n        }\n\n        &.highlighted .legend-swatch {\n            opacity: 0.3;\n            transition: opacity 0.15s ease-in-out;\n        }\n        &.highlighted.is-dark .legend-swatch {\n            opacity: 0.4;\n        }\n        &.highlighted .legend-swatch.highlight {\n            opacity: 1;\n        }\n    "])),o(et(e,"vis.base.labels.legend")),en(r("vis.base.legend.swatch.borderRadius")),en(r("vis.base.legend.swatch.borderRadius")),en(r("vis.base.legend.rowSpacing")))}(b,k)),16&t.$$.dirty[0]&&n(14,c=y?"dir-rtl":"dir-ltr"),1073741824&t.$$.dirty[0]&&n(13,u=i?"is-dark":""),545259648&t.$$.dirty[0]&&n(0,O=(null===n(29,f=_.find((t=>{if(null!==L&&t.min&&t.max)return L>=t.min&&L<t.max})))||void 0===f?void 0:f.key)||"")},[O,p,d,m,y,x,w,_,k,E,A,S,N,u,c,l,s,a,o,z,C,R,P,L,g,v,b,T,$,f,i,r]}class pr extends V{constructor(t){super(),X(this,t,hr,fr,s,{title:1,horizontal:2,highlight:24,defaultHighlighted:3,reverse:25,rtl:4,emotion:26,chroma:5,purifyHtml:6,swatches:7,themeData:8,width:9,height:10,position:27,buffer:28,blendMultiply:11,blendMultiplyBackground:12,highlightedKey:0,highlightedValue:23},null,[-1,-1])}}function dr(t,e,n){const r=t.slice();return r[63]=e[n],r}function gr(t,e,n){const r=t.slice();return r[66]=e[n],r[68]=n,r}function mr(t,e,n){const r=t.slice();return r[69]=e[n],r[71]=n,r}function vr(t,e,n){const r=t.slice();return r[69]=e[n],r[71]=n,r}function yr(t){let e,n,r,o,i,a,s,l;return{c(){e=d("g"),n=d("path"),o=d("rect"),y(n,"class","triangle"),y(n,"d",t[19]),y(n,"transform",r="translate(".concat(t[18].join(","),")")),x(n,"fill",t[24].svgTextStyles.fill),x(n,"stroke",t[24].svgTextStyles.stroke),x(n,"stroke-width",t[24].svgTextStyles["stroke-width"]),x(n,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"]),y(e,"class","highlight"),y(e,"aria-hidden","true"),y(e,"style",t[15]),y(o,"class","buffer"),y(o,"width",i=(t[3]?t[4]:t[12])+t[24].size),y(o,"height",a=(t[3]?t[12]:t[5])+t[24].size),y(o,"x",s=-t[24].size/2),y(o,"y",l=-t[24].size/2),x(o,"fill",t[24].color),x(o,"pointer-events","none")},m(t,r){u(t,e,r),c(e,n),u(t,o,r)},p(t,c){524288&c[0]&&y(n,"d",t[19]),262144&c[0]&&r!==(r="translate(".concat(t[18].join(","),")"))&&y(n,"transform",r),16777216&c[0]&&x(n,"fill",t[24].svgTextStyles.fill),16777216&c[0]&&x(n,"stroke",t[24].svgTextStyles.stroke),16777216&c[0]&&x(n,"stroke-width",t[24].svgTextStyles["stroke-width"]),16777216&c[0]&&x(n,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"]),32768&c[0]&&y(e,"style",t[15]),16781336&c[0]&&i!==(i=(t[3]?t[4]:t[12])+t[24].size)&&y(o,"width",i),16781352&c[0]&&a!==(a=(t[3]?t[12]:t[5])+t[24].size)&&y(o,"height",a),16777216&c[0]&&s!==(s=-t[24].size/2)&&y(o,"x",s),16777216&c[0]&&l!==(l=-t[24].size/2)&&y(o,"y",l),16777216&c[0]&&x(o,"fill",t[24].color)},d(t){t&&f(e),t&&f(o)}}}function br(t){let e,n,r;return{c(){e=d("rect"),y(e,"width",n=t[3]?t[4]:t[12]),y(e,"height",r=t[3]?t[12]:t[5]),x(e,"fill",t[23])},m(t,n){u(t,e,n)},p(t,o){4120&o[0]&&n!==(n=t[3]?t[4]:t[12])&&y(e,"width",n),4136&o[0]&&r!==(r=t[3]?t[12]:t[5])&&y(e,"height",r),8388608&o[0]&&x(e,"fill",t[23])},d(t){t&&f(e)}}}function xr(t){let e,n,r,o=t[66],i=[];for(let e=0;e<o.length;e+=1)i[e]=wr(vr(t,o,e));return{c(){e=d("text");for(let t=0;t<i.length;t+=1)i[t].c();y(e,"class",n=["buffer",t[21][t[68]]].join(" ")),y(e,"transform",r="translate(".concat(t[20][t[68]],")")),x(e,"fill",t[24].svgTextStyles.fill),x(e,"stroke",t[24].svgTextStyles.stroke),x(e,"stroke-width",t[24].svgTextStyles["stroke-width"]),x(e,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"])},m(t,n){u(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null)},p(t,a){if(512&a[0]){let n;for(o=t[66],n=0;n<o.length;n+=1){const r=vr(t,o,n);i[n]?i[n].p(r,a):(i[n]=wr(r),i[n].c(),i[n].m(e,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}2097152&a[0]&&n!==(n=["buffer",t[21][t[68]]].join(" "))&&y(e,"class",n),1048576&a[0]&&r!==(r="translate(".concat(t[20][t[68]],")"))&&y(e,"transform",r),16777216&a[0]&&x(e,"fill",t[24].svgTextStyles.fill),16777216&a[0]&&x(e,"stroke",t[24].svgTextStyles.stroke),16777216&a[0]&&x(e,"stroke-width",t[24].svgTextStyles["stroke-width"]),16777216&a[0]&&x(e,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"])},d(t){t&&f(e),h(i,t)}}}function wr(t){let e,n,r=t[69]+"";return{c(){e=d("tspan"),n=g(r),y(e,"x","0"),y(e,"dy",0===t[71]?0:$r)},m(t,r){u(t,e,r),c(e,n)},p(t,e){512&e[0]&&r!==(r=t[69]+"")&&b(n,r)},d(t){t&&f(e)}}}function _r(t){let e,n,r=t[69]+"";return{c(){e=d("tspan"),n=g(r),y(e,"x","0"),y(e,"dy",0===t[71]?0:$r)},m(t,r){u(t,e,r),c(e,n)},p(t,e){512&e[0]&&r!==(r=t[69]+"")&&b(n,r)},d(t){t&&f(e)}}}function kr(t){let e,n,r,o=t[0]&&t[24]&&xr(t),i=t[66],a=[];for(let e=0;e<i.length;e+=1)a[e]=_r(mr(t,i,e));return{c(){o&&o.c(),e=d("text");for(let t=0;t<a.length;t+=1)a[t].c();y(e,"class",n=t[21][t[68]]),y(e,"transform",r="translate(".concat(t[20][t[68]],")"))},m(t,n){o&&o.m(t,n),u(t,e,n);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,null)},p(t,s){if(t[0]&&t[24]?o?o.p(t,s):(o=xr(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),512&s[0]){let n;for(i=t[66],n=0;n<i.length;n+=1){const r=mr(t,i,n);a[n]?a[n].p(r,s):(a[n]=_r(r),a[n].c(),a[n].m(e,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}2097152&s[0]&&n!==(n=t[21][t[68]])&&y(e,"class",n),1048576&s[0]&&r!==(r="translate(".concat(t[20][t[68]],")"))&&y(e,"transform",r)},d(t){o&&o.d(t),t&&f(e),h(a,t)}}}function Mr(t){let e,n;return{c(){e=d("text"),n=g(t[17]),y(e,"class","buffer"),x(e,"fill",t[24].svgTextStyles.fill),x(e,"stroke",t[24].svgTextStyles.stroke),x(e,"stroke-width",t[24].svgTextStyles["stroke-width"]),x(e,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"]),x(e,"pointer-events","none")},m(t,r){u(t,e,r),c(e,n)},p(t,r){131072&r[0]&&b(n,t[17]),16777216&r[0]&&x(e,"fill",t[24].svgTextStyles.fill),16777216&r[0]&&x(e,"stroke",t[24].svgTextStyles.stroke),16777216&r[0]&&x(e,"stroke-width",t[24].svgTextStyles["stroke-width"]),16777216&r[0]&&x(e,"stroke-linejoin",t[24].svgTextStyles["stroke-linejoin"])},d(t){t&&f(e)}}}function Er(t){let e,n;return{c(){e=d("stop"),y(e,"offset",100*t[63]+"%"),y(e,"stop-color",n=t[31](t[63],t[2]))},m(t,n){u(t,e,n)},p(t,r){4&r[0]&&n!==(n=t[31](t[63],t[2]))&&y(e,"stop-color",n)},d(t){t&&f(e)}}}function Ar(t){let e,n,r,o,a,s,l,p,_,k,M,E,A,T,$,S,N,O,L,z,C,R,D,P=t[0]&&t[24]&&yr(t),j=t[8]&&br(t),I=t[9],F=[];for(let e=0;e<I.length;e+=1)F[e]=kr(gr(t,I,e));let H=t[0]&&t[24]&&Mr(t),B=t[29],U=[];for(let e=0;e<B.length;e+=1)U[e]=Er(dr(t,B,e));return{c(){e=d("svg"),n=d("g"),P&&P.c(),r=m(),j&&j.c(),o=d("rect"),l=d("g");for(let t=0;t<F.length;t+=1)F[t].c();_=d("g"),k=d("path"),E=d("g"),H&&H.c(),A=d("text"),T=g(t[17]),S=d("defs"),N=d("linearGradient");for(let t=0;t<U.length;t+=1)U[t].c();y(o,"width",a=t[3]?t[4]:t[12]),y(o,"height",s=t[3]?t[12]:t[5]),x(o,"fill","url(#".concat(t[30],")")),x(o,"mix-blend-mode",t[8]?"screen":null),y(l,"class","labels"),y(l,"aria-hidden","true"),y(l,"transform",p="translate(".concat(t[22],")")),y(k,"class","triangle"),y(k,"d",t[19]),y(k,"transform",M="translate(".concat(t[18].join(","),")")),y(E,"class","text"),y(E,"transform",$="translate(".concat(t[3]?[0,t[12]+12]:[t[6]?-12:t[12]+12,0],")")),y(_,"class","highlight"),y(_,"aria-hidden","true"),y(_,"style",t[15]),w(n,"highlighted",null!==t[13]&&t[10]),y(N,"id",t[30]),y(N,"x2",O=t[3]?1:0),y(N,"y2",L=t[3]?0:1),y(e,"width",z=t[16].width),y(e,"height",C=t[16].height),w(e,"no-transition",t[14])},m(i,a){u(i,e,a),c(e,n),P&&P.m(n,null),c(n,r),j&&j.m(n,null),c(n,o),c(n,l);for(let t=0;t<F.length;t+=1)F[t]&&F[t].m(l,null);c(n,_),c(_,k),c(_,E),H&&H.m(E,null),c(E,A),c(A,T),t[53](n),c(e,S),c(S,N);for(let t=0;t<U.length;t+=1)U[t]&&U[t].m(N,null);R||(D=[v(e,"mouseenter",t[33]),v(e,"mouseleave",t[34]),v(e,"mousemove",t[35])],R=!0)},p(t,i){if(t[0]&&t[24]?P?P.p(t,i):(P=yr(t),P.c(),P.m(n,r)):P&&(P.d(1),P=null),t[8]?j?j.p(t,i):(j=br(t),j.c(),j.m(n,o)):j&&(j.d(1),j=null),4120&i[0]&&a!==(a=t[3]?t[4]:t[12])&&y(o,"width",a),4136&i[0]&&s!==(s=t[3]?t[12]:t[5])&&y(o,"height",s),256&i[0]&&x(o,"mix-blend-mode",t[8]?"screen":null),19923457&i[0]){let e;for(I=t[9],e=0;e<I.length;e+=1){const n=gr(t,I,e);F[e]?F[e].p(n,i):(F[e]=kr(n),F[e].c(),F[e].m(l,null))}for(;e<F.length;e+=1)F[e].d(1);F.length=I.length}if(4194304&i[0]&&p!==(p="translate(".concat(t[22],")"))&&y(l,"transform",p),524288&i[0]&&y(k,"d",t[19]),262144&i[0]&&M!==(M="translate(".concat(t[18].join(","),")"))&&y(k,"transform",M),t[0]&&t[24]?H?H.p(t,i):(H=Mr(t),H.c(),H.m(E,A)):H&&(H.d(1),H=null),131072&i[0]&&b(T,t[17]),4168&i[0]&&$!==($="translate(".concat(t[3]?[0,t[12]+12]:[t[6]?-12:t[12]+12,0],")"))&&y(E,"transform",$),32768&i[0]&&y(_,"style",t[15]),9216&i[0]&&w(n,"highlighted",null!==t[13]&&t[10]),536870916&i[0]|1&i[1]){let e;for(B=t[29],e=0;e<B.length;e+=1){const n=dr(t,B,e);U[e]?U[e].p(n,i):(U[e]=Er(n),U[e].c(),U[e].m(N,null))}for(;e<U.length;e+=1)U[e].d(1);U.length=B.length}8&i[0]&&O!==(O=t[3]?1:0)&&y(N,"x2",O),8&i[0]&&L!==(L=t[3]?0:1)&&y(N,"y2",L),65536&i[0]&&z!==(z=t[16].width)&&y(e,"width",z),65536&i[0]&&C!==(C=t[16].height)&&y(e,"height",C),16384&i[0]&&w(e,"no-transition",t[14])},d(n){n&&f(e),P&&P.d(),j&&j.d(),h(F,n),H&&H.d(),t[53](null),h(U,n),R=!1,i(D)}}}function Tr(t){let e,n,r,o;return e=new tt({props:{title:t[1],ariaLabel:t[25],buffer:t[24],className:["color-legend","continuous",t[3]?"horizontal":"vertical",t[6]?"dir-rtl":"dir-ltr",t[28],t[27],t[26]].join(" "),width:t[3]?en(t[4]):void 0,purifyHtml:t[7],$$slots:{default:[Ar]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(i,a){Y(e,i,a),n=!0,r||(o=v(window,"click",t[32]),r=!0)},p(t,n){const r={};2&n[0]&&(r.title=t[1]),33554432&n[0]&&(r.ariaLabel=t[25]),16777216&n[0]&&(r.buffer=t[24]),469762120&n[0]&&(r.className=["color-legend","continuous",t[3]?"horizontal":"vertical",t[6]?"dir-rtl":"dir-ltr",t[28],t[27],t[26]].join(" ")),24&n[0]&&(r.width=t[3]?en(t[4]):void 0),128&n[0]&&(r.purifyHtml=t[7]),33554301&n[0]|2048&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){G(e,t),r=!1,o()}}}const $r=15;function Sr(t,e,n){let r,o,i,a,s,l,c,u,f,h,p,d,g,m,v,y,b,{title:x=""}=e,{colors:w=(()=>"fff")}=e,{limits:_=[0,100]}=e,{format:k=(t=>String(+t.toFixed(2)))}=e,{labels:E}=e,{horizontal:A=!0}=e,{width:$=100}=e,{height:S=200}=e,{position:N="above"}=e,{highlight:O=!1}=e,{rtl:L=!1}=e,{reverse:C=!1}=e,{buffer:R=!1}=e,{emotion:D}=e,{purifyHtml:P}=e,{themeData:j={}}=e,{blendMultiply:I=!1}=e,{blendMultiplyBackground:F=""}=e;const H=new Promise((t=>{b=t})),B=M();let U=!1,q=!1;const W=[...Array(17).keys()].map((t=>t/16)),Y="g-".concat(Math.floor(1e6*Math.random()).toString(32));function G(t){return q?t<.5?u[0]+2*t*(u[1]-u[0]):u[1]+2*(t-.5)*(u[2]-u[1]):u[0]+t*(u[1]-u[0])}let X=[],V=!1,Z=!1,{highlightedValue:K=null}=e,J=null;const Q={x:null,y:null};let tt=null,nt=null;const{onMouseEnter:rt,onMouseLeave:ot,onClick:it,onHighlight:at}=ir(B,O);let st;at((t=>{n(10,V=null!==t)}));const lt={width:100,height:100};return t.$$set=t=>{"title"in t&&n(1,x=t.title),"colors"in t&&n(2,w=t.colors),"limits"in t&&n(36,_=t.limits),"format"in t&&n(37,k=t.format),"labels"in t&&n(38,E=t.labels),"horizontal"in t&&n(3,A=t.horizontal),"width"in t&&n(4,$=t.width),"height"in t&&n(5,S=t.height),"position"in t&&n(39,N=t.position),"highlight"in t&&n(40,O=t.highlight),"rtl"in t&&n(6,L=t.rtl),"reverse"in t&&n(41,C=t.reverse),"buffer"in t&&n(0,R=t.buffer),"emotion"in t&&n(42,D=t.emotion),"purifyHtml"in t&&n(7,P=t.purifyHtml),"themeData"in t&&n(43,j=t.themeData),"blendMultiply"in t&&n(8,I=t.blendMultiply),"blendMultiplyBackground"in t&&n(44,F=t.blendMultiplyBackground),"highlightedValue"in t&&n(46,K=t.highlightedValue)},t.$$.update=()=>{if(6400&t.$$.dirty[1]&&n(28,r=D&&tr(D,j,N)),6144&t.$$.dirty[1]&&n(27,o=D&&er(D,j)),6144&t.$$.dirty[1]&&n(26,i=D&&function(t,e){const{css:n}=tn(t,e);return n(eg||(eg=Pd(["\n        &.vertical {\n            g.labels text,\n            g.labels text tspan {\n                &.min {\n                    dominant-baseline: hanging;\n                }\n                &.center {\n                    dominant-baseline: middle;\n                }\n                &.max {\n                    dominant-baseline: ideographic;\n                }\n            }\n        }\n        &.horizontal {\n            g.labels text,\n            g.labels text tspan {\n                &.center {\n                    text-anchor: middle;\n                }\n            }\n            &:not(.dir-rtl) g.labels text,\n            &:not(.dir-rtl) g.labels text tspan {\n                &.min {\n                    text-anchor: start;\n                }\n                &.max {\n                    text-anchor: end;\n                }\n            }\n            &.dir-rtl g.labels text,\n            &.dir-rtl g.labels text tspan {\n                &.min {\n                    text-anchor: end;\n                }\n                &.max {\n                    text-anchor: start;\n                }\n            }\n        }\n        g.highlight {\n            display: none;\n            transition: transform 0.4s cubic-bezier(1, 0, 0, 1);\n        }\n        .no-transition g.highlight {\n            transition: none;\n        }\n        .highlighted g.highlight {\n            display: block;\n            & path.triangle {\n                fill: #000;\n            }\n            & text {\n                font-size: 14px;\n            }\n        }\n        .highlighted g.labels text {\n            opacity: 0.3;\n        }\n        &.horizontal .highlighted rect {\n            cursor: text;\n        }\n        &.vertical .highlighted rect {\n            cursor: vertical-text;\n        }\n        &.horizontal g.highlight text,\n        &.horizontal g.highlight text tspan {\n            text-anchor: middle;\n            dominant-baseline: hanging;\n        }\n        &.vertical g.highlight text,\n        &.vertical g.highlight text tspan {\n            dominant-baseline: mathematical;\n        }\n    "])))}(D,j)),72&t.$$.dirty[0]|1024&t.$$.dirty[1]&&n(47,U=L&&A?!C:C),32&t.$$.dirty[1]&&n(48,q=3===_.length&&void 0!==_[2]),6&t.$$.dirty[0]|96&t.$$.dirty[1]&&n(25,a=nr({colors:w,title:x,format:k,limits:_})),1&t.$$.dirty[0]|4096&t.$$.dirty[1]&&n(24,s=R&&ar(et(j,"colors.background","white"))),4096&t.$$.dirty[1]&&n(12,l=et(j,"vis.base.legend.ruler.thickness",13)),4096&t.$$.dirty[1]&&n(52,c=et(j,"vis.base.legend.swatch.marginRight",3)),65568&t.$$.dirty[1]&&(u=U?[..._].reverse():[..._]),4096&t.$$.dirty[1]&&n(23,f=et(j,"colors.background","#ffffff")),65760&t.$$.dirty[1]){const t=[...E||_.map(k)];U&&t.reverse(),n(9,X=t.map((t=>[...t.split("<br>")])))}if(4168&t.$$.dirty[0]|2097152&t.$$.dirty[1]&&n(22,h=(A?[0,l+c]:[L?-c:l+c,0]).join(",")),512&t.$$.dirty[0]|131072&t.$$.dirty[1]&&n(21,p=X.map(((t,e)=>0===e?"min":1===e&&q?"center":"max"))),568&t.$$.dirty[0]|131072&t.$$.dirty[1]&&n(20,d=X.map(((t,e)=>(A?[$*e/(q?2:1),0]:[0,S*e/(q?2:1)]).join(",")))),72&t.$$.dirty[0]&&n(19,g=A?"M-5,0 L 5,0 L 0,-7 Z":L?"M0,5 L7,0 L 0,-5 Z":"M0,-5 L-7,0 L 0,5 Z"),4168&t.$$.dirty[0]&&n(18,m=A?[0,l+7]:[L?-7:l+7,0]),1024&t.$$.dirty[0]|32768&t.$$.dirty[1]&&null!==K&&(n(14,Z=!V),n(10,V=!0),n(49,J=K)),294912&t.$$.dirty[1]&&null===K&&null!==J&&(n(14,Z=!1),n(10,V=!1)),56&t.$$.dirty[0]|524288&t.$$.dirty[1]){const t=A?Q.x:Q.y;n(51,tt=null!==t?Math.min(1,Math.max(0,t/(A?$:S))):null)}if(1081344&t.$$.dirty[1]&&n(13,v=null!==K?K:null!==tt?G(tt):null),8192&t.$$.dirty[0]|64&t.$$.dirty[1]&&n(17,y=null!==v?k(v):""),56&t.$$.dirty[0]|1081344&t.$$.dirty[1]){const t=null!==K?function(t){return q?(U?t>u[1]:t<u[1])?.5*(t-u[0])/(u[1]-u[0]):.5+.5*(t-u[1])/(u[2]-u[1]):(t-u[0])/(u[1]-u[0])}(K):null!==tt?tt:null;n(15,nt=null!==t?"transform: translate(".concat((A?[t*$,0]:[0,t*S]).map((t=>"".concat(t,"px"))),")"):null)}2064&t.$$.dirty[0]&&og((function(){if(!st)return;const t=R;return n(0,R=!1),rg(z,(function(e){const r=st.getBoundingClientRect();n(16,lt.height=r.height,lt),n(16,lt.width=r.width,lt),!A&&L&&st.setAttribute("transform","translate(".concat(r.width-l,",0)")),n(0,R=t),b(null)}))}))()},[R,x,w,A,$,S,L,P,I,X,V,st,l,v,Z,nt,lt,y,m,g,d,p,h,f,s,a,i,o,r,W,Y,function(t,e){const n=U?1-t:t;return e(q?n<=.5?2*n*(_[1]-_[0])+_[0]:2*(n-.5)*(_[2]-_[1])+_[1]:n*(_[1]-_[0])+_[0])},it,function(){O&&n(14,Z=!0)},function(t){O&&(n(14,Z=!1),n(50,Q.x=null,Q),n(50,Q.y=null,Q),ot(t))},og((function(t){if(!O)return;const e=t.currentTarget.getBoundingClientRect();return n(50,Q.y=t.clientY-e.y,Q),n(50,Q.x=t.clientX-e.x,Q),rg(z,(function(){if(null===tt||null===v)return;const t=G(tt+(U?.05:-.05)),e=G(tt+(U?-.05:.05));rt(new CustomEvent("mouseenter",{detail:{key:v,min:t,max:e}}))}))})),_,k,E,N,O,C,D,j,F,H,K,U,q,J,Q,tt,c,function(t){T[t?"unshift":"push"]((()=>{st=t,n(11,st)}))}]}class Nr extends V{constructor(t){super(),X(this,t,Sr,Tr,s,{title:1,colors:2,limits:36,format:37,labels:38,horizontal:3,width:4,height:5,position:39,highlight:40,rtl:6,reverse:41,buffer:0,emotion:42,purifyHtml:7,themeData:43,blendMultiply:8,blendMultiplyBackground:44,rendered:45,highlightedValue:46},null,[-1,-1,-1])}get rendered(){return this.$$.ctx[45]}}function Or(t){let e,n=t[4]&&zr(t);return{c(){n&&n.c(),e=d("rect"),y(e,"width",t[12]),y(e,"height",t[13]),x(e,"fill",t[6]),x(e,"mix-blend-mode",t[4]?"screen":null)},m(t,r){n&&n.m(t,r),u(t,e,r)},p(t,r){t[4]?n?n.p(t,r):(n=zr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),4096&r[0]&&y(e,"width",t[12]),8192&r[0]&&y(e,"height",t[13]),64&r[0]&&x(e,"fill",t[6]),16&r[0]&&x(e,"mix-blend-mode",t[4]?"screen":null)},d(t){n&&n.d(t),t&&f(e)}}}function Lr(t){let e,n,r,o,i,a;return{c(){e=d("rect"),y(e,"class","buffer"),y(e,"width",n=t[12]+t[0].size),y(e,"height",r=t[13]+t[0].size),y(e,"x",o=-t[0].size/2),y(e,"y",i=-t[0].size/2),y(e,"style",a=t[14]?"opacity: 0.2 !important;":""),x(e,"fill",t[0].color)},m(t,n){u(t,e,n)},p(t,s){4097&s[0]&&n!==(n=t[12]+t[0].size)&&y(e,"width",n),8193&s[0]&&r!==(r=t[13]+t[0].size)&&y(e,"height",r),1&s[0]&&o!==(o=-t[0].size/2)&&y(e,"x",o),1&s[0]&&i!==(i=-t[0].size/2)&&y(e,"y",i),16384&s[0]&&a!==(a=t[14]?"opacity: 0.2 !important;":"")&&y(e,"style",a),(16384&s[0]||16385&s[0])&&x(e,"fill",t[0].color)},d(t){t&&f(e)}}}function zr(t){let e;return{c(){e=d("rect"),y(e,"width",t[12]),y(e,"height",t[13]),x(e,"fill",t[5])},m(t,n){u(t,e,n)},p(t,n){4096&n[0]&&y(e,"width",t[12]),8192&n[0]&&y(e,"height",t[13]),32&n[0]&&x(e,"fill",t[5])},d(t){t&&f(e)}}}function Cr(t){let e,n;function r(t,e){return t[0]?Dr:Rr}let o=r(t),i=o(t),a=t[15]>0&&Pr(t);return{c(){i.c(),e=m(),a&&a.c(),n=m()},m(t,r){i.m(t,r),u(t,e,r),a&&a.m(t,r),u(t,n,r)},p(t,s){o===(o=r(t))&&i?i.p(t,s):(i.d(1),i=o(t),i&&(i.c(),i.m(e.parentNode,e))),t[15]>0?a?a.p(t,s):(a=Pr(t),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(t){i.d(t),t&&f(e),a&&a.d(t),t&&f(n)}}}function Rr(t){let e,n;return{c(){e=d("text"),n=g(t[7]),y(e,"transform",t[18]),x(e,"text-anchor",t[3]?t[2]?"start":"end":""),x(e,"dominant-baseline",t[3]?"central":"")},m(r,o){u(r,e,o),c(e,n),t[36](e)},p(t,r){128&r[0]&&b(n,t[7]),262144&r[0]&&y(e,"transform",t[18]),12&r[0]&&x(e,"text-anchor",t[3]?t[2]?"start":"end":""),8&r[0]&&x(e,"dominant-baseline",t[3]?"central":"")},d(n){n&&f(e),t[36](null)}}}function Dr(t){let e,n;return{c(){e=d("text"),n=g(t[7]),y(e,"transform",t[18]),x(e,"text-anchor",t[3]?t[2]?"start":"end":""),x(e,"dominant-baseline",t[3]?"central":""),x(e,"fill",t[0].svgTextStyles.fill),x(e,"stroke",t[0].svgTextStyles.stroke),x(e,"stroke-width",t[0].svgTextStyles["stroke-width"]),x(e,"stroke-linejoin",t[0].svgTextStyles["stroke-linejoin"])},m(r,o){u(r,e,o),c(e,n),t[35](e)},p(t,r){128&r[0]&&b(n,t[7]),262144&r[0]&&y(e,"transform",t[18]),12&r[0]&&x(e,"text-anchor",t[3]?t[2]?"start":"end":""),8&r[0]&&x(e,"dominant-baseline",t[3]?"central":""),1&r[0]&&x(e,"fill",t[0].svgTextStyles.fill),1&r[0]&&x(e,"stroke",t[0].svgTextStyles.stroke),1&r[0]&&x(e,"stroke-width",t[0].svgTextStyles["stroke-width"]),1&r[0]&&x(e,"stroke-linejoin",t[0].svgTextStyles["stroke-linejoin"])},d(n){n&&f(e),t[35](null)}}}function Pr(t){let e;return{c(){e=d("path"),y(e,"class","tick"),y(e,"d",t[22]()),x(e,"stroke",t[20]),x(e,"stroke-width",t[16])},m(t,n){u(t,e,n)},p(t,n){1048576&n[0]&&x(e,"stroke",t[20]),65536&n[0]&&x(e,"stroke-width",t[16])},d(t){t&&f(e)}}}function jr(t){let n,r,o,a,s;function l(t,e){return t[0]?Lr:Or}let h=l(t),p=h(t),g=("center"===t[1]||t[9]>0)&&Cr(t);return{c(){n=d("g"),p.c(),r=m(),g&&g.c(),y(n,"class","swatch"),y(n,"aria-hidden","true"),y(n,"transform",o="translate(".concat(t[17].join(),")")),w(n,"highlight",t[14]),w(n,"buffer",t[0])},m(e,o){u(e,n,o),p.m(n,null),c(n,r),g&&g.m(n,null),a||(s=[v(n,"mouseenter",t[37]),v(n,"click",t[38]),v(n,"mousemove",t[33]),v(n,"mouseleave",t[34])],a=!0)},p(t,e){h===(h=l(t))&&p?p.p(t,e):(p.d(1),p=h(t),p&&(p.c(),p.m(n,r))),"center"===t[1]||t[9]>0?g?g.p(t,e):(g=Cr(t),g.c(),g.m(n,null)):g&&(g.d(1),g=null),131072&e[0]&&o!==(o="translate(".concat(t[17].join(),")"))&&y(n,"transform",o),16384&e[0]&&w(n,"highlight",t[14]),1&e[0]&&w(n,"buffer",t[0])},i:e,o:e,d(t){t&&f(n),p.d(),g&&g.d(),a=!1,i(s)}}}function Ir(t,e,n){let r,o,i,a,s,l,c,u;const f=M();let{buffer:h}=e,{themeData:p}=e,{horizontal:d}=e,{labelPosition:g="center"}=e,{rtl:m=!1}=e,{rotateLabel:v=!1}=e,{parentWidth:y=0}=e,{chroma:b}=e,{blendMultiply:x=!1}=e,{blendMultiplyBackground:w=""}=e;if(x&&!w)throw new Error("Property 'blendMultiplyBackground' missing from legend");let _,k,A,{color:$}=e,{label:S}=e,{key:N}=e,{index:O}=e,{min:L}=e,{max:z}=e,{width:C}=e,{height:R}=e,{highlight:D=!1}=e;return t.$$set=t=>{"buffer"in t&&n(0,h=t.buffer),"themeData"in t&&n(23,p=t.themeData),"horizontal"in t&&n(24,d=t.horizontal),"labelPosition"in t&&n(1,g=t.labelPosition),"rtl"in t&&n(2,m=t.rtl),"rotateLabel"in t&&n(3,v=t.rotateLabel),"parentWidth"in t&&n(25,y=t.parentWidth),"chroma"in t&&n(26,b=t.chroma),"blendMultiply"in t&&n(4,x=t.blendMultiply),"blendMultiplyBackground"in t&&n(5,w=t.blendMultiplyBackground),"color"in t&&n(6,$=t.color),"label"in t&&n(7,S=t.label),"key"in t&&n(8,N=t.key),"index"in t&&n(9,O=t.index),"min"in t&&n(10,L=t.min),"max"in t&&n(11,z=t.max),"width"in t&&n(12,C=t.width),"height"in t&&n(13,R=t.height),"highlight"in t&&n(14,D=t.highlight)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&n(30,i="tick"===g),1082130432&t.$$.dirty[0]&&n(32,a=i?et(p,"vis.base.legend.ruler.tickWidth",1):1),8388608&t.$$.dirty[0]|2&t.$$.dirty[1]&&n(31,r=et(p,"vis.base.legend.text.itemMarginBottom",a)),8388608&t.$$.dirty[0]&&n(29,o=et(p,"vis.base.legend.swatch.marginRight",3)),8388608&t.$$.dirty[0]&&n(16,u=et(p,"vis.base.legend.ruler.tickWidth",1)),50409988&t.$$.dirty[0]|3&t.$$.dirty[1]&&n(17,_=!d&&m&&y?[y-C,O*(R+u)]:d?[O*(C+a),0]:[0,O*(R+r)]),25165824&t.$$.dirty[0]&&n(28,s=et(p,"vis.base.legend.ruler.labelDistance."+(d?"horizontal":"vertical"),3)),75497472&t.$$.dirty[0]&&n(20,l=et(p,"vis.base.legend.ruler.tickColor",function(t,e){const n=et(t,"colors.background","#ffffff"),r=et(t,"colors.chartContentBaseColor",e.contrast(n,"#000000")<5.5?"#f1f1f1":"#333333"),o={tickText:{secondary:et(t,"colors.bgBlendRatios.tickText.secondary",e(n).luminance()<.5?.6:.4),primary:et(t,"colors.bgBlendRatios.tickText.primary",.2)},series:et(t,"colors.bgBlendRatios.series",0),value:et(t,"colors.bgBlendRatios.value",.2),axis:et(t,"colors.bgBlendRatios.axis",0),gridline:et(t,"colors.bgBlendRatios.gridline",.82)};return{tickText:{secondary:e.mix(r,n,o.tickText.secondary).hex(),primary:e.mix(r,n,o.tickText.primary).hex()},series:e.mix(r,n,o.series).hex(),value:e.mix(r,n,o.value).hex(),axis:e.mix(r,n,o.axis).hex(),gridline:e.mix(r,n,o.gridline).hex(),fallbackBaseColor:r,blendColor:t=>e.mix(r,n,t).hex()}}(p,b).fallbackBaseColor||"#222")),1082130432&t.$$.dirty[0]&&n(15,c=i?et(p,"vis.base.legend.ruler.tickLength",0):0),822128654&t.$$.dirty[0]){let t=[];v?n(18,k="translate(0, ".concat(R+s+c,") rotate(-90)")):"center"===g?t=d?[.5*C,R+o]:[C+o,.5*R]:"tick"===g&&(t=d?[0,R+s+c]:[m?-(c+s):C+s+c,0]),t.length&&n(18,k="translate(".concat(t.join(),")"))}},[h,g,m,v,x,w,$,S,N,O,L,z,C,R,D,c,u,_,k,A,l,f,function(){return"M".concat(d?.5*-u:m?C:0,",").concat(d?0:.5*-u).concat(d?"v":"h").concat((!d&&m?-1:1)*((d?R:C)+c))},p,d,y,b,function(){return!!A&&A.getBoundingClientRect().width>C+2},s,o,i,r,a,function(e){E.call(this,t,e)},function(e){E.call(this,t,e)},function(t){T[t?"unshift":"push"]((()=>{A=t,n(19,A)}))},function(t){T[t?"unshift":"push"]((()=>{A=t,n(19,A)}))},()=>f("mouseenter",{key:N,label:S,color:$,min:L,max:z}),()=>f("mouseenter",{key:N,label:S,color:$,min:L,max:z})]}class Fr extends V{constructor(t){super(),X(this,t,Ir,jr,s,{buffer:0,themeData:23,horizontal:24,labelPosition:1,rtl:2,rotateLabel:3,parentWidth:25,chroma:26,blendMultiply:4,blendMultiplyBackground:5,color:6,label:7,key:8,index:9,min:10,max:11,width:12,height:13,highlight:14,labelFits:27},null,[-1,-1])}get labelFits(){return this.$$.ctx[27]}}function Hr(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t=>String(+t.toFixed(0)),o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"center",i=arguments.length>5&&void 0!==arguments[5]&&arguments[5]&&(!(arguments.length>6&&void 0!==arguments[6])||arguments[6]);arguments.length>4&&void 0!==arguments[4]&&arguments[4]&&(i=!i);const a=t.map(((a,s)=>{let l=n?n[s]:0===s?"< ".concat(r(e[1])):s===t.length-1?"≥ ".concat(r(e[s])):"".concat(r(e[s]),"–").concat(r(e[s+1]));return"tick"===o&&(l=s===(i?t.length-1:0)?"":"".concat(r(e[i?s+1:s]))),{color:a,min:0===s?-1/0:+e[s],max:s===t.length-1?1/0:+e[s+1],label:l,key:l||"swatch_".concat(s)}}));return i&&a.reverse(),a}function Br(t,e,n){const r=t.slice();return r[45]=e[n],r[46]=e,r[47]=n,r}function Ur(t,e,n){const r=t.slice();return r[45]=e[n],r[47]=n,r}function qr(t){let e,n;return e=new tt({props:{title:t[1],buffer:t[30],className:["color-legend",t[2]?"horizontal":"vertical",t[27],t[29],t[28]].join(" "),ariaLabel:nr({colors:t[9],title:t[1],format:t[12],swatches:t[21]}),width:t[2]?en(t[14]):void 0,purifyHtml:t[8],$$slots:{default:[Vr]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(t,r){Y(e,t,r),n=!0},p(t,n){const r={};2&n[0]&&(r.title=t[1]),1073741824&n[0]&&(r.buffer=t[30]),939524100&n[0]&&(r.className=["color-legend",t[2]?"horizontal":"vertical",t[27],t[29],t[28]].join(" ")),2101762&n[0]&&(r.ariaLabel=nr({colors:t[9],title:t[1],format:t[12],swatches:t[21]})),16388&n[0]&&(r.width=t[2]?en(t[14]):void 0),256&n[0]&&(r.purifyHtml=t[8]),1206788229&n[0]|262144&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Wr(t){let e,n;return e=new pr({props:{title:t[1],horizontal:t[2],highlight:t[3],reverse:t[4],rtl:t[5],emotion:t[6],swatches:Hr(t[9],t[10],t[11],t[12],t[4]===t[5]?t[4]:!t[4],t[5],t[2]),themeData:t[13],chroma:t[7],purifyHtml:t[8],width:t[2]?en(t[14]):"auto",height:t[2]?"auto":en(t[15]),buffer:t[0],highlightedKey:t[22]||"",position:t[16],blendMultiply:t[17],blendMultiplyBackground:t[18]}}),{c(){W(e.$$.fragment)},m(t,r){Y(e,t,r),n=!0},p(t,n){const r={};2&n[0]&&(r.title=t[1]),4&n[0]&&(r.horizontal=t[2]),8&n[0]&&(r.highlight=t[3]),16&n[0]&&(r.reverse=t[4]),32&n[0]&&(r.rtl=t[5]),64&n[0]&&(r.emotion=t[6]),7732&n[0]&&(r.swatches=Hr(t[9],t[10],t[11],t[12],t[4]===t[5]?t[4]:!t[4],t[5],t[2])),8192&n[0]&&(r.themeData=t[13]),128&n[0]&&(r.chroma=t[7]),256&n[0]&&(r.purifyHtml=t[8]),16388&n[0]&&(r.width=t[2]?en(t[14]):"auto"),32772&n[0]&&(r.height=t[2]?"auto":en(t[15])),1&n[0]&&(r.buffer=t[0]),4194304&n[0]&&(r.highlightedKey=t[22]||""),65536&n[0]&&(r.position=t[16]),131072&n[0]&&(r.blendMultiply=t[17]),262144&n[0]&&(r.blendMultiplyBackground=t[18]),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Yr(t){let e,n,r=t[21],o=[];for(let e=0;e<r.length;e+=1)o[e]=Gr(Ur(t,r,e));const i=t=>q(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=m()},m(t,r){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,r);u(t,e,r),n=!0},p(t,n){if(1180704900&n[0]|1&n[1]){let a;for(r=t[21],a=0;a<r.length;a+=1){const i=Ur(t,r,a);o[a]?(o[a].p(i,n),U(o[a],1)):(o[a]=Gr(i),o[a].c(),U(o[a],1),o[a].m(e.parentNode,e))}for(H(),a=r.length;a<o.length;a+=1)i(a);B()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)U(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)q(o[t]);n=!1},d(t){h(o,t),t&&f(e)}}}function Gr(t){let e,n;return e=new Fr({props:{buffer:t[30],color:t[45].color,label:t[45].label,min:t[45].min,max:t[45].max,index:t[47],horizontal:t[2],width:t[26],height:t[25],themeData:t[13],key:t[45].key,highlight:t[22]===t[45].key,chroma:t[7]}}),e.$on("mouseenter",t[31]),{c(){W(e.$$.fragment)},m(t,r){Y(e,t,r),n=!0},p(t,n){const r={};1073741824&n[0]&&(r.buffer=t[30]),2097152&n[0]&&(r.color=t[45].color),2097152&n[0]&&(r.label=t[45].label),2097152&n[0]&&(r.min=t[45].min),2097152&n[0]&&(r.max=t[45].max),4&n[0]&&(r.horizontal=t[2]),67108864&n[0]&&(r.width=t[26]),33554432&n[0]&&(r.height=t[25]),8192&n[0]&&(r.themeData=t[13]),2097152&n[0]&&(r.key=t[45].key),6291456&n[0]&&(r.highlight=t[22]===t[45].key),128&n[0]&&(r.chroma=t[7]),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Xr(t){let e,n,r=t[47];const o=()=>t[39](e,r),i=()=>t[39](null,r);let a={buffer:!1,color:t[45].color,label:t[45].label,min:t[45].min,max:t[45].max,index:t[47],horizontal:t[2],width:t[26],height:t[25],themeData:t[13],key:t[45].key,highlight:t[22]===t[45].key,chroma:t[7],blendMultiply:t[17],blendMultiplyBackground:t[18]};return e=new Fr({props:a}),o(),e.$on("mouseenter",t[31]),{c(){W(e.$$.fragment)},m(t,r){Y(e,t,r),n=!0},p(t,n){r!==t[47]&&(i(),r=t[47],o());const a={};2097152&n[0]&&(a.color=t[45].color),2097152&n[0]&&(a.label=t[45].label),2097152&n[0]&&(a.min=t[45].min),2097152&n[0]&&(a.max=t[45].max),4&n[0]&&(a.horizontal=t[2]),67108864&n[0]&&(a.width=t[26]),33554432&n[0]&&(a.height=t[25]),8192&n[0]&&(a.themeData=t[13]),2097152&n[0]&&(a.key=t[45].key),6291456&n[0]&&(a.highlight=t[22]===t[45].key),128&n[0]&&(a.chroma=t[7]),131072&n[0]&&(a.blendMultiply=t[17]),262144&n[0]&&(a.blendMultiplyBackground=t[18]),e.$set(a)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){i(),G(e,t)}}}function Vr(t){let e,n,r,o,i,a,s,l,p=t[0]&&Yr(t),g=t[21],b=[];for(let e=0;e<g.length;e+=1)b[e]=Xr(Br(t,g,e));const x=t=>q(b[t],1,1,(()=>{b[t]=null}));return{c(){e=d("svg"),n=d("g"),p&&p.c(),r=m();for(let t=0;t<b.length;t+=1)b[t].c();y(n,"class",""),w(n,"highlighted",null!==t[22]),y(e,"width",o=t[23].width),y(e,"height",i=t[23].height)},m(o,i){u(o,e,i),c(e,n),p&&p.m(n,null),c(n,r);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(n,null);t[40](n),a=!0,s||(l=v(e,"mouseleave",t[32]),s=!0)},p(t,s){if(t[0]?p?(p.p(t,s),1&s[0]&&U(p,1)):(p=Yr(t),p.c(),U(p,1),p.m(n,r)):p&&(H(),q(p,1,1,(()=>{p=null})),B()),124133508&s[0]|1&s[1]){let e;for(g=t[21],e=0;e<g.length;e+=1){const r=Br(t,g,e);b[e]?(b[e].p(r,s),U(b[e],1)):(b[e]=Xr(r),b[e].c(),U(b[e],1),b[e].m(n,null))}for(H(),e=g.length;e<b.length;e+=1)x(e);B()}(!a||4194304&s[0])&&w(n,"highlighted",null!==t[22]),(!a||8388608&s[0]&&o!==(o=t[23].width))&&y(e,"width",o),(!a||8388608&s[0]&&i!==(i=t[23].height))&&y(e,"height",i)},i(t){if(!a){U(p);for(let t=0;t<g.length;t+=1)U(b[t]);a=!0}},o(t){q(p),b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)q(b[t]);a=!1},d(n){n&&f(e),p&&p.d(),h(b,n),t[40](null),s=!1,l()}}}function Zr(t){let e,n,r,o,i,s;const l=[Wr,qr],c=[];function h(t,e){return t[20]?0:1}return e=h(t),n=c[e]=l[e](t),{c(){n.c(),r=m()},m(n,l){c[e].m(n,l),u(n,r,l),o=!0,i||(s=v(window,"click",(function(){a(t[20]?null:t[33])&&(t[20]?null:t[33]).apply(this,arguments)})),i=!0)},p(o,i){let a=e;e=h(t=o),e===a?c[e].p(t,i):(H(),q(c[a],1,1,(()=>{c[a]=null})),B(),n=c[e],n?n.p(t,i):(n=c[e]=l[e](t),n.c()),U(n,1),n.m(r.parentNode,r))},i(t){o||(U(n),o=!0)},o(t){q(n),o=!1},d(t){c[e].d(t),t&&f(r),i=!1,s()}}}function Kr(t,e,n){let r,o,i,a,s,l,c,u;var f;const h=M();let p,{title:d=""}=e,{horizontal:g=!0}=e,{highlight:m=!1}=e,{reverse:v=!1}=e,{rtl:y=!1}=e,{emotion:b}=e,{chroma:x}=e,{purifyHtml:w}=e,{colors:_}=e,{breaks:k}=e,{labels:E}=e,{format:A=(t=>t.toFixed(0))}=e,{themeData:$={}}=e,{width:S=100}=e,{height:N=200}=e,{position:O="above"}=e,{buffer:L=!1}=e,{blendMultiply:C=!1}=e,{blendMultiplyBackground:R=""}=e;const D=new Promise((t=>{n(37,p=t)}));let P,{highlightedValue:j=null}=e;const{onMouseEnter:I,onMouseLeave:F,onClick:H,onHighlight:B}=ir(h,m);let U;B((t=>{n(22,P=void 0!==t?t:null)}));const q={width:100,height:100};let W=!1;const Y=[];return t.$$set=t=>{"title"in t&&n(1,d=t.title),"horizontal"in t&&n(2,g=t.horizontal),"highlight"in t&&n(3,m=t.highlight),"reverse"in t&&n(4,v=t.reverse),"rtl"in t&&n(5,y=t.rtl),"emotion"in t&&n(6,b=t.emotion),"chroma"in t&&n(7,x=t.chroma),"purifyHtml"in t&&n(8,w=t.purifyHtml),"colors"in t&&n(9,_=t.colors),"breaks"in t&&n(10,k=t.breaks),"labels"in t&&n(11,E=t.labels),"format"in t&&n(12,A=t.format),"themeData"in t&&n(13,$=t.themeData),"width"in t&&n(14,S=t.width),"height"in t&&n(15,N=t.height),"position"in t&&n(16,O=t.position),"buffer"in t&&n(0,L=t.buffer),"blendMultiply"in t&&n(17,C=t.blendMultiply),"blendMultiplyBackground"in t&&n(18,R=t.blendMultiplyBackground),"highlightedValue"in t&&n(35,j=t.highlightedValue)},t.$$.update=()=>{8193&t.$$.dirty[0]&&n(30,r=L&&ar(et($,"colors.background","white"))),73792&t.$$.dirty[0]&&n(29,o=b&&tr(b,$,O)),8256&t.$$.dirty[0]&&n(28,i=b&&er(b,$)),32&t.$$.dirty[0]&&n(27,a=y?"dir-rtl":"dir-ltr"),7732&t.$$.dirty[0]&&n(21,s=Hr(_,k,E,A,v,y,g,"center")),8192&t.$$.dirty[0]&&n(38,l=et($,"vis.base.legend.ruler.thickness",13)),25092&t.$$.dirty[0]&&n(26,c=g?Math.floor(S/_.length)-1:et($,"vis.base.legend.swatch.width",20)),8196&t.$$.dirty[0]|128&t.$$.dirty[1]&&n(25,u=g?l:et($,"vis.base.legend.swatch.height",20)),2097152&t.$$.dirty[0]|48&t.$$.dirty[1]&&n(22,P=(null===n(36,f=s.find((t=>{if(null!==j&&t.min&&t.max)return j>=t.min&&j<t.max})))||void 0===f?void 0:f.key)||null),2637824&t.$$.dirty[0]&&og((function(){if(!U||W)return;const t=L;return n(0,L=!1),rg(z,(function(e){const r=U.getBoundingClientRect();n(23,q.height=r.height,q),n(23,q.width=r.width,q),n(0,L=t),p(null)}))}))(),2113536&t.$$.dirty[0]&&og((function(){return n(20,W=!1),rg(z,(function(t){const e=Y.filter((t=>!!t)),r=e.map((t=>t.labelFits()));n(20,W=g&&r.some((t=>t))||1===e.length)}))}))(),1048576&t.$$.dirty[0]|64&t.$$.dirty[1]&&W&&p(null)},[L,d,g,m,v,y,b,x,w,_,k,E,A,$,S,N,O,C,R,U,W,s,P,q,Y,u,c,a,i,o,r,I,F,H,D,j,f,p,l,function(t,e){T[t?"unshift":"push"]((()=>{Y[e]=t,n(24,Y)}))},function(t){T[t?"unshift":"push"]((()=>{U=t,n(19,U)}))}]}class Jr extends V{constructor(t){super(),X(this,t,Kr,Zr,s,{title:1,horizontal:2,highlight:3,reverse:4,rtl:5,emotion:6,chroma:7,purifyHtml:8,colors:9,breaks:10,labels:11,format:12,themeData:13,width:14,height:15,position:16,buffer:0,blendMultiply:17,blendMultiplyBackground:18,rendered:34,highlightedValue:35},null,[-1,-1])}get rendered(){return this.$$.ctx[34]}}function Qr(t,e,n){const r=t.slice();return r[46]=e[n],r[47]=e,r[48]=n,r}function to(t,e,n){const r=t.slice();return r[46]=e[n],r[48]=n,r}function eo(t){let e,n,r=t[12],o=[];for(let e=0;e<r.length;e+=1)o[e]=no(to(t,r,e));const i=t=>q(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=m()},m(t,r){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,r);u(t,e,r),n=!0},p(t,n){if(12810332&n[0]){let a;for(r=t[12],a=0;a<r.length;a+=1){const i=to(t,r,a);o[a]?(o[a].p(i,n),U(o[a],1)):(o[a]=no(i),o[a].c(),U(o[a],1),o[a].m(e.parentNode,e))}for(H(),a=r.length;a<o.length;a+=1)i(a);B()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)U(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)q(o[t]);n=!1},d(t){h(o,t),t&&f(e)}}}function no(t){let e,n;return e=new Fr({props:{color:t[46].color,label:t[46].label,min:t[46].min,max:t[46].max,index:t[48],horizontal:t[2],width:t[17],height:t[16],buffer:t[22],themeData:t[6],key:t[46].key,labelPosition:"tick",rotateLabel:t[11],rtl:t[3],parentWidth:t[14].width,highlight:t[13]===t[46].key,chroma:t[4]}}),e.$on("mouseenter",t[23]),{c(){W(e.$$.fragment)},m(t,r){Y(e,t,r),n=!0},p(t,n){const r={};4096&n[0]&&(r.color=t[46].color),4096&n[0]&&(r.label=t[46].label),4096&n[0]&&(r.min=t[46].min),4096&n[0]&&(r.max=t[46].max),4&n[0]&&(r.horizontal=t[2]),131072&n[0]&&(r.width=t[17]),65536&n[0]&&(r.height=t[16]),4194304&n[0]&&(r.buffer=t[22]),64&n[0]&&(r.themeData=t[6]),4096&n[0]&&(r.key=t[46].key),2048&n[0]&&(r.rotateLabel=t[11]),8&n[0]&&(r.rtl=t[3]),16384&n[0]&&(r.parentWidth=t[14].width),12288&n[0]&&(r.highlight=t[13]===t[46].key),16&n[0]&&(r.chroma=t[4]),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function ro(t){let e,n,r=t[48];const o=()=>t[39](e,r),i=()=>t[39](null,r);let a={color:t[46].color,label:t[46].label,min:t[46].min,max:t[46].max,index:t[48],horizontal:t[2],width:t[17],height:t[16],buffer:!1,themeData:t[6],key:t[46].key,labelPosition:"tick",rotateLabel:t[11],rtl:t[3],parentWidth:t[14].width,highlight:t[13]===t[46].key,chroma:t[4],blendMultiply:t[8],blendMultiplyBackground:t[9]};return e=new Fr({props:a}),o(),e.$on("mouseenter",t[23]),{c(){W(e.$$.fragment)},m(t,r){Y(e,t,r),n=!0},p(t,n){r!==t[48]&&(i(),r=t[48],o());const a={};4096&n[0]&&(a.color=t[46].color),4096&n[0]&&(a.label=t[46].label),4096&n[0]&&(a.min=t[46].min),4096&n[0]&&(a.max=t[46].max),4&n[0]&&(a.horizontal=t[2]),131072&n[0]&&(a.width=t[17]),65536&n[0]&&(a.height=t[16]),64&n[0]&&(a.themeData=t[6]),4096&n[0]&&(a.key=t[46].key),2048&n[0]&&(a.rotateLabel=t[11]),8&n[0]&&(a.rtl=t[3]),16384&n[0]&&(a.parentWidth=t[14].width),12288&n[0]&&(a.highlight=t[13]===t[46].key),16&n[0]&&(a.chroma=t[4]),256&n[0]&&(a.blendMultiply=t[8]),512&n[0]&&(a.blendMultiplyBackground=t[9]),e.$set(a)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){i(),G(e,t)}}}function oo(t){let e,n,r,o,i,a,s,l,p=t[0]&&eo(t),g=t[12],b=[];for(let e=0;e<g.length;e+=1)b[e]=ro(Qr(t,g,e));const x=t=>q(b[t],1,1,(()=>{b[t]=null}));return{c(){e=d("svg"),n=d("g"),p&&p.c(),r=m();for(let t=0;t<b.length;t+=1)b[t].c();y(n,"class",""),w(n,"highlighted",null!==t[13]),y(e,"width",o=t[14].width),y(e,"height",i=t[14].height)},m(o,i){u(o,e,i),c(e,n),p&&p.m(n,null),c(n,r);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(n,null);t[40](n),a=!0,s||(l=v(e,"mouseleave",t[24]),s=!0)},p(t,s){if(t[0]?p?(p.p(t,s),1&s[0]&&U(p,1)):(p=eo(t),p.c(),U(p,1),p.m(n,r)):p&&(H(),q(p,1,1,(()=>{p=null})),B()),8649564&s[0]){let e;for(g=t[12],e=0;e<g.length;e+=1){const r=Qr(t,g,e);b[e]?(b[e].p(r,s),U(b[e],1)):(b[e]=ro(r),b[e].c(),U(b[e],1),b[e].m(n,null))}for(H(),e=g.length;e<b.length;e+=1)x(e);B()}(!a||8192&s[0])&&w(n,"highlighted",null!==t[13]),(!a||16384&s[0]&&o!==(o=t[14].width))&&y(e,"width",o),(!a||16384&s[0]&&i!==(i=t[14].height))&&y(e,"height",i)},i(t){if(!a){U(p);for(let t=0;t<g.length;t+=1)U(b[t]);a=!0}},o(t){q(p),b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)q(b[t]);a=!1},d(n){n&&f(e),p&&p.d(),h(b,n),t[40](null),s=!1,l()}}}function io(t){let e,n,r,o;return e=new tt({props:{title:t[1],buffer:t[22],className:["color-legend","ruler",t[2]?"horizontal":"vertical",t[18],t[20],t[19]].join(" "),ariaLabel:t[21],width:t[2]?en(t[7]):void 0,purifyHtml:t[5],$$slots:{default:[oo]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(i,a){Y(e,i,a),n=!0,r||(o=v(window,"click",t[25]),r=!0)},p(t,n){const r={};2&n[0]&&(r.title=t[1]),4194304&n[0]&&(r.buffer=t[22]),1835012&n[0]&&(r.className=["color-legend","ruler",t[2]?"horizontal":"vertical",t[18],t[20],t[19]].join(" ")),2097152&n[0]&&(r.ariaLabel=t[21]),132&n[0]&&(r.width=t[2]?en(t[7]):void 0),32&n[0]&&(r.purifyHtml=t[5]),4456285&n[0]|524288&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){G(e,t),r=!1,o()}}}function ao(t,e,n){let r,o,i,a,s,l,c,u,f;var h;const p=M();let d,{title:g=""}=e,{horizontal:m=!0}=e,{highlight:v=!1}=e,{reverse:y=!1}=e,{rtl:b=!1}=e,{emotion:x}=e,{chroma:w}=e,{purifyHtml:_}=e,{colors:k}=e,{breaks:E}=e,{labels:A}=e,{format:$=(t=>t.toFixed(0))}=e,{themeData:S={}}=e,{width:N=100}=e,{height:O=200}=e,{position:L="above"}=e,{buffer:C=!1}=e,{blendMultiply:R=!1}=e,{blendMultiplyBackground:D=""}=e;const P=new Promise((t=>{d=t}));let j,{highlightedValue:I=null}=e;const{onMouseEnter:F,onMouseLeave:H,onClick:B,onHighlight:U}=ir(p,v);let q;U((t=>{n(13,j=void 0!==t?t:null)}));const W={width:100,height:100};let Y=!1;const G=[];return t.$$set=t=>{"title"in t&&n(1,g=t.title),"horizontal"in t&&n(2,m=t.horizontal),"highlight"in t&&n(26,v=t.highlight),"reverse"in t&&n(27,y=t.reverse),"rtl"in t&&n(3,b=t.rtl),"emotion"in t&&n(28,x=t.emotion),"chroma"in t&&n(4,w=t.chroma),"purifyHtml"in t&&n(5,_=t.purifyHtml),"colors"in t&&n(29,k=t.colors),"breaks"in t&&n(30,E=t.breaks),"labels"in t&&n(31,A=t.labels),"format"in t&&n(32,$=t.format),"themeData"in t&&n(6,S=t.themeData),"width"in t&&n(7,N=t.width),"height"in t&&n(33,O=t.height),"position"in t&&n(34,L=t.position),"buffer"in t&&n(0,C=t.buffer),"blendMultiply"in t&&n(8,R=t.blendMultiply),"blendMultiplyBackground"in t&&n(9,D=t.blendMultiplyBackground),"highlightedValue"in t&&n(36,I=t.highlightedValue)},t.$$.update=()=>{65&t.$$.dirty[0]&&n(22,r=C&&ar(et(S,"colors.background","white"))),1744830478&t.$$.dirty[0]|3&t.$$.dirty[1]&&n(21,o=nr({colors:k,title:g,format:$,swatches:Hr(k,E,A,$,y,b,m,"center")})),268435520&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(20,i=x&&tr(x,S,L)),268435520&t.$$.dirty[0]&&n(19,a=x&&er(x,S)),8&t.$$.dirty[0]&&n(18,s=b?"dir-rtl":"dir-ltr"),1744830476&t.$$.dirty[0]|3&t.$$.dirty[1]&&n(12,l=Hr(k,E,A,$,y,b,m,"tick")),64&t.$$.dirty[0]&&n(38,c=et(S,"vis.base.legend.ruler.thickness",13)),536871044&t.$$.dirty[0]|128&t.$$.dirty[1]&&n(17,u=m?Math.floor(N/k.length)-1:c),536870916&t.$$.dirty[0]|132&t.$$.dirty[1]&&n(16,f=m?c:Math.floor(O/k.length)-1),4096&t.$$.dirty[0]|96&t.$$.dirty[1]&&n(13,j=(null===n(37,h=l.find((t=>{if(null!==I&&t.min&&t.max)return I>=t.min&&I<t.max})))||void 0===h?void 0:h.key)||null),7296&t.$$.dirty[0]&&og((function(){if(!q)return;const t=C;return n(0,C=!1),rg(z,(function(e){const r=q.getBoundingClientRect();n(14,W.height=r.height,W),n(14,W.width=r.width,W),n(0,C=t),d(null)}))}))(),4224&t.$$.dirty[0]&&og((function(){return n(11,Y=!1),rg(z,(function(t){const e=G.filter((t=>!!t)).map((t=>t.labelFits()));n(11,Y=m&&e.some((t=>t)))}))}))()},[C,g,m,b,w,_,S,N,R,D,q,Y,l,j,W,G,f,u,s,a,i,o,r,F,H,B,v,y,x,k,E,A,$,O,L,P,I,h,c,function(t,e){T[t?"unshift":"push"]((()=>{G[e]=t,n(15,G)}))},function(t){T[t?"unshift":"push"]((()=>{q=t,n(10,q)}))}]}class so extends V{constructor(t){super(),X(this,t,ao,io,s,{title:1,horizontal:2,highlight:26,reverse:27,rtl:3,emotion:28,chroma:4,purifyHtml:5,colors:29,breaks:30,labels:31,format:32,themeData:6,width:7,height:33,position:34,buffer:0,blendMultiply:8,blendMultiplyBackground:9,rendered:35,highlightedValue:36},null,[-1,-1])}get rendered(){return this.$$.ctx[35]}}function lo(t){return"string"!=typeof t?t:parseFloat(t.replace("px",""))}t.CategoryLegend=pr,t.ContinuousLegend=Nr,t.RangeLegend=Jr,t.RulerLegend=so,t.categoryLegendWrapper=function(t,e){const n=new pr({target:t,props:Object.assign(Object.assign({},e),{themeData:e.themeData||e.theme,swatches:e.swatches.map((t=>Object.assign(Object.assign({},t),{width:"width"in t?lo(t.width):null})))})});return{on:function(t,e){n.$on(t,(t=>{e(t.detail)}))},highlight:t=>{n.$$set&&n.$$set({highlightedKey:t||""})},container:t}},t.colorLegendWrapper=function(t,e){let n=null;switch(void 0===e.horizontal&&(e.horizontal=!0),function(t){return"function"==typeof t.colors?"continuous":t.ruler?"ruler":Array.isArray(t.colors)&&t.horizontal?"range":Array.isArray(t.colors)?"category":"winner"}(e)){case"continuous":n=new Nr({target:t,props:Object.assign(Object.assign({},e),{themeData:e.themeData||e.theme})});break;case"ruler":n=new so({target:t,props:Object.assign(Object.assign({},e),{themeData:e.themeData||e.theme})});break;case"category":n=new pr({target:t,props:Object.assign(Object.assign({},e),{themeData:e.themeData||e.theme,swatches:Hr(e.colors,e.breaks,e.labels,e.format,!1,e.rtl,e.horizontal),reverse:e.reverse,height:"auto"})});break;case"range":n=new Jr({target:t,props:Object.assign(Object.assign({},e),{themeData:e.themeData||e.theme})});break;default:t.innerHTML="winner tk"}return{on:function(t,e){null==n||n.$on(t,(t=>{e(t.detail)}))},highlight:t=>{(null==n?void 0:n.$$set)&&n.$$set({highlightedValue:"number"==typeof t?t:null})},container:t,rendered:null==n?void 0:n.rendered}},t.highlightTimer=or}(e)}(0,ng.exports);var ig=ng.exports;function ag(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r,o;if(void 0===e||isNaN(e)||null===e)return"";let i=n.format||"0.[00]";const a=n.multiply||1,s=n.prepend||"",l=n.append||"",c=null!==(r=n.minusChar)&&void 0!==r?r:"−",u=null!==(o=n.plusMinusChar)&&void 0!==o?o:"±";i.includes("%")&&Number.isFinite(e)&&(e*=.01),e*=a;const f=i.indexOf("(")>-1,h=i.indexOf(";")>-1;i=i.replace(/;/g,",");let p=t(f?e:Math.abs(e)).format(i);if(h){const n=t.options.currentLocale,r=t.locales[n].delimiters.thousands,o=i.includes("%")?e/.01:e;p=Math.abs(o)<1e4?p.replace(r,""):p}return s&&!f&&e<0&&sg.has(s.trim().toLowerCase())?"".concat(c).concat(s).concat(p.replace("+","")).concat(l):s&&e>=0&&sg.has(s.trim().toLowerCase())&&i.includes("+")?"".concat(0===e?u:"+").concat(s).concat(p.replace("+","")).concat(l):0===e&&i.includes("+")?"".concat(s).concat(p.replace("+",u)).concat(l):e<0&&!f?"".concat(s).concat(c).concat(p.replace("+","")).concat(l):"".concat(s).concat(p).concat(l)}const sg=new Set(["฿","₿","¢","$","€","eur","£","gbp","¥","yen","usd","cad","us$","ca$","can$"]);var lg,cg=(lg=1,function(t,e,n){e=Vf(e,n);for(var r=Jf(t),o=lg>0?0:r-1;o>=0&&o<r;o+=lg)if(e(t[o],o,t))return o;return-1}),ug=Cf("Number");function fg(t){return ug(t)&&$f(t)}var hg=function(t,e,n){return function(r,o,i){var a=0,s=Jf(r);if("number"==typeof i)t>0?a=i>=0?i:Math.max(i+s,a):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=e(xf.call(r,a,s),fg))>=0?i+a:-1;for(i=t>0?a:s-1;i>=0&&i<s;i+=t)if(r[i]===o)return i;return-1}}(1,cg,(function(t,e,n,r){for(var o=(n=Vf(n,r,1))(e),i=0,a=Jf(t);i<a;){var s=Math.floor((i+a)/2);n(t[s])<o?i=s+1:a=s}return i}));function pg(t,e,n,r){return Qf(t)||(t=function(t){for(var e=Hf(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r}(t)),("number"!=typeof n||r)&&(n=0),hg(t,e,n)>=0}function dg(t,e,n,r){var o;!0!==(o=e)&&!1!==o&&"[object Boolean]"!==wf.call(o)&&(r=n,n=e,e=!1),null!=n&&(n=Vf(n,r));for(var i=[],a=[],s=0,l=Jf(t);s<l;s++){var c=t[s],u=n?n(c,s,t):c;e&&!n?(s&&a===u||i.push(c),a=u):n?pg(a,u)||(a.push(u),i.push(c)):pg(i,c)||i.push(c)}return i}const gg={mt:"above",mb:"below",tl:"inside-left-top",tc:"inside-center-top",tr:"inside-right-top",bl:"inside-left-bottom",bc:"inside-center-bottom",br:"inside-right-bottom"},mg=Object.keys(gg).reduce(((t,e)=>(t[gg[e]]=e,t)),{});function vg(t){let e,{vis:n,dw:r}=t;this.update=t=>{let{container:o,colorScale:i,map:a}=t;const s=yc(n.theme()),l=n.size(),c=n.colorMap(),u=n.chart().getMetadata("data.column-format",{}),{numeral:f}=n.libraries(),h=yc({width:l[0],settings:n.get("legends.color"),column:{type:n.axes(!0).values.type(),name:n.axes(!0).values.name()},cs:{limits:i._limits,colors:i._colors,labels:i._labels,stops:i._stops},zoomable:n.get("zoomable"),zoomBtnPos:n.get("zoom-button-pos"),hideRegions:n.get("hide-empty-regions"),colorscale:n.get("colorscale",{}),colorSim:n.colorMode()||"normal",darkMode:n.darkMode(),darkModeInvert:n.get("dark-mode-invert",!0),blendMultiply:n.get("blend-multiply",!1)});if(_d(h,e))return;if(e=h,ct(o).select(".map-key").remove(),!n.get("legends.color.enabled",!0))return;if(i._limits&&void 0===i._limits[0])return;const p="text"===n.axes(!0).values.type(),d=l[0]<450,g=n.get("legends.color.interactive"),m="top"===vc(s,"vis.base.legend.position",d?"bottom":"top")?"above":"below",v=mg[n.get("legends.color.position",m)],y="div.map-key.export-rect.map-key-"+v+(["mt","mb"].includes(v)?"":".map-key-inside"),b="mt"===v?ct(o).insert(y,".map-outer"):ct(o).append(y),x="m"===v.charAt(0);b.classed("mobile",d),g&&b.style("pointer-events","all");let w,_={title:n.get("legends.color.title"),highlight:g,width:d?l[0]-10:220,horizontal:d||x||"horizontal"===n.get("legends.color.orientation","horizontal"),reverse:!p&&n.get("legends.color.reverse",!1),theme:s,rtl:"rtl"===n.textDirection,buffer:!x,emotion:n.chart().emotion,chroma:n.libraries().chroma,purifyHtml:r.utils.purifyHtml,blendMultiply:n.darkMode()&&n.get("blend-multiply",!1),blendMultiplyBackground:a.regionFill,position:"mb"===v||d&&"mt"!==v?"below":"above"};const k="discrete"===n.get("colorscale.mode")&&"ruler"!==n.get("legends.color.labels")&&!_.horizontal,M=n.get("legends.color.hideItems",[]),E=!p&&i._colors&&"ruler"!==n.get("legends.color.labels")&&("m"===v.charAt(0)||k);let A;if(d||x?!x||d||"number"!==n.axes(!0).values.type()||"continuous"!==n.get("colorscale.mode")&&"ruler"!==n.get("legends.color.labels")||(_.width=n.get("legends.color.size",200)):_[_.horizontal||p||k?"width":"height"]=n.get("legends.color.size",170),x||sf(_.theme,"vis.base.legend.alignment","left"),!d&&x&&sf(_.theme,"vis.base.legend.padding.top",0),"number"===n.axes(!0).values.type()){const t=vc(s,"vis.base.format.minusCharacter","−"),e=vc(s,"vis.base.format.plusMinusCharacter","±"),r=n.get("legends.color.labelFormat","0.[00]"),o=u[n.axes().values]||{},i=o["number-prepend"]||"",a=o["number-append"]||"",l=Math.pow(10,-o["number-divisor"]||0);A=n=>ag(f,n,{format:r,multiply:l,prepend:i,append:a,minusChar:t,plusMinusChar:e})}if(p){const t=vc(s,"colors.categories",[[]])[n.get("colorscale.palette",0)],e=n.get("colorscale.map",{}),r=n.get("colorscale.categoryOrder",[]),o=n.get("colorscale.categoryLabels",{});let a=0;_={..._,swatches:dg(i._labels.sort(((t,e)=>r.indexOf(t)-r.indexOf(e))).map(((n,r)=>{const i=null!=o[n]?o[n]:n,s=e[n]?c(e[n]):t[a++];return{key:"".concat(s,"///").concat(i),label:i,value:n,index:r,color:s}})),(t=>t.key)).sort(((t,e)=>t.index-e.index)).filter((t=>t.label))},_.horizontal||(_.height="auto",sf(_.theme,"vis.base.legend.padding.bottom",0)),w=ig.categoryLegendWrapper(b.node(),_)}else if(E){const t="discrete"===n.get("colorscale.mode")&&"custom"===n.get("legends.color.labels")&&n.get("legends.color.customLabels",[]);_={..._,swatches:i._stops.slice(1).map(((e,n)=>({key:"class-".concat(n),color:i._colors[n],index:n,min:0===n?-1/0:+i._stops[n],max:n===i._stops.length-2?1/0:+i._stops[n+1],label:t?t[n]:0===n?"<&nbsp;".concat(A(e)):n<i._colors.length-1?"".concat(A(i._stops[n]),"–").concat(A(e)):"≥&nbsp;".concat(A(i._stops[n]))})))},"custom"===n.get("legends.color.labels")&&(_.swatches=_.swatches.filter(((t,e)=>!M.includes(e)))),_.horizontal||(_.height="auto",sf(_.theme,"vis.base.legend.padding.bottom",0)),w=ig.categoryLegendWrapper(b.node(),_)}else _={..._,limits:i._limits,breaks:i._stops,ruler:"ruler"===n.get("legends.color.labels"),colors:i._colors||i,format:A},"categories"===n.get("colorscale.mode")?_.labels=i._labels:"continuous"===n.get("colorscale.mode")&&"custom"===n.get("legends.color.labels")?(_.labels=[n.get("legends.color.labelMin",""),n.get("legends.color.labelMax","")],""!==n.get("colorscale.rangeCenter")&&void 0!==n.get("colorscale.rangeCenter")&&_.labels.splice(1,0,n.get("legends.color.labelCenter",""))):"discrete"===n.get("colorscale.mode")&&"custom"===n.get("legends.color.labels")&&(_.labels=n.get("legends.color.customLabels",[]).filter(((t,e)=>!M.includes(e))),_.colors=_.colors.filter(((t,e)=>!M.includes(e))),_.breaks=_.breaks.filter(((t,e)=>0===e||e===_.breaks.length-1||!M.includes(e-1)))),d||x||(sf(_.theme,"vis.base.legend.padding.top",0),sf(_.theme,"vis.base.legend.padding.bottom",0)),w=ig.colorLegendWrapper(b.node(),_);if(g){const t=ig.highlightTimer((t=>{t?a.highlight(t):a.highlight(null)}),700);w.on("mouseenter",(e=>{t.set(e)})),w.on("mouseleave",(()=>{t.clear()}));const e=n.axes(!0).values,r=n.get("colorscale.categoryLabels",{});a.onHighlight=t=>{if(!t)return w.highlight();let n=t.data?t.data[e.name()]:t.properties._cluster?t.properties._val2:t.properties[e.name()];if("number"===e.type()&&"number"!=typeof n)return w.highlight();if(E){const t=i._stops.slice(0,-1).map(((t,e)=>{const n=[i._stops[e],i._stops[e+1]];return 0===e?n[0]=-1/0:e===i._stops.length-2&&(n[1]=1/0),n})),e=t.findIndex((t=>{let[e,r]=t;return n>=e&&n<r}));n="class-".concat(e)}w.highlight("text"===e.type()?"".concat(t.fill||t.properties._color,"///").concat(r[n]||n):n)}}}}var yg;function bg(t,e,n,r){const{css:o,getProp:i}=function(t,e){const n=function(t){let e="";for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(const n of t)e+=n+(r.length?r.shift():"");return e.split("\n").filter((t=>t)).filter((t=>!t.includes(Tp))).join("\n")};function r(t,e,n){return vc(t,e,void 0===n?Tp:n)}return{getProp:(t,n)=>r(e,t,n),getObjProp:r,typography:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries($p).filter((n=>{let[r]=n;return th(t,r)||th(e,r)})).map((n=>{let[r,{prop:o,tsf:i=zf}]=n;const a=vc(t,r,e[r]);return"".concat(o,": ").concat(i(a),";")})).join("\n")},css:function(){return t.css(n(...arguments))},cssTemplate:n,UNDEFINED_STYLE:Tp}}(t,e),a=vc(e,"colors.background","#ffffff");return o(yg||(s=["\n        ","\n        ","\n        ","\n        ","\n    "],l||(l=s.slice(0)),yg=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(l)}}))),function(){let t="\n            .g.places {\n                pointer-events: none;\n            }\n            g.places g.place {\n                font-size: 13px;\n            }\n            g.places g.place .buffer {\n                opacity: 0.5;\n                stroke-width: 3px;\n                stroke-linejoin: round;\n            }\n            g.places g.place tspan {\n                dominant-baseline: middle;\n            }\n            g.places g.place .place-symbol {\n                stroke-width: 0.3px;\n                stroke-opacity: 0.5;\n            }\n            g.places g.place.place-hidden {\n                visibility: hidden;\n            }\n            g.places g.place.inverted .buffer {\n                opacity: 0.6;\n            }\n            g.places g.place.inverted .place-symbol {\n                stroke-opacity: 0.6;\n            }\n            g.places g.place.capital tspan {\n                text-decoration: underline;\n                text-underline-offset: 2px;\n            }\n            g.places g.place.country {\n                text-transform: uppercase;\n                letter-spacing: 0.2em;\n                font-size: 13px;\n            }\n        ";const e=["general","point","capital","country","region"];for(const n of e){const e=!("country"===n||"region"===n),r="g.places g.place".concat("general"===n?"":".".concat(n));t+="\n                ".concat(r," {\n                    font-size: ").concat(Sp(i("vis.d3-maps-core.places.".concat(n,".label.fontSize"))),";\n                    fill: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.color.normal")),";\n                    font-family: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.typeface")),";\n                    text-transform: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.textTransform")),";\n                    font-weight: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.fontWeight.normal")),";\n                    letter-spacing: ").concat(Sp(i("vis.d3-maps-core.places.".concat(n,".label.letterSpacing"))),";\n                    font-style: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.fontStyle")),";\n                }\n                ").concat(r," tspan {\n                    text-decoration: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.textDecoration")),";\n                }\n                ").concat(r," .buffer {\n                    opacity: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.buffer.opacity")),";\n                    stroke: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.buffer.color.normal")),";\n                    stroke-width: ").concat(Sp(i("vis.d3-maps-core.places.".concat(n,".label.buffer.strokeWidth"))),";\n                }\n                ").concat(r,".inverted {\n                    fill: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.color.inverted")),";\n                    font-weight: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.fontWeight.inverted")),";\n                }\n                ").concat(r,".inverted .buffer {\n                    stroke: ").concat(i("vis.d3-maps-core.places.".concat(n,".label.buffer.color.inverted")),";\n                }\n            "),e&&(t+="\n                    ".concat(r," .place-symbol {\n                        fill: ").concat(i("vis.d3-maps-core.places.".concat(n,".symbol.fill.normal")),";\n                        stroke: ").concat(i("vis.d3-maps-core.places.".concat(n,".symbol.stroke.normal")),";\n                        stroke-width: ").concat(Sp(i("vis.d3-maps-core.places.".concat(n,".symbol.strokeWidth"))),";\n                        stroke-opacity: ").concat(i("vis.d3-maps-core.places.".concat(n,".symbol.strokeOpacity")),";\n                    }\n                    ").concat(r,".inverted .place-symbol {\n                        fill: ").concat(i("vis.d3-maps-core.places.".concat(n,".symbol.fill.inverted")),";\n                        stroke: ").concat(i("vis.d3-maps-core.places.".concat(n,".symbol.stroke.inverted")),";\n                    }\n                "))}return t}(),"\n            .zoom-buttons {\n                position: absolute;\n                z-index: 10;\n                border-radius: 4px;\n            }\n            .zoom-buttons-br {\n                bottom: 9px;\n                right: 6px;\n            }\n            .zoom-buttons-tr {\n                top: 9px;\n                right: 6px;\n            }\n            .zoom-buttons-tl {\n                top: 9px;\n                left: 6px;\n            }\n            .zoom-buttons-bl {\n                bottom: 9px;\n                left: 6px;\n            }\n            .zoom-btn {\n                border: 1px solid ".concat(n?"rgba(255, 255, 255, .2)":"rgba(0, 0, 0, .2)",";\n                display: block;\n                width: 30px;\n                height: 30px;\n                line-height: 30px;\n                padding: 0;\n                border-radius: 4px;\n                -webkit-appearance: none;\n                -moz-appearance: none;\n                background: ").concat(n?"rgba(0, 0, 0, .26)":"rgba(255, 255, 255, .85)",";\n                transition: background 0.3s;\n                text-align: center;\n                cursor: pointer;\n                font-size: 17px;\n            }\n            .zoom-btn svg path {\n                fill: ").concat(n?"rgba(255, 255, 255, .5)":"rgba(0, 0, 0, .6)",";\n            }\n            .zoom-btn:hover {\n                background: ").concat(n?"rgba(0, 0, 0, .3)":"rgba(240, 240, 240, .8)",";\n            }\n            .zoom-btn:hover svg path {\n                fill: ").concat(n?"white":"black",";\n            }\n            .zoom-btn-in {\n                border-bottom-left-radius: 0;\n                border-bottom-right-radius: 0;\n            }\n            .zoom-btn-out {\n                border-top: 0;\n                border-top-left-radius: 0;\n                border-top-right-radius: 0;\n            }\n            &:not(.d3-maps-zoomed-in) .zoom-btn-out {\n                background: ").concat(n?"rgba(255, 255, 255, .13)":"hsla(0, 0%, 97%, .85)",";\n                border-color: ").concat(n?"rgba(255, 255, 255, .1)":"",";\n                pointer-events: none;\n            }\n            &:not(.d3-maps-zoomed-in) .zoom-btn-out svg path {\n                fill: ").concat(n?"rgba(255, 255, 255, .5)":"rgba(23, 23, 23, .5)",";\n            }\n            .zoom-btn-home {\n                display: none;\n            }\n            &.d3-maps-zoomed-in .zoom-btn-home {\n                display: block;\n                margin-bottom: 5px;\n            }\n            &.d3-maps-zoomed-in .zoom-buttons-tr .zoom-btn-home,\n            &.d3-maps-zoomed-in .zoom-buttons-tl .zoom-btn-home {\n                margin-bottom: 0;\n                margin-top: 5px;\n            }\n        "),n?"\n            .color-legend.continuous .highlighted g.highlight path.triangle {\n                /* Using !important to overwrite style coming from block-d3-color-legend which has higher specificity. */\n                fill: ".concat(i("colors.chartContentBaseColor","#f1f1f1")," !important;\n            }\n        "):"","d3-maps-choropleth"===r?"\n            path.region-outline {\n                stroke: none;\n                fill-opacity: 0;\n                stroke-linejoin: round;\n            }\n            path.region-outline.has-data:hover,\n            path.region-outline.hover-outline,\n            path.region-outline.sticky {\n                stroke: ".concat(i("vis.d3-maps-choropleth.borders.hoverOutline.stroke",n?"#ffffff":"#000000"),";\n            }\n            g.label text.label,\n            g.label text.buffer {\n                text-anchor: middle;\n                font-size: ").concat(Sp(i("vis.d3-maps-choropleth.labels.fontSize",13)),";\n                font-weight: ").concat(i("vis.d3-maps-choropleth.labels.fontWeight"),";\n                font-family: ").concat(i("vis.d3-maps-choropleth.labels.typeface"),";\n            }\n            g.label text tspan {\n                dominant-baseline: middle;\n            }\n            g.label text.buffer {\n                stroke-linejoin: round;\n                opacity: ").concat(i("vis.d3-maps-choropleth.labels.outline.opacity",.45),";\n                stroke-width: ").concat(Sp(i("vis.d3-maps-choropleth.labels.outline.strokeWidth",3)),";\n            }\n            g.label:not(.inverted) text.buffer {\n                stroke: ").concat(i("vis.d3-maps-choropleth.labels.outline.color.normal",a),";\n            }\n            g.label.inverted text.buffer {\n                stroke: ").concat(i("vis.d3-maps-choropleth.labels.outline.color.inverted"),";\n            }\n        "):"\n            .nocluster.show-outline:not(.sticky):hover path.shape,\n            path.symbol-hover.nocluster {\n                // Using !important to override inline styles.\n                stroke-opacity: ".concat(i("vis.d3-maps-symbols.symbols.stroke.hover.opacity",.5)," !important;\n                stroke: ").concat(i("vis.d3-maps-symbols.symbols.stroke.hover.color")," !important;\n            }\n            .nocluster.sticky path.shape,\n            path.symbol-hover.sticky {\n                // Using !important to override inline styles.\n                stroke-opacity: ").concat(i("vis.d3-maps-symbols.symbols.stroke.sticky.opacity",1)," !important;\n                stroke: ").concat(i("vis.d3-maps-symbols.symbols.stroke.sticky.color")," !important;\n            }\n            g.symbol text {\n                user-select: none;\n                text-anchor: middle;\n                fill: white;\n                font-size: ").concat(Sp(i("vis.d3-maps-symbols.labels.clusters.fontSize",Np(e,"fontSize",14))),";\n                font-weight: ").concat(i("vis.d3-maps-symbols.labels.clusters.fontWeight"),";\n                font-family: ").concat(i("vis.d3-maps-symbols.labels.clusters.typeface"),";\n            }\n        "));var s,l}var xg={exports:{}};
/**
   * chroma.js - JavaScript library for color conversions
   *
   * Copyright (c) 2011-2019, Gregor Aisch
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are met:
   *
   * 1. Redistributions of source code must retain the above copyright notice, this
   * list of conditions and the following disclaimer.
   *
   * 2. Redistributions in binary form must reproduce the above copyright notice,
   * this list of conditions and the following disclaimer in the documentation
   * and/or other materials provided with the distribution.
   *
   * 3. The name Gregor Aisch may not be used to endorse or promote products
   * derived from this software without specific prior written permission.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
   * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
   * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
   * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
   * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   *
   * -------------------------------------------------------
   *
   * chroma.js includes colors from colorbrewer2.org, which are released under
   * the following license:
   *
   * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
   * and The Pennsylvania State University.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing,
   * software distributed under the License is distributed on an
   * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   * either express or implied. See the License for the specific
   * language governing permissions and limitations under the License.
   *
   * ------------------------------------------------------
   *
   * Named colors are taken from X11 Color Names.
   * http://www.w3.org/TR/css3-color/#svg-color
   *
   * @preserve
   */!function(t,e){t.exports=function(){for(var t=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t<e?e:t>n?n:t},e=t,n=function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=e(t[n],0,255)):3===n&&(t[n]=e(t[n],0,1));return t},r={},o=0,i=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];o<i.length;o+=1){var a=i[o];r["[object "+a+"]"]=a.toLowerCase()}var s=function(t){return r[Object.prototype.toString.call(t)]||"object"},l=s,c=function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==l(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},u=s,f=function(t){if(t.length<2)return null;var e=t.length-1;return"string"==u(t[e])?t[e].toLowerCase():null},h=Math.PI,p={clip_rgb:n,limit:t,type:s,unpack:c,last:f,PI:h,TWOPI:2*h,PITHIRD:h/3,DEG2RAD:h/180,RAD2DEG:180/h},d={format:{},autodetect:[]},g=p.last,m=p.clip_rgb,v=p.type,y=d,b=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this;if("object"===v(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var r=g(t),o=!1;if(!r){o=!0,y.sorted||(y.autodetect=y.autodetect.sort((function(t,e){return e.p-t.p})),y.sorted=!0);for(var i=0,a=y.autodetect;i<a.length;i+=1){var s=a[i];if(r=s.test.apply(s,t))break}}if(!y.format[r])throw new Error("unknown format: "+t);var l=y.format[r].apply(null,o?t:t.slice(0,-1));n._rgb=m(l),3===n._rgb.length&&n._rgb.push(1)};b.prototype.toString=function(){return"function"==v(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var x=b,w=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(w.Color,[null].concat(t)))};w.Color=x,w.version="2.4.2";var _=w,k=p.unpack,M=Math.max,E=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=k(t,"rgb"),r=n[0],o=n[1],i=n[2],a=1-M(r/=255,M(o/=255,i/=255)),s=a<1?1/(1-a):0;return[(1-r-a)*s,(1-o-a)*s,(1-i-a)*s,a]},A=E,T=p.unpack,$=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=T(t,"cmyk"))[0],r=t[1],o=t[2],i=t[3],a=t.length>4?t[4]:1;return 1===i?[0,0,0,a]:[n>=1?0:255*(1-n)*(1-i),r>=1?0:255*(1-r)*(1-i),o>=1?0:255*(1-o)*(1-i),a]},S=$,N=_,O=x,L=d,z=p.unpack,C=p.type,R=A;O.prototype.cmyk=function(){return R(this._rgb)},N.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(O,[null].concat(t,["cmyk"])))},L.format.cmyk=S,L.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=z(t,"cmyk"),"array"===C(t)&&4===t.length)return"cmyk"}});var D=p.unpack,P=p.last,j=function(t){return Math.round(100*t)/100},I=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=D(t,"hsla"),r=P(t)||"lsa";return n[0]=j(n[0]||0),n[1]=j(100*n[1])+"%",n[2]=j(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},F=I,H=p.unpack,B=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=H(t,"rgba"))[0],r=t[1],o=t[2];n/=255,r/=255,o/=255;var i,a,s=Math.min(n,r,o),l=Math.max(n,r,o),c=(l+s)/2;return l===s?(i=0,a=Number.NaN):i=c<.5?(l-s)/(l+s):(l-s)/(2-l-s),n==l?a=(r-o)/(l-s):r==l?a=2+(o-n)/(l-s):o==l&&(a=4+(n-r)/(l-s)),(a*=60)<0&&(a+=360),t.length>3&&void 0!==t[3]?[a,i,c,t[3]]:[a,i,c]},U=B,q=p.unpack,W=p.last,Y=F,G=U,X=Math.round,V=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=q(t,"rgba"),r=W(t)||"rgb";return"hsl"==r.substr(0,3)?Y(G(n),r):(n[0]=X(n[0]),n[1]=X(n[1]),n[2]=X(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},Z=V,K=p.unpack,J=Math.round,Q=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var r,o,i,a=(e=K(e,"hsl"))[0],s=e[1],l=e[2];if(0===s)r=o=i=255*l;else{var c=[0,0,0],u=[0,0,0],f=l<.5?l*(1+s):l+s-l*s,h=2*l-f,p=a/360;c[0]=p+1/3,c[1]=p,c[2]=p-1/3;for(var d=0;d<3;d++)c[d]<0&&(c[d]+=1),c[d]>1&&(c[d]-=1),6*c[d]<1?u[d]=h+6*(f-h)*c[d]:2*c[d]<1?u[d]=f:3*c[d]<2?u[d]=h+(f-h)*(2/3-c[d])*6:u[d]=h;r=(t=[J(255*u[0]),J(255*u[1]),J(255*u[2])])[0],o=t[1],i=t[2]}return e.length>3?[r,o,i,e[3]]:[r,o,i,1]},tt=Q,et=tt,nt=d,rt=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,ot=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,it=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,at=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,st=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,lt=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,ct=Math.round,ut=function(t){var e;if(t=t.toLowerCase().trim(),nt.format.named)try{return nt.format.named(t)}catch(t){}if(e=t.match(rt)){for(var n=e.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(e=t.match(ot)){for(var o=e.slice(1,5),i=0;i<4;i++)o[i]=+o[i];return o}if(e=t.match(it)){for(var a=e.slice(1,4),s=0;s<3;s++)a[s]=ct(2.55*a[s]);return a[3]=1,a}if(e=t.match(at)){for(var l=e.slice(1,5),c=0;c<3;c++)l[c]=ct(2.55*l[c]);return l[3]=+l[3],l}if(e=t.match(st)){var u=e.slice(1,4);u[1]*=.01,u[2]*=.01;var f=et(u);return f[3]=1,f}if(e=t.match(lt)){var h=e.slice(1,4);h[1]*=.01,h[2]*=.01;var p=et(h);return p[3]=+e[4],p}};ut.test=function(t){return rt.test(t)||ot.test(t)||it.test(t)||at.test(t)||st.test(t)||lt.test(t)};var ft=ut,ht=_,pt=x,dt=d,gt=p.type,mt=Z,vt=ft;pt.prototype.css=function(t){return mt(this._rgb,t)},ht.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(pt,[null].concat(t,["css"])))},dt.format.css=vt,dt.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===gt(t)&&vt.test(t))return"css"}});var yt=x,bt=_,xt=d,wt=p.unpack;xt.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=wt(t,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},bt.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(yt,[null].concat(t,["gl"])))},yt.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var _t=p.unpack,kt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=_t(t,"rgb"),o=r[0],i=r[1],a=r[2],s=Math.min(o,i,a),l=Math.max(o,i,a),c=l-s,u=100*c/255,f=s/(255-c)*100;return 0===c?n=Number.NaN:(o===l&&(n=(i-a)/c),i===l&&(n=2+(a-o)/c),a===l&&(n=4+(o-i)/c),(n*=60)<0&&(n+=360)),[n,u,f]},Mt=kt,Et=p.unpack,At=Math.floor,Tt=function(){for(var t,e,n,r,o,i,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,f=(a=Et(a,"hcg"))[0],h=a[1],p=a[2];p*=255;var d=255*h;if(0===h)l=c=u=p;else{360===f&&(f=0),f>360&&(f-=360),f<0&&(f+=360);var g=At(f/=60),m=f-g,v=p*(1-h),y=v+d*(1-m),b=v+d*m,x=v+d;switch(g){case 0:l=(t=[x,b,v])[0],c=t[1],u=t[2];break;case 1:l=(e=[y,x,v])[0],c=e[1],u=e[2];break;case 2:l=(n=[v,x,b])[0],c=n[1],u=n[2];break;case 3:l=(r=[v,y,x])[0],c=r[1],u=r[2];break;case 4:l=(o=[b,v,x])[0],c=o[1],u=o[2];break;case 5:l=(i=[x,v,y])[0],c=i[1],u=i[2]}}return[l,c,u,a.length>3?a[3]:1]},$t=Tt,St=p.unpack,Nt=p.type,Ot=_,Lt=x,zt=d,Ct=Mt;Lt.prototype.hcg=function(){return Ct(this._rgb)},Ot.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Lt,[null].concat(t,["hcg"])))},zt.format.hcg=$t,zt.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=St(t,"hcg"),"array"===Nt(t)&&3===t.length)return"hcg"}});var Rt=p.unpack,Dt=p.last,Pt=Math.round,jt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Rt(t,"rgba"),r=n[0],o=n[1],i=n[2],a=n[3],s=Dt(t)||"auto";void 0===a&&(a=1),"auto"===s&&(s=a<1?"rgba":"rgb");var l="000000"+((r=Pt(r))<<16|(o=Pt(o))<<8|(i=Pt(i))).toString(16);l=l.substr(l.length-6);var c="0"+Pt(255*a).toString(16);switch(c=c.substr(c.length-2),s.toLowerCase()){case"rgba":return"#"+l+c;case"argb":return"#"+c+l;default:return"#"+l}},It=jt,Ft=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Ht=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Bt=function(t){if(t.match(Ft)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(Ht)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},Ut=Bt,qt=_,Wt=x,Yt=p.type,Gt=d,Xt=It;Wt.prototype.hex=function(t){return Xt(this._rgb,t)},qt.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Wt,[null].concat(t,["hex"])))},Gt.format.hex=Ut,Gt.autodetect.push({p:4,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===Yt(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var Vt=p.unpack,Zt=p.TWOPI,Kt=Math.min,Jt=Math.sqrt,Qt=Math.acos,te=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=Vt(t,"rgb"),o=r[0],i=r[1],a=r[2],s=Kt(o/=255,i/=255,a/=255),l=(o+i+a)/3,c=l>0?1-s/l:0;return 0===c?n=NaN:(n=(o-i+(o-a))/2,n/=Jt((o-i)*(o-i)+(o-a)*(i-a)),n=Qt(n),a>i&&(n=Zt-n),n/=Zt),[360*n,c,l]},ee=te,ne=p.unpack,re=p.limit,oe=p.TWOPI,ie=p.PITHIRD,ae=Math.cos,se=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=ne(t,"hsi"))[0],a=t[1],s=t[2];return isNaN(i)&&(i=0),isNaN(a)&&(a=0),i>360&&(i-=360),i<0&&(i+=360),(i/=360)<1/3?r=1-((o=(1-a)/3)+(n=(1+a*ae(oe*i)/ae(ie-oe*i))/3)):i<2/3?o=1-((n=(1-a)/3)+(r=(1+a*ae(oe*(i-=1/3))/ae(ie-oe*i))/3)):n=1-((r=(1-a)/3)+(o=(1+a*ae(oe*(i-=2/3))/ae(ie-oe*i))/3)),[255*(n=re(s*n*3)),255*(r=re(s*r*3)),255*(o=re(s*o*3)),t.length>3?t[3]:1]},le=se,ce=p.unpack,ue=p.type,fe=_,he=x,pe=d,de=ee;he.prototype.hsi=function(){return de(this._rgb)},fe.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(he,[null].concat(t,["hsi"])))},pe.format.hsi=le,pe.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ce(t,"hsi"),"array"===ue(t)&&3===t.length)return"hsi"}});var ge=p.unpack,me=p.type,ve=_,ye=x,be=d,xe=U;ye.prototype.hsl=function(){return xe(this._rgb)},ve.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ye,[null].concat(t,["hsl"])))},be.format.hsl=tt,be.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ge(t,"hsl"),"array"===me(t)&&3===t.length)return"hsl"}});var we=p.unpack,_e=Math.min,ke=Math.max,Me=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=we(t,"rgb"))[0],a=t[1],s=t[2],l=_e(i,a,s),c=ke(i,a,s),u=c-l;return o=c/255,0===c?(n=Number.NaN,r=0):(r=u/c,i===c&&(n=(a-s)/u),a===c&&(n=2+(s-i)/u),s===c&&(n=4+(i-a)/u),(n*=60)<0&&(n+=360)),[n,r,o]},Ee=Me,Ae=p.unpack,Te=Math.floor,$e=function(){for(var t,e,n,r,o,i,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,f=(a=Ae(a,"hsv"))[0],h=a[1],p=a[2];if(p*=255,0===h)l=c=u=p;else{360===f&&(f=0),f>360&&(f-=360),f<0&&(f+=360);var d=Te(f/=60),g=f-d,m=p*(1-h),v=p*(1-h*g),y=p*(1-h*(1-g));switch(d){case 0:l=(t=[p,y,m])[0],c=t[1],u=t[2];break;case 1:l=(e=[v,p,m])[0],c=e[1],u=e[2];break;case 2:l=(n=[m,p,y])[0],c=n[1],u=n[2];break;case 3:l=(r=[m,v,p])[0],c=r[1],u=r[2];break;case 4:l=(o=[y,m,p])[0],c=o[1],u=o[2];break;case 5:l=(i=[p,m,v])[0],c=i[1],u=i[2]}}return[l,c,u,a.length>3?a[3]:1]},Se=$e,Ne=p.unpack,Oe=p.type,Le=_,ze=x,Ce=d,Re=Ee;ze.prototype.hsv=function(){return Re(this._rgb)},Le.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ze,[null].concat(t,["hsv"])))},Ce.format.hsv=Se,Ce.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ne(t,"hsv"),"array"===Oe(t)&&3===t.length)return"hsv"}});var De={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Pe=De,je=p.unpack,Ie=Math.pow,Fe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=je(t,"rgb"),r=n[0],o=n[1],i=n[2],a=Ue(r,o,i),s=a[0],l=a[1],c=116*l-16;return[c<0?0:c,500*(s-l),200*(l-a[2])]},He=function(t){return(t/=255)<=.04045?t/12.92:Ie((t+.055)/1.055,2.4)},Be=function(t){return t>Pe.t3?Ie(t,1/3):t/Pe.t2+Pe.t0},Ue=function(t,e,n){return t=He(t),e=He(e),n=He(n),[Be((.4124564*t+.3575761*e+.1804375*n)/Pe.Xn),Be((.2126729*t+.7151522*e+.072175*n)/Pe.Yn),Be((.0193339*t+.119192*e+.9503041*n)/Pe.Zn)]},qe=Fe,We=De,Ye=p.unpack,Ge=Math.pow,Xe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=Ye(t,"lab"))[0],a=t[1],s=t[2];return r=(i+16)/116,n=isNaN(a)?r:r+a/500,o=isNaN(s)?r:r-s/200,r=We.Yn*Ze(r),n=We.Xn*Ze(n),o=We.Zn*Ze(o),[Ve(3.2404542*n-1.5371385*r-.4985314*o),Ve(-.969266*n+1.8760108*r+.041556*o),Ve(.0556434*n-.2040259*r+1.0572252*o),t.length>3?t[3]:1]},Ve=function(t){return 255*(t<=.00304?12.92*t:1.055*Ge(t,1/2.4)-.055)},Ze=function(t){return t>We.t1?t*t*t:We.t2*(t-We.t0)},Ke=Xe,Je=p.unpack,Qe=p.type,tn=_,en=x,nn=d,rn=qe;en.prototype.lab=function(){return rn(this._rgb)},tn.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(en,[null].concat(t,["lab"])))},nn.format.lab=Ke,nn.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Je(t,"lab"),"array"===Qe(t)&&3===t.length)return"lab"}});var on=p.unpack,an=p.RAD2DEG,sn=Math.sqrt,ln=Math.atan2,cn=Math.round,un=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=on(t,"lab"),r=n[0],o=n[1],i=n[2],a=sn(o*o+i*i),s=(ln(i,o)*an+360)%360;return 0===cn(1e4*a)&&(s=Number.NaN),[r,a,s]},fn=un,hn=p.unpack,pn=qe,dn=fn,gn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=hn(t,"rgb"),r=n[0],o=n[1],i=n[2],a=pn(r,o,i),s=a[0],l=a[1],c=a[2];return dn(s,l,c)},mn=gn,vn=p.unpack,yn=p.DEG2RAD,bn=Math.sin,xn=Math.cos,wn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=vn(t,"lch"),r=n[0],o=n[1],i=n[2];return isNaN(i)&&(i=0),[r,xn(i*=yn)*o,bn(i)*o]},_n=wn,kn=p.unpack,Mn=_n,En=Ke,An=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=kn(t,"lch"))[0],r=t[1],o=t[2],i=Mn(n,r,o),a=i[0],s=i[1],l=i[2],c=En(a,s,l);return[c[0],c[1],c[2],t.length>3?t[3]:1]},Tn=An,$n=p.unpack,Sn=Tn,Nn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=$n(t,"hcl").reverse();return Sn.apply(void 0,n)},On=Nn,Ln=p.unpack,zn=p.type,Cn=_,Rn=x,Dn=d,Pn=mn;Rn.prototype.lch=function(){return Pn(this._rgb)},Rn.prototype.hcl=function(){return Pn(this._rgb).reverse()},Cn.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Rn,[null].concat(t,["lch"])))},Cn.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Rn,[null].concat(t,["hcl"])))},Dn.format.lch=Tn,Dn.format.hcl=On,["lch","hcl"].forEach((function(t){return Dn.autodetect.push({p:2,test:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(e=Ln(e,t),"array"===zn(e)&&3===e.length)return t}})}));var jn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},In=x,Fn=d,Hn=p.type,Bn=jn,Un=Ut,qn=It;In.prototype.name=function(){for(var t=qn(this._rgb,"rgb"),e=0,n=Object.keys(Bn);e<n.length;e+=1){var r=n[e];if(Bn[r]===t)return r.toLowerCase()}return t},Fn.format.named=function(t){if(t=t.toLowerCase(),Bn[t])return Un(Bn[t]);throw new Error("unknown color name: "+t)},Fn.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===Hn(t)&&Bn[t.toLowerCase()])return"named"}});var Wn=p.unpack,Yn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Wn(t,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]},Gn=Yn,Xn=p.type,Vn=function(t){if("number"==Xn(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},Zn=_,Kn=x,Jn=d,Qn=p.type,tr=Gn;Kn.prototype.num=function(){return tr(this._rgb)},Zn.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Kn,[null].concat(t,["num"])))},Jn.format.num=Vn,Jn.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===Qn(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var er=_,nr=x,rr=d,or=p.unpack,ir=p.type,ar=Math.round;nr.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ar)},nr.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,n){return n<3?!1===t?e:ar(e):e}))},er.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(nr,[null].concat(t,["rgb"])))},rr.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=or(t,"rgba");return void 0===n[3]&&(n[3]=1),n},rr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=or(t,"rgba"),"array"===ir(t)&&(3===t.length||4===t.length&&"number"==ir(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var sr=Math.log,lr=function(t){var e,n,r,o=t/100;return o<66?(e=255,n=o<6?0:-155.25485562709179-.44596950469579133*(n=o-2)+104.49216199393888*sr(n),r=o<20?0:.8274096064007395*(r=o-10)-254.76935184120902+115.67994401066147*sr(r)):(e=351.97690566805693+.114206453784165*(e=o-55)-40.25366309332127*sr(e),n=325.4494125711974+.07943456536662342*(n=o-50)-28.0852963507957*sr(n),r=255),[e,n,r,1]},cr=lr,ur=p.unpack,fr=Math.round,hr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n,r=ur(t,"rgb"),o=r[0],i=r[2],a=1e3,s=4e4,l=.4;s-a>l;){var c=cr(n=.5*(s+a));c[2]/c[0]>=i/o?s=n:a=n}return fr(n)},pr=_,dr=x,gr=d,mr=hr;dr.prototype.temp=dr.prototype.kelvin=dr.prototype.temperature=function(){return mr(this._rgb)},pr.temp=pr.kelvin=pr.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(dr,[null].concat(t,["temp"])))},gr.format.temp=gr.format.kelvin=gr.format.temperature=lr;var vr=p.unpack,yr=Math.cbrt,br=Math.pow,xr=Math.sign,wr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=vr(t,"rgb"),r=n[0],o=n[1],i=n[2],a=[kr(r/255),kr(o/255),kr(i/255)],s=a[0],l=a[1],c=a[2],u=yr(.4122214708*s+.5363325363*l+.0514459929*c),f=yr(.2119034982*s+.6806995451*l+.1073969566*c),h=yr(.0883024619*s+.2817188376*l+.6299787005*c);return[.2104542553*u+.793617785*f-.0040720468*h,1.9779984951*u-2.428592205*f+.4505937099*h,.0259040371*u+.7827717662*f-.808675766*h]},_r=wr;function kr(t){var e=Math.abs(t);return e<.04045?t/12.92:(xr(t)||1)*br((e+.055)/1.055,2.4)}var Mr=p.unpack,Er=Math.pow,Ar=Math.sign,Tr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=Mr(t,"lab"))[0],r=t[1],o=t[2],i=Er(n+.3963377774*r+.2158037573*o,3),a=Er(n-.1055613458*r-.0638541728*o,3),s=Er(n-.0894841775*r-1.291485548*o,3);return[255*Sr(4.0767416621*i-3.3077115913*a+.2309699292*s),255*Sr(-1.2684380046*i+2.6097574011*a-.3413193965*s),255*Sr(-.0041960863*i-.7034186147*a+1.707614701*s),t.length>3?t[3]:1]},$r=Tr;function Sr(t){var e=Math.abs(t);return e>.0031308?(Ar(t)||1)*(1.055*Er(e,1/2.4)-.055):12.92*t}var Nr=p.unpack,Or=p.type,Lr=_,zr=x,Cr=d,Rr=_r;zr.prototype.oklab=function(){return Rr(this._rgb)},Lr.oklab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(zr,[null].concat(t,["oklab"])))},Cr.format.oklab=$r,Cr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Nr(t,"oklab"),"array"===Or(t)&&3===t.length)return"oklab"}});var Dr=p.unpack,Pr=_r,jr=fn,Ir=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Dr(t,"rgb"),r=n[0],o=n[1],i=n[2],a=Pr(r,o,i),s=a[0],l=a[1],c=a[2];return jr(s,l,c)},Fr=Ir,Hr=p.unpack,Br=_n,Ur=$r,qr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=Hr(t,"lch"))[0],r=t[1],o=t[2],i=Br(n,r,o),a=i[0],s=i[1],l=i[2],c=Ur(a,s,l);return[c[0],c[1],c[2],t.length>3?t[3]:1]},Wr=qr,Yr=p.unpack,Gr=p.type,Xr=_,Vr=x,Zr=d,Kr=Fr;Vr.prototype.oklch=function(){return Kr(this._rgb)},Xr.oklch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Vr,[null].concat(t,["oklch"])))},Zr.format.oklch=Wr,Zr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Yr(t,"oklch"),"array"===Gr(t)&&3===t.length)return"oklch"}});var Jr=x,Qr=p.type;Jr.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===Qr(t)?e?(this._rgb[3]=t,this):new Jr([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},x.prototype.clipped=function(){return this._rgb._clipped||!1};var to=x,eo=De;to.prototype.darken=function(t){void 0===t&&(t=1);var e=this,n=e.lab();return n[0]-=eo.Kn*t,new to(n,"lab").alpha(e.alpha(),!0)},to.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},to.prototype.darker=to.prototype.darken,to.prototype.brighter=to.prototype.brighten,x.prototype.get=function(t){var e=t.split("."),n=e[0],r=e[1],o=this[n]();if(r){var i=n.indexOf(r)-("ok"===n.substr(0,2)?2:0);if(i>-1)return o[i];throw new Error("unknown channel "+r+" in mode "+n)}return o};var no=x,ro=p.type,oo=Math.pow,io=1e-7,ao=20;no.prototype.luminance=function(t){if(void 0!==t&&"number"===ro(t)){if(0===t)return new no([0,0,0,this._rgb[3]],"rgb");if(1===t)return new no([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),n="rgb",r=ao,o=function(e,i){var a=e.interpolate(i,.5,n),s=a.luminance();return Math.abs(t-s)<io||!r--?a:s>t?o(e,a):o(a,i)},i=(e>t?o(new no([0,0,0]),this):o(this,new no([255,255,255]))).rgb();return new no(i.concat([this._rgb[3]]))}return so.apply(void 0,this._rgb.slice(0,3))};var so=function(t,e,n){return.2126*(t=lo(t))+.7152*(e=lo(e))+.0722*(n=lo(n))},lo=function(t){return(t/=255)<=.03928?t/12.92:oo((t+.055)/1.055,2.4)},co={},uo=x,fo=p.type,ho=co,po=function(t,e,n){void 0===n&&(n=.5);for(var r=[],o=arguments.length-3;o-- >0;)r[o]=arguments[o+3];var i=r[0]||"lrgb";if(ho[i]||r.length||(i=Object.keys(ho)[0]),!ho[i])throw new Error("interpolation mode "+i+" is not defined");return"object"!==fo(t)&&(t=new uo(t)),"object"!==fo(e)&&(e=new uo(e)),ho[i](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))},go=x,mo=po;go.prototype.mix=go.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return mo.apply(void 0,[this,t,e].concat(n))};var vo=x;vo.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new vo([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};var yo=x,bo=De;yo.prototype.saturate=function(t){void 0===t&&(t=1);var e=this,n=e.lch();return n[1]+=bo.Kn*t,n[1]<0&&(n[1]=0),new yo(n,"lch").alpha(e.alpha(),!0)},yo.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var xo=x,wo=p.type;xo.prototype.set=function(t,e,n){void 0===n&&(n=!1);var r=t.split("."),o=r[0],i=r[1],a=this[o]();if(i){var s=o.indexOf(i)-("ok"===o.substr(0,2)?2:0);if(s>-1){if("string"==wo(e))switch(e.charAt(0)){case"+":case"-":a[s]+=+e;break;case"*":a[s]*=+e.substr(1);break;case"/":a[s]/=+e.substr(1);break;default:a[s]=+e}else{if("number"!==wo(e))throw new Error("unsupported value for Color.set");a[s]=e}var l=new xo(a,o);return n?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+i+" in mode "+o)}return a};var _o=x,ko=function(t,e,n){var r=t._rgb,o=e._rgb;return new _o(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"rgb")};co.rgb=ko;var Mo=x,Eo=Math.sqrt,Ao=Math.pow,To=function(t,e,n){var r=t._rgb,o=r[0],i=r[1],a=r[2],s=e._rgb,l=s[0],c=s[1],u=s[2];return new Mo(Eo(Ao(o,2)*(1-n)+Ao(l,2)*n),Eo(Ao(i,2)*(1-n)+Ao(c,2)*n),Eo(Ao(a,2)*(1-n)+Ao(u,2)*n),"rgb")};co.lrgb=To;var $o=x,So=function(t,e,n){var r=t.lab(),o=e.lab();return new $o(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"lab")};co.lab=So;var No=x,Oo=function(t,e,n,r){var o,i,a,s,l,c,u,f,h,p,d,g,m;return"hsl"===r?(a=t.hsl(),s=e.hsl()):"hsv"===r?(a=t.hsv(),s=e.hsv()):"hcg"===r?(a=t.hcg(),s=e.hcg()):"hsi"===r?(a=t.hsi(),s=e.hsi()):"lch"===r||"hcl"===r?(r="hcl",a=t.hcl(),s=e.hcl()):"oklch"===r&&(a=t.oklch().reverse(),s=e.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(l=(o=a)[0],u=o[1],h=o[2],c=(i=s)[0],f=i[1],p=i[2]),isNaN(l)||isNaN(c)?isNaN(l)?isNaN(c)?g=Number.NaN:(g=c,1!=h&&0!=h||"hsv"==r||(d=f)):(g=l,1!=p&&0!=p||"hsv"==r||(d=u)):g=l+n*(c>l&&c-l>180?c-(l+360):c<l&&l-c>180?c+360-l:c-l),void 0===d&&(d=u+n*(f-u)),m=h+n*(p-h),new No("oklch"===r?[m,d,g]:[g,d,m],r)},Lo=Oo,zo=function(t,e,n){return Lo(t,e,n,"lch")};co.lch=zo,co.hcl=zo;var Co=x,Ro=function(t,e,n){var r=t.num(),o=e.num();return new Co(r+n*(o-r),"num")};co.num=Ro;var Do=Oo,Po=function(t,e,n){return Do(t,e,n,"hcg")};co.hcg=Po;var jo=Oo,Io=function(t,e,n){return jo(t,e,n,"hsi")};co.hsi=Io;var Fo=Oo,Ho=function(t,e,n){return Fo(t,e,n,"hsl")};co.hsl=Ho;var Bo=Oo,Uo=function(t,e,n){return Bo(t,e,n,"hsv")};co.hsv=Uo;var qo=x,Wo=function(t,e,n){var r=t.oklab(),o=e.oklab();return new qo(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"oklab")};co.oklab=Wo;var Yo=Oo,Go=function(t,e,n){return Yo(t,e,n,"oklch")};co.oklch=Go;var Xo=x,Vo=p.clip_rgb,Zo=Math.pow,Ko=Math.sqrt,Jo=Math.PI,Qo=Math.cos,ti=Math.sin,ei=Math.atan2,ni=function(t,e,n){void 0===e&&(e="lrgb"),void 0===n&&(n=null);var r=t.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var o=r/n.reduce((function(t,e){return t+e}));if(n.forEach((function(t,e){n[e]*=o})),t=t.map((function(t){return new Xo(t)})),"lrgb"===e)return ri(t,n);for(var i=t.shift(),a=i.get(e),s=[],l=0,c=0,u=0;u<a.length;u++)if(a[u]=(a[u]||0)*n[0],s.push(isNaN(a[u])?0:n[0]),"h"===e.charAt(u)&&!isNaN(a[u])){var f=a[u]/180*Jo;l+=Qo(f)*n[0],c+=ti(f)*n[0]}var h=i.alpha()*n[0];t.forEach((function(t,r){var o=t.get(e);h+=t.alpha()*n[r+1];for(var i=0;i<a.length;i++)if(!isNaN(o[i]))if(s[i]+=n[r+1],"h"===e.charAt(i)){var u=o[i]/180*Jo;l+=Qo(u)*n[r+1],c+=ti(u)*n[r+1]}else a[i]+=o[i]*n[r+1]}));for(var p=0;p<a.length;p++)if("h"===e.charAt(p)){for(var d=ei(c/s[p],l/s[p])/Jo*180;d<0;)d+=360;for(;d>=360;)d-=360;a[p]=d}else a[p]=a[p]/s[p];return h/=r,new Xo(a,e).alpha(h>.99999?1:h,!0)},ri=function(t,e){for(var n=t.length,r=[0,0,0,0],o=0;o<t.length;o++){var i=t[o],a=e[o]/n,s=i._rgb;r[0]+=Zo(s[0],2)*a,r[1]+=Zo(s[1],2)*a,r[2]+=Zo(s[2],2)*a,r[3]+=s[3]*a}return r[0]=Ko(r[0]),r[1]=Ko(r[1]),r[2]=Ko(r[2]),r[3]>.9999999&&(r[3]=1),new Xo(Vo(r))},oi=_,ii=p.type,ai=Math.pow,si=function(t){var e="rgb",n=oi("#ccc"),r=0,o=[0,1],i=[],a=[0,0],s=!1,l=[],c=!1,u=0,f=1,h=!1,p={},d=!0,g=1,m=function(t){if((t=t||["#fff","#000"])&&"string"===ii(t)&&oi.brewer&&oi.brewer[t.toLowerCase()]&&(t=oi.brewer[t.toLowerCase()]),"array"===ii(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=oi(t[e]);i.length=0;for(var n=0;n<t.length;n++)i.push(n/(t.length-1))}return w(),l=t},v=function(t){if(null!=s){for(var e=s.length-1,n=0;n<e&&t>=s[n];)n++;return n-1}return 0},y=function(t){return t},b=function(t){return t},x=function(t,r){var o,c;if(null==r&&(r=!1),isNaN(t)||null===t)return n;c=r?t:s&&s.length>2?v(t)/(s.length-2):f!==u?(t-u)/(f-u):1,c=b(c),r||(c=y(c)),1!==g&&(c=ai(c,g)),c=a[0]+c*(1-a[0]-a[1]),c=Math.min(1,Math.max(0,c));var h=Math.floor(1e4*c);if(d&&p[h])o=p[h];else{if("array"===ii(l))for(var m=0;m<i.length;m++){var x=i[m];if(c<=x){o=l[m];break}if(c>=x&&m===i.length-1){o=l[m];break}if(c>x&&c<i[m+1]){c=(c-x)/(i[m+1]-x),o=oi.interpolate(l[m],l[m+1],c,e);break}}else"function"===ii(l)&&(o=l(c));d&&(p[h]=o)}return o},w=function(){return p={}};m(t);var _=function(t){var e=oi(x(t));return c&&e[c]?e[c]():e};return _.classes=function(t){if(null!=t){if("array"===ii(t))s=t,o=[t[0],t[t.length-1]];else{var e=oi.analyze(o);s=0===t?[e.min,e.max]:oi.limits(e,"e",t)}return _}return s},_.domain=function(t){if(!arguments.length)return o;u=t[0],f=t[t.length-1],i=[];var e=l.length;if(t.length===e&&u!==f)for(var n=0,r=Array.from(t);n<r.length;n+=1){var a=r[n];i.push((a-u)/(f-u))}else{for(var s=0;s<e;s++)i.push(s/(e-1));if(t.length>2){var c=t.map((function(e,n){return n/(t.length-1)})),h=t.map((function(t){return(t-u)/(f-u)}));h.every((function(t,e){return c[e]===t}))||(b=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=h[e+1];)e++;var n=(t-h[e])/(h[e+1]-h[e]);return c[e]+n*(c[e+1]-c[e])})}}return o=[u,f],_},_.mode=function(t){return arguments.length?(e=t,w(),_):e},_.range=function(t,e){return m(t),_},_.out=function(t){return c=t,_},_.spread=function(t){return arguments.length?(r=t,_):r},_.correctLightness=function(t){return null==t&&(t=!0),h=t,w(),y=h?function(t){for(var e=x(0,!0).lab()[0],n=x(1,!0).lab()[0],r=e>n,o=x(t,!0).lab()[0],i=e+(n-e)*t,a=o-i,s=0,l=1,c=20;Math.abs(a)>.01&&c-- >0;)r&&(a*=-1),a<0?(s=t,t+=.5*(l-t)):(l=t,t+=.5*(s-t)),o=x(t,!0).lab()[0],a=o-i;return t}:function(t){return t},_},_.padding=function(t){return null!=t?("number"===ii(t)&&(t=[t,t]),a=t,_):a},_.colors=function(e,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=l.slice(0);else if(1===e)r=[_(.5)];else if(e>1){var i=o[0],a=o[1]-i;r=li(0,e,!1).map((function(t){return _(i+t/(e-1)*a)}))}else{t=[];var c=[];if(s&&s.length>2)for(var u=1,f=s.length,h=1<=f;h?u<f:u>f;h?u++:u--)c.push(.5*(s[u-1]+s[u]));else c=o;r=c.map((function(t){return _(t)}))}return oi[n]&&(r=r.map((function(t){return t[n]()}))),r},_.cache=function(t){return null!=t?(d=t,_):d},_.gamma=function(t){return null!=t?(g=t,_):g},_.nodata=function(t){return null!=t?(n=oi(t),_):n},_};function li(t,e,n){for(var r=[],o=t<e,i=n?o?e+1:e-1:e,a=t;o?a<i:a>i;o?a++:a--)r.push(a);return r}var ci=x,ui=si,fi=function(t){for(var e=[1,1],n=1;n<t;n++){for(var r=[1],o=1;o<=e.length;o++)r[o]=(e[o]||0)+e[o-1];e=r}return e},hi=function(t){var e,n,r,o,i,a,s;if(2===(t=t.map((function(t){return new ci(t)}))).length)e=t.map((function(t){return t.lab()})),i=e[0],a=e[1],o=function(t){var e=[0,1,2].map((function(e){return i[e]+t*(a[e]-i[e])}));return new ci(e,"lab")};else if(3===t.length)n=t.map((function(t){return t.lab()})),i=n[0],a=n[1],s=n[2],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*i[e]+2*(1-t)*t*a[e]+t*t*s[e]}));return new ci(e,"lab")};else if(4===t.length){var l;r=t.map((function(t){return t.lab()})),i=r[0],a=r[1],s=r[2],l=r[3],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*i[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*l[e]}));return new ci(e,"lab")}}else{if(!(t.length>=5))throw new RangeError("No point in running bezier with only one color.");var c,u,f;c=t.map((function(t){return t.lab()})),f=t.length-1,u=fi(f),o=function(t){var e=1-t,n=[0,1,2].map((function(n){return c.reduce((function(r,o,i){return r+u[i]*Math.pow(e,f-i)*Math.pow(t,i)*o[n]}),0)}));return new ci(n,"lab")}}return o},pi=function(t){var e=hi(t);return e.scale=function(){return ui(e)},e},di=_,gi=function(t,e,n){if(!gi[n])throw new Error("unknown blend mode "+n);return gi[n](t,e)},mi=function(t){return function(e,n){var r=di(n).rgb(),o=di(e).rgb();return di.rgb(t(r,o))}},vi=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}},yi=function(t){return t},bi=function(t,e){return t*e/255},xi=function(t,e){return t>e?e:t},wi=function(t,e){return t>e?t:e},_i=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},ki=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},Mi=function(t,e){return 255*(1-(1-e/255)/(t/255))},Ei=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t};gi.normal=mi(vi(yi)),gi.multiply=mi(vi(bi)),gi.screen=mi(vi(_i)),gi.overlay=mi(vi(ki)),gi.darken=mi(vi(xi)),gi.lighten=mi(vi(wi)),gi.dodge=mi(vi(Ei)),gi.burn=mi(vi(Mi));for(var Ai=gi,Ti=p.type,$i=p.clip_rgb,Si=p.TWOPI,Ni=Math.pow,Oi=Math.sin,Li=Math.cos,zi=_,Ci=function(t,e,n,r,o){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=[0,1]);var i,a=0;"array"===Ti(o)?i=o[1]-o[0]:(i=0,o=[o,o]);var s=function(s){var l=Si*((t+120)/360+e*s),c=Ni(o[0]+i*s,r),u=(0!==a?n[0]+s*a:n)*c*(1-c)/2,f=Li(l),h=Oi(l);return zi($i([255*(c+u*(-.14861*f+1.78277*h)),255*(c+u*(-.29227*f-.90649*h)),255*(c+u*(1.97294*f)),1]))};return s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?n:("array"===Ti(n=t)?0==(a=n[1]-n[0])&&(n=n[1]):a=0,s)},s.lightness=function(t){return null==t?o:("array"===Ti(t)?(o=t,i=t[1]-t[0]):(o=[t,t],i=0),s)},s.scale=function(){return zi.scale(s)},s.hue(n),s},Ri=x,Di="0123456789abcdef",Pi=Math.floor,ji=Math.random,Ii=function(){for(var t="#",e=0;e<6;e++)t+=Di.charAt(Pi(16*ji()));return new Ri(t,"hex")},Fi=s,Hi=Math.log,Bi=Math.pow,Ui=Math.floor,qi=Math.abs,Wi=function(t,e){void 0===e&&(e=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===Fi(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===Fi(t)&&(t=t[e]),null==t||isNaN(t)||(n.values.push(t),n.sum+=t,t<n.min&&(n.min=t),t>n.max&&(n.max=t),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(t,e){return Yi(n,t,e)},n},Yi=function(t,e,n){void 0===e&&(e="equal"),void 0===n&&(n=7),"array"==Fi(t)&&(t=Wi(t));var r=t.min,o=t.max,i=t.values.sort((function(t,e){return t-e}));if(1===n)return[r,o];var a=[];if("c"===e.substr(0,1)&&(a.push(r),a.push(o)),"e"===e.substr(0,1)){a.push(r);for(var s=1;s<n;s++)a.push(r+s/n*(o-r));a.push(o)}else if("l"===e.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var l=Math.LOG10E*Hi(r),c=Math.LOG10E*Hi(o);a.push(r);for(var u=1;u<n;u++)a.push(Bi(10,l+u/n*(c-l)));a.push(o)}else if("q"===e.substr(0,1)){a.push(r);for(var f=1;f<n;f++){var h=(i.length-1)*f/n,p=Ui(h);if(p===h)a.push(i[p]);else{var d=h-p;a.push(i[p]*(1-d)+i[p+1]*d)}}a.push(o)}else if("k"===e.substr(0,1)){var g,m=i.length,v=new Array(m),y=new Array(n),b=!0,x=0,w=null;(w=[]).push(r);for(var _=1;_<n;_++)w.push(r+_/n*(o-r));for(w.push(o);b;){for(var k=0;k<n;k++)y[k]=0;for(var M=0;M<m;M++)for(var E=i[M],A=Number.MAX_VALUE,T=void 0,$=0;$<n;$++){var S=qi(w[$]-E);S<A&&(A=S,T=$),y[T]++,v[M]=T}for(var N=new Array(n),O=0;O<n;O++)N[O]=null;for(var L=0;L<m;L++)null===N[g=v[L]]?N[g]=i[L]:N[g]+=i[L];for(var z=0;z<n;z++)N[z]*=1/y[z];b=!1;for(var C=0;C<n;C++)if(N[C]!==w[C]){b=!0;break}w=N,++x>200&&(b=!1)}for(var R={},D=0;D<n;D++)R[D]=[];for(var P=0;P<m;P++)R[g=v[P]].push(i[P]);for(var j=[],I=0;I<n;I++)j.push(R[I][0]),j.push(R[I][R[I].length-1]);j=j.sort((function(t,e){return t-e})),a.push(j[0]);for(var F=1;F<j.length;F+=2){var H=j[F];isNaN(H)||-1!==a.indexOf(H)||a.push(H)}}return a},Gi={analyze:Wi,limits:Yi},Xi=x,Vi=function(t,e){t=new Xi(t),e=new Xi(e);var n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},Zi=x,Ki=Math.sqrt,Ji=Math.pow,Qi=Math.min,ta=Math.max,ea=Math.atan2,na=Math.abs,ra=Math.cos,oa=Math.sin,ia=Math.exp,aa=Math.PI,sa=function(t,e,n,r,o){void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=1);var i=function(t){return 360*t/(2*aa)},a=function(t){return 2*aa*t/360};t=new Zi(t),e=new Zi(e);var s=Array.from(t.lab()),l=s[0],c=s[1],u=s[2],f=Array.from(e.lab()),h=f[0],p=f[1],d=f[2],g=(l+h)/2,m=(Ki(Ji(c,2)+Ji(u,2))+Ki(Ji(p,2)+Ji(d,2)))/2,v=.5*(1-Ki(Ji(m,7)/(Ji(m,7)+Ji(25,7)))),y=c*(1+v),b=p*(1+v),x=Ki(Ji(y,2)+Ji(u,2)),w=Ki(Ji(b,2)+Ji(d,2)),_=(x+w)/2,k=i(ea(u,y)),M=i(ea(d,b)),E=k>=0?k:k+360,A=M>=0?M:M+360,T=na(E-A)>180?(E+A+360)/2:(E+A)/2,$=1-.17*ra(a(T-30))+.24*ra(a(2*T))+.32*ra(a(3*T+6))-.2*ra(a(4*T-63)),S=A-E;S=na(S)<=180?S:A<=E?S+360:S-360,S=2*Ki(x*w)*oa(a(S)/2);var N=h-l,O=w-x,L=1+.015*Ji(g-50,2)/Ki(20+Ji(g-50,2)),z=1+.045*_,C=1+.015*_*$,R=30*ia(-Ji((T-275)/25,2)),D=-2*Ki(Ji(_,7)/(Ji(_,7)+Ji(25,7)))*oa(2*a(R)),P=Ki(Ji(N/(n*L),2)+Ji(O/(r*z),2)+Ji(S/(o*C),2)+D*(O/(r*z))*(S/(o*C)));return ta(0,Qi(100,P))},la=x,ca=function(t,e,n){void 0===n&&(n="lab"),t=new la(t),e=new la(e);var r=t.get(n),o=e.get(n),i=0;for(var a in r){var s=(r[a]||0)-(o[a]||0);i+=s*s}return Math.sqrt(i)},ua=x,fa=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(ua,[null].concat(t))),!0}catch(t){return!1}},ha=_,pa=si,da={cool:function(){return pa([ha.hsl(180,1,.9),ha.hsl(250,.7,.4)])},hot:function(){return pa(["#000","#f00","#ff0","#fff"]).mode("rgb")}},ga={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ma=0,va=Object.keys(ga);ma<va.length;ma+=1){var ya=va[ma];ga[ya.toLowerCase()]=ga[ya]}var ba=ga,xa=_;xa.average=ni,xa.bezier=pi,xa.blend=Ai,xa.cubehelix=Ci,xa.mix=xa.interpolate=po,xa.random=Ii,xa.scale=si,xa.analyze=Gi.analyze,xa.contrast=Vi,xa.deltaE=sa,xa.distance=ca,xa.limits=Gi.limits,xa.valid=fa,xa.scales=da,xa.colors=jn,xa.brewer=ba;var wa=xa;return wa}()}(xg);var wg=Vl(xg.exports);const _g=10,kg=.01;function Mg(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8;const o=wg(t).alpha(1),i=wg(t).alpha();if(0===i)return t;const a=o.lab()[0],s=wg(n).lab()[0],l=wg(e).lab()[0],c=Eg(t,n);if(Math.abs(c-1)<kg)return e;const u=s>a,f=u?b(l,100,_g):b(0,l,_g),h=f.lab()[0],p=100*Math.pow(h/100,r),d=f.set("lab.l",p).hex();if(1===i)return d;const g=wg.mix(e,d,i,"rgb"),m=wg.contrast(e,g),v=m*function(t,e){const n=1.5,r=3;return 1+(t<n?1:t>r?0:1-(t-n)/(r-n))*(e-1)}(m,1.05),y=function(t,e,n,r){const o=10,i=.01,a=wg.mix(e,t,n,"rgb"),s=wg.contrast(a,e);if(s-r>-i||!n)return n;return l(n,1,o);function l(n,o,a){const s=(n+o)/2,c=wg.mix(e,t,s,"rgb"),u=wg.contrast(c,e);return Math.abs(u-r)<i||!a?s:u<r?l(s,o,a-1):l(n,s,a-1)}}(d,e,i,v);return wg(d).alpha(y).hex();function b(n,r,o){const i=.5*(n+r),a=wg(t).set("lab.l",i),s=Eg(e,a);if(Math.abs(s-c)<kg||!o)return a;const f=i>l,h=f&&u||!f&&u;return h&&s>c||!h&&s<c?b(n,i,o-1):b(i,r,o-1)}}function Eg(t,e){return wg.contrast(t,e)}const Ag=.45;function Tg(t){let{theme:e,type:n,darkMode:r,layers:o,forceSVG:i}=t;const a=t=>r?Mg(t,e._computed.bgDark,e._computed.bgLight):t,s=vc(e,"colors.background","#ffffff"),l="d3-maps-choropleth"===n,c=l?s:a("#888"),u=l?vc(e,"vis.d3-maps-choropleth.noDataFill",a("#dddddd")):vc(e,"vis.d3-maps-symbols.regionFill",a("#f3f3f3")),f=o.find((t=>"bg"===t.id)),h=o.find((t=>"region"===t.id)),p=o.filter((t=>"border"===t.type&&"outlines"!==t.id)),d=o.find((t=>{let{id:e}=t;return"outlines"===e}));if(f){const t={color:a(l?"#eeeeed":"#f8f8f8"),opacity:l?.5:1},e=g("backgroundLayer.color",t.color),n=g("backgroundLayer.opacity",t.opacity);i?f.selection.st({fill:e,opacity:n}):f.style={fill:$g(e,n)}}return h&&(i?h.selection.attr("fill",u):h.style={fill:u}),p.forEach((t=>{const e={stroke:g("borders.".concat(t.id,".stroke"),c),lineWidth:g("borders.".concat(t.id,".scale"),t.defaultStyle.lineWidth),strokeDasharray:g("borders.".concat(t.id,".strokeDasharray"),t.defaultStyle.strokeDasharray),opacity:t.defaultStyle.opacity};i?(t.selection.st(e),t.style=e):t.style={stroke:$g(e.stroke,e.opacity),lineWidth:e.lineWidth*Ag,dash:e.strokeDasharray?e.strokeDasharray.split(",").map((t=>Number(t)*Ag)):null}})),d&&(d.style={lineWidth:vc(e,"vis.d3-maps-choropleth.borders.hoverOutline.scale",d.defaultStyle.lineWidth)}),u;function g(t,r){return vc(e,"vis.".concat(n,".").concat(t),vc(e,"vis.d3-maps-core.".concat(t),r))}}function $g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=re(t);return n.opacity=e,n.formatRgb()}const Sg={circle:"M -1,0 a 1,1 0 1,0 2,0 a 1,1 0 1,0 -2,0 Z",square:"M-0.88622,-0.88622L0.88622,-0.88622L0.88622,0.88622L-0.88622,0.88622Z",diamond:"M0,-1.25331L1.25331,0L0,1.25331L-1.25331,0Z",marker:"m0.004066,-2.757056c-0.466801,0 -0.84528,0.378395 -0.84528,0.845279c0,0.130754 0.029717,0.254741 0.082794,0.365187c0.00297,0.006277 0.762485,1.494428 0.762485,1.494428l0.753324,-1.475938c0.058773,-0.115068 0.091955,-0.245496 0.091955,-0.383677c0,-0.466885 -0.378395,-0.845279 -0.84528,-0.845279zm0,1.352447c-0.280083,0 -0.507168,-0.227169 -0.507168,-0.507168s0.227085,-0.507168 0.507168,-0.507168c0.279999,0 0.507167,0.227169 0.507167,0.507168s-0.227168,0.507168 -0.507167,0.507168z",hexagon:"M0,-1.09963 L 0.952436,-0.549815 l 0,1.09963 L 0,1.09963 L -0.952436,0.549815 l 0,-1.09963 Z",triangle_up:"M0,-1.16635 L 1.34677,1.16635 l-2.69354,0 Z",triangle_down:"M0,1.16635 L 1.34677,-1.16635 l-2.69354,0 Z",spike:"M-1,0L0,-1L1,0"};var Ng=Date.now||function(){return(new Date).getTime()};function Og(t,e,n){var r,o,i,a,s,l=function(){var c=Ng()-o;e>c?r=setTimeout(l,e-c):(r=null,n||(a=t.apply(s,i)),r||(i=s=null))},c=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(e+1);for(o=0;o<e;o++)i[o]=arguments[o];return i[e]=r,t.apply(this,i)}}((function(c){return s=this,i=c,o=Ng(),r||(r=setTimeout(l,e),n&&(a=t.apply(s,i))),a}));return c.cancel=function(){clearTimeout(r),r=i=s=null},c}var Lg={A:7,a:7,B:8,b:7,C:8,c:6,D:9,d:7,E:7,e:7,F:7,f:4,G:9,g:7,H:9,h:7,I:3,i:3,J:5,j:3,K:8,k:6,L:7,l:3,M:11,m:11,N:9,n:7,O:9,o:7,P:8,p:7,Q:9,q:7,R:8,r:4,S:8,s:6,T:7,t:4,U:9,u:7,V:7,v:6,W:11,w:9,X:7,x:6,Y:7,y:6,Z:7,z:5,".":2,",":2,":":2,";":2};function zg(t,e,n,r){var o,i,a,s,l,c,u=[],f=[],h=[];return(i=t.split(" ")).forEach((function(t,e){var n=t.split("-"),r=e<i.length-1?" ":"";n.length>1?n.forEach((function(t,e){f.push(t+(e<n.length-1?"-":r))})):f.push(t+r)})),a=e||40,s=n||Math.max(3,Math.min(.5*a,.75*f.map((function(t){return t.length})).sort((function(t,e){return t-e}))[Math.round(f.length/2)])),l=a*Lg.a,c=s*Lg.a,o=0,f.forEach((function(t){var e=function(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&(n+=o)}return n}(t.split("").map(p));return o+e>l&&o>c&&(u.push(h.join("")),h.length=0,o=0),o+=e,h.push(t)})),h.length&&u.push(h.join("")),u.filter((function(t){return""!==t}));function p(t){return!r&&Lg[t]||Lg.a}}function Cg(t,e,n){return"left"===n?0:"right"===n?e-t:(e-t)/2}lt.prototype.translate=mo,Ir.prototype.translate=mo,lt.prototype.append=go,lt.prototype.insert=$u,lt.prototype.parent=Su,lt.prototype.selectAppend=Nu,lt.prototype.tspans=vo,lt.prototype.appendMany=Ou,lt.prototype.at=ho,lt.prototype.st=Lu,Ir.prototype.at=ho,Ir.prototype.st=Lu,lt.prototype.prop=lt.prototype.property;var Rg=Cf("String"),Dg=Cf("Arguments");!function(){Dg(arguments)||(Dg=function(t){return Ff(t,"callee")})}();var Pg=Dg;var jg=Cf("Date");function Ig(){}function Fg(t){var e=t();if(e&&e.then)return e.then(Ig)}function Hg(t){return String(null!=t?t:"").toLowerCase().replace(/\u00AD/g,"").replace(/[-\u2015\u2014\u2013\u2012\u23BC\u2212]+/g,"-").replace(/[ \u00A0\u1680\u2002-\u200B\u202F\u205F\u3000]+/g," ").trim()}function Bg(t){return Number(t)}function Ug(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,i,a,s,l,c,u,f,h,p=t._root,d={data:r},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((c=e>=(i=(g+v)/2))?g=i:v=i,(u=n>=(a=(m+y)/2))?m=a:y=a,o=p,!(p=p[f=u<<1|c]))return o[f]=d,t;if(s=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===s&&n===l)return d.next=p,o?o[f]=d:t._root=d,t;do{o=o?o[f]=new Array(4):t._root=new Array(4),(c=e>=(i=(g+v)/2))?g=i:v=i,(u=n>=(a=(m+y)/2))?m=a:y=a}while((f=u<<1|c)==(h=(l>=a)<<1|s>=i));return o[h]=p,o[f]=d,t}function qg(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o}function Wg(t){return t[0]}function Yg(t){return t[1]}function Gg(t,e,n){var r=new Xg(null==e?Wg:e,null==n?Yg:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Xg(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function Vg(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}lt.prototype.at=ho,lt.prototype.append=go,lt.prototype.translate=mo,lt.prototype.tspans=vo,hc.extend(dc),hc.extend(mc),hc.extend(((t,e)=>{const n=e.prototype,r=n.format;n.format=function(t){const e=t||"YYYY-MM-DDTHH:mm:ssZ",n=this.$locale().seasonSeparator||"-",o=e.replace(/(\[[^\]]+])|BB|B/g,((t,e)=>{const r=this.$y,o=r+1,i="B"===t,a=i?[String(r).slice(-2),2]:[r,4],s=[String(o).slice(-2),2];return e||"".concat(i?"'":"").concat(this.$utils().s(...a,"0")).concat(n).concat(i?"'":"").concat(this.$utils().s(...s,"0"))}));return r.bind(this)(o)}}));var Zg=Gg.prototype=Xg.prototype;function Kg(t,e){for(var n,r,o=t.length,i=t[o-1],a=e[0],s=e[1],l=i[0],c=i[1],u=!1,f=0;f<o;++f)n=(i=t[f])[0],(r=i[1])>s!=c>s&&a<(l-n)*(s-r)/(c-r)+n&&(u=!u),l=n,c=r;return u}function Jg(t,e){const n=il();t.forEach((t=>{void 0!==t.properties.cx&&void 0!==t.properties.cy&&(t.properties.__centroid=e([t.properties.cx,t.properties.cy])),t.properties.__centroid&&void 0!==t.properties.__centroid[0]||(t.properties.__centroid=n.centroid(t)),t.properties.__bbox=n.bounds(t)}));const r=Gg(t,(t=>t.properties.__centroid[0]),(t=>t.properties.__centroid[1]));return t=>{const e=r.copy();let n=e.find(t[0],t[1]);if(!n)return;let o=300;for(;e.size()&&!i(n)&&--o>0;)e.remove(n),n=e.find(t[0],t[1]);if(o&&e.size())return n;function i(e){if(!e)return!1;const n=e.properties.__bbox;return t[0]>=n[0][0]&&t[0]<=n[1][0]&&t[1]>=n[0][1]&&t[1]<=n[1][1]&&function(t,e){if("MultiPolygon"===t.geometry.type||"Polygon"===t.geometry.type){const n="MultiPolygon"===t.geometry.type?t.geometry.coordinates:[t.geometry.coordinates];for(let t=0;t<n.length;t++){const r=n[t];for(let t=0;t<r.length;t++){if(Kg(r[t],e))return!0}}return!1}console.warn(t.geometry.type,"is not supported")}(e,t)}}}function Qg(t){return"<div class=\"tooltip-warning\"'>Woops! There's an error in your tooltip formula: ".concat(t.message,"</div>")}function tm(t,e,n){return jg(e)?hc(e).format(n):ag(t,+e,{format:n})}function em(t){return function(){return t}}function nm(t){return 1==(t=+t)?rm:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):em(isNaN(e)?n:e)}}function rm(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):em(isNaN(t)?e:t)}Zg.copy=function(){var t,e,n=new Xg(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Vg(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=Vg(e));return n},Zg.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Ug(this.cover(e,n),e,n,t)},Zg.addAll=function(t){var e,n,r,o,i=t.length,a=new Array(i),s=new Array(i),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=r,s[n]=o,r<l&&(l=r),r>u&&(u=r),o<c&&(c=o),o>f&&(f=o));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<i;++n)Ug(this,a[n],s[n],t[n]);return this},Zg.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,s,l=o-n,c=this._root;n>t||t>=o||r>e||e>=i;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:o=n+l,i=r+l;break;case 1:n=o-l,i=r+l;break;case 2:o=n+l,r=i-l;break;case 3:n=o-l,r=i-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this},Zg.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Zg.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Zg.find=function(t,e,n){var r,o,i,a,s,l,c,u=this._x0,f=this._y0,h=this._x1,p=this._y1,d=[],g=this._root;for(g&&d.push(new qg(g,u,f,h,p)),null==n?n=1/0:(u=t-n,f=e-n,h=t+n,p=e+n,n*=n);l=d.pop();)if(!(!(g=l.node)||(o=l.x0)>h||(i=l.y0)>p||(a=l.x1)<u||(s=l.y1)<f))if(g.length){var m=(o+a)/2,v=(i+s)/2;d.push(new qg(g[3],m,v,a,s),new qg(g[2],o,v,m,s),new qg(g[1],m,i,a,v),new qg(g[0],o,i,m,v)),(c=(e>=v)<<1|t>=m)&&(l=d[d.length-1],d[d.length-1]=d[d.length-1-c],d[d.length-1-c]=l)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);u=t-w,f=e-w,h=t+w,p=e+w,r=g.data}}return r},Zg.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,o,i,a,s,l,c,u,f,h,p=this._root,d=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=i>=(s=(d+m)/2))?d=s:m=s,(u=a>=(l=(g+v)/2))?g=l:v=l,e=p,!(p=p[f=u<<1|c]))return this;if(!p.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(o=p.next)&&delete p.next,r?(o?r.next=o:delete r.next,this):e?(o?e[f]=o:delete e[f],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[h]=p:this._root=p),this):(this._root=o,this)},Zg.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Zg.root=function(){return this._root},Zg.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Zg.visit=function(t){var e,n,r,o,i,a,s=[],l=this._root;for(l&&s.push(new qg(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,o=e.y0,i=e.x1,a=e.y1)&&l.length){var c=(r+i)/2,u=(o+a)/2;(n=l[3])&&s.push(new qg(n,c,u,i,a)),(n=l[2])&&s.push(new qg(n,r,u,c,a)),(n=l[1])&&s.push(new qg(n,c,o,i,u)),(n=l[0])&&s.push(new qg(n,r,o,c,u))}return this},Zg.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new qg(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(a+l)/2,f=(s+c)/2;(i=o[0])&&n.push(new qg(i,a,s,u,f)),(i=o[1])&&n.push(new qg(i,u,s,l,f)),(i=o[2])&&n.push(new qg(i,a,f,u,c)),(i=o[3])&&n.push(new qg(i,u,f,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Zg.x=function(t){return arguments.length?(this._x=t,this):this._x},Zg.y=function(t){return arguments.length?(this._y=t,this):this._y};var om=function t(e){var n=nm(e);function r(t,e){var r=n((t=re(t)).r,(e=re(e)).r),o=n(t.g,e.g),i=n(t.b,e.b),a=rm(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=i(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function im(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,o=e.slice();return function(i){for(n=0;n<r;++n)o[n]=t[n]*(1-i)+e[n]*i;return o}}function am(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,i=new Array(o),a=new Array(r);for(n=0;n<o;++n)i[n]=pm(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<o;++n)a[n]=i[n](t);return a}}function sm(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function lm(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function cm(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=pm(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}var um=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fm=new RegExp(um.source,"g");function hm(t,e){var n,r,o,i=um.lastIndex=fm.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=um.exec(t))&&(r=fm.exec(e));)(o=r.index)>i&&(o=e.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:lm(n,r)})),i=fm.lastIndex;return i<e.length&&(o=e.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function pm(t,e){var n,r,o=typeof e;return null==e||"boolean"===o?em(e):("number"===o?lm:"string"===o?(n=Qt(e))?(e=n,om):hm:e instanceof Qt?om:e instanceof Date?sm:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?am:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?cm:lm:im))(t,e)}function dm(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function gm(t,e){var n=rm((t=_e(t)).l,(e=_e(e)).l),r=rm(t.a,e.a),o=rm(t.b,e.b),i=rm(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=o(e),t.opacity=i(e),t+""}}function mm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function vm(t){return+t}var ym=[0,1];function bm(t){return t}function xm(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function wm(t,e,n){var r=t[0],o=t[1],i=e[0],a=e[1];return o<r?(r=xm(o,r),i=n(a,i)):(r=xm(r,o),i=n(i,a)),function(t){return i(r(t))}}function _m(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),i=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)o[a]=xm(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(e){var n=yt(t,e,1,r)-1;return i[n](o[n](e))}}function km(){var t,e,n,r,o,i,a=ym,s=ym,l=pm,c=bm;function u(){var t,e,n,l=Math.min(a.length,s.length);return c!==bm&&(t=a[0],e=a[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=l>2?_m:wm,o=i=null,f}function f(e){return null==e||isNaN(e=+e)?n:(o||(o=r(a.map(t),s,l)))(t(c(e)))}return f.invert=function(n){return c(e((i||(i=r(s,a.map(t),lm)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,vm),u()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),l=dm,u()},f.clamp=function(t){return arguments.length?(c=!!t||bm,u()):c!==bm},f.interpolate=function(t){return arguments.length?(l=t,u()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,u()}}function Mm(t){var e=t.domain;return t.ticks=function(t){var n=e();return At(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var o,i=$t(t,e,n);switch((r=yn(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=Nn(i,a))||(r.precision=o),En(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=On(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=Sn(i))||(r.precision=o-2*("%"===r.type))}return Mn(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o,i=e(),a=0,s=i.length-1,l=i[a],c=i[s],u=10;for(c<l&&(o=l,l=c,c=o,o=a,a=s,s=o);u-- >0;){if((o=Tt(l,c,n))===r)return i[a]=l,i[s]=c,e(i);if(o>0)l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o}r=o}return t},t}function Em(){var t=km()(bm,bm);return t.copy=function(){return e=t,Em().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},mm.apply(t,arguments),Mm(t)}function Am(){var t,e=[.5],n=[0,1],r=1;function o(o){return null!=o&&o<=o?n[yt(e,o,0,r)]:t}return o.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),o):e.slice()},o.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),o):n.slice()},o.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return Am().domain(e).range(n).unknown(t)},mm.apply(o,arguments)}var Tm="object"==typeof Xl&&Xl&&Xl.Object===Object&&Xl,$m=Tm,Sm="object"==typeof self&&self&&self.Object===Object&&self,Nm=$m||Sm||Function("return this")(),Om=Nm.Symbol,Lm=Om,zm=Object.prototype,Cm=zm.hasOwnProperty,Rm=zm.toString,Dm=Lm?Lm.toStringTag:void 0;var Pm=function(t){var e=Cm.call(t,Dm),n=t[Dm];try{t[Dm]=void 0;var r=!0}catch(t){}var o=Rm.call(t);return r&&(e?t[Dm]=n:delete t[Dm]),o},jm=Object.prototype.toString;var Im=function(t){return jm.call(t)},Fm=Pm,Hm=Im,Bm=Om?Om.toStringTag:void 0;var Um=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Bm&&Bm in Object(t)?Fm(t):Hm(t)};var qm=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Wm=Um,Ym=qm;var Gm,Xm=function(t){if(!Ym(t))return!1;var e=Wm(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Vm=Nm["__core-js_shared__"],Zm=(Gm=/[^.]+$/.exec(Vm&&Vm.keys&&Vm.keys.IE_PROTO||""))?"Symbol(src)_1."+Gm:"";var Km=function(t){return!!Zm&&Zm in t},Jm=Function.prototype.toString;var Qm=function(t){if(null!=t){try{return Jm.call(t)}catch(t){}try{return t+""}catch(t){}}return""},tv=Xm,ev=Km,nv=qm,rv=Qm,ov=/^\[object .+?Constructor\]$/,iv=Function.prototype,av=Object.prototype,sv=iv.toString,lv=av.hasOwnProperty,cv=RegExp("^"+sv.call(lv).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var uv=function(t){return!(!nv(t)||ev(t))&&(tv(t)?cv:ov).test(rv(t))};var fv=function(t,e){return null==t?void 0:t[e]},hv=uv,pv=fv;var dv=function(t,e){var n=pv(t,e);return hv(n)?n:void 0},gv=dv(Object,"create"),mv=gv;var vv=function(){this.__data__=mv?mv(null):{},this.size=0};var yv=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},bv=gv,xv=Object.prototype.hasOwnProperty;var wv=function(t){var e=this.__data__;if(bv){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return xv.call(e,t)?e[t]:void 0},_v=gv,kv=Object.prototype.hasOwnProperty;var Mv=gv;var Ev=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Mv&&void 0===e?"__lodash_hash_undefined__":e,this},Av=vv,Tv=yv,$v=wv,Sv=function(t){var e=this.__data__;return _v?void 0!==e[t]:kv.call(e,t)},Nv=Ev;function Ov(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ov.prototype.clear=Av,Ov.prototype.delete=Tv,Ov.prototype.get=$v,Ov.prototype.has=Sv,Ov.prototype.set=Nv;var Lv=Ov;var zv=function(){this.__data__=[],this.size=0};var Cv=function(t,e){return t===e||t!=t&&e!=e},Rv=Cv;var Dv=function(t,e){for(var n=t.length;n--;)if(Rv(t[n][0],e))return n;return-1},Pv=Dv,jv=Array.prototype.splice;var Iv=Dv;var Fv=Dv;var Hv=Dv;var Bv=function(t,e){var n=this.__data__,r=Hv(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Uv=zv,qv=function(t){var e=this.__data__,n=Pv(e,t);return!(n<0)&&(n==e.length-1?e.pop():jv.call(e,n,1),--this.size,!0)},Wv=function(t){var e=this.__data__,n=Iv(e,t);return n<0?void 0:e[n][1]},Yv=function(t){return Fv(this.__data__,t)>-1},Gv=Bv;function Xv(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Xv.prototype.clear=Uv,Xv.prototype.delete=qv,Xv.prototype.get=Wv,Xv.prototype.has=Yv,Xv.prototype.set=Gv;var Vv=Xv,Zv=dv(Nm,"Map"),Kv=Lv,Jv=Vv,Qv=Zv;var ty=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},ey=ty;var ny=function(t,e){var n=t.__data__;return ey(e)?n["string"==typeof e?"string":"hash"]:n.map},ry=ny;var oy=ny;var iy=ny;var ay=ny;var sy=function(t,e){var n=ay(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},ly=function(){this.size=0,this.__data__={hash:new Kv,map:new(Qv||Jv),string:new Kv}},cy=function(t){var e=ry(this,t).delete(t);return this.size-=e?1:0,e},uy=function(t){return oy(this,t).get(t)},fy=function(t){return iy(this,t).has(t)},hy=sy;function py(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}py.prototype.clear=ly,py.prototype.delete=cy,py.prototype.get=uy,py.prototype.has=fy,py.prototype.set=hy;var dy=py;var gy=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var my=function(t){return this.__data__.has(t)},vy=dy,yy=gy,by=my;function xy(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new vy;++e<n;)this.add(t[e])}xy.prototype.add=xy.prototype.push=yy,xy.prototype.has=by;var wy=xy;var _y=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1};var ky=function(t){return t!=t};var My=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1},Ey=_y,Ay=ky,Ty=My;var $y=function(t,e,n){return e==e?Ty(t,e,n):Ey(t,Ay,n)},Sy=$y;var Ny=function(t,e){return!!(null==t?0:t.length)&&Sy(t,e,0)>-1};var Oy=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1};var Ly=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o};var zy=function(t){return function(e){return t(e)}};var Cy=function(t,e){return t.has(e)},Ry=wy,Dy=Ny,Py=Oy,jy=Ly,Iy=zy,Fy=Cy;var Hy=function(t,e,n,r){var o=-1,i=Dy,a=!0,s=t.length,l=[],c=e.length;if(!s)return l;n&&(e=jy(e,Iy(n))),r?(i=Py,a=!1):e.length>=200&&(i=Fy,a=!1,e=new Ry(e));t:for(;++o<s;){var u=t[o],f=null==n?u:n(u);if(u=r||0!==u?u:0,a&&f==f){for(var h=c;h--;)if(e[h]===f)continue t;l.push(u)}else i(e,f,r)||l.push(u)}return l};var By=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t};var Uy=function(t){return null!=t&&"object"==typeof t},qy=Um,Wy=Uy;var Yy=function(t){return Wy(t)&&"[object Arguments]"==qy(t)},Gy=Yy,Xy=Uy,Vy=Object.prototype,Zy=Vy.hasOwnProperty,Ky=Vy.propertyIsEnumerable,Jy=Gy(function(){return arguments}())?Gy:function(t){return Xy(t)&&Zy.call(t,"callee")&&!Ky.call(t,"callee")},Qy=Jy,tb=Array.isArray,eb=Qy,nb=tb,rb=Om?Om.isConcatSpreadable:void 0;var ob=function(t){return nb(t)||eb(t)||!!(rb&&t&&t[rb])},ib=By,ab=ob;var sb=function t(e,n,r,o,i){var a=-1,s=e.length;for(r||(r=ab),i||(i=[]);++a<s;){var l=e[a];n>0&&r(l)?n>1?t(l,n-1,r,o,i):ib(i,l):o||(i[i.length]=l)}return i};var lb=function(t){return t};var cb=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},ub=Math.max;var fb=function(t,e,n){return e=ub(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=ub(r.length-e,0),a=Array(i);++o<i;)a[o]=r[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=r[o];return s[e]=n(a),cb(t,this,s)}};var hb=function(t){return function(){return t}},pb=dv,db=function(){try{var t=pb(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),gb=hb,mb=db,vb=mb?function(t,e){return mb(t,"toString",{configurable:!0,enumerable:!1,value:gb(e),writable:!0})}:lb,yb=vb,bb=Date.now;var xb=function(t){var e=0,n=0;return function(){var r=bb(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},wb=xb(yb),_b=lb,kb=fb,Mb=wb;var Eb=function(t,e){return Mb(kb(t,e,_b),t+"")};var Ab=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Tb=Xm,$b=Ab;var Sb=function(t){return null!=t&&$b(t.length)&&!Tb(t)},Nb=Sb,Ob=Uy;var Lb=function(t){return Ob(t)&&Nb(t)},zb=Hy,Cb=sb,Rb=Lb,Db=Eb((function(t,e){return Rb(t)?zb(t,Cb(e,1,Rb,!0)):[]})),Pb=Vl(Db),jb=dv(Nm,"Set");var Ib=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Fb=jb,Hb=function(){},Bb=Fb&&1/Ib(new Fb([,-0]))[1]==1/0?function(t){return new Fb(t)}:Hb,Ub=wy,qb=Ny,Wb=Oy,Yb=Cy,Gb=Bb,Xb=Ib;var Vb=function(t,e,n){var r=-1,o=qb,i=t.length,a=!0,s=[],l=s;if(n)a=!1,o=Wb;else if(i>=200){var c=e?null:Gb(t);if(c)return Xb(c);a=!1,o=Yb,l=new Ub}else l=e?[]:s;t:for(;++r<i;){var u=t[r],f=e?e(u):u;if(u=n||0!==u?u:0,a&&f==f){for(var h=l.length;h--;)if(l[h]===f)continue t;e&&l.push(f),s.push(u)}else o(l,f,n)||(l!==s&&l.push(f),s.push(u))}return s},Zb=Vb;var Kb=Vl((function(t){return t&&t.length?Zb(t):[]})),Jb=Hy,Qb=Lb,tx=Eb((function(t,e){return Qb(t)?Jb(t,e):[]})),ex=Vl(tx);function nx(t){const e={},n=t.palette,r=t.categoryOrder||[],o=!!r.length&&r,i=Kb(t.values).sort();let a=o||i;o&&(a.push(...Pb(i,o)),a=ex(a,...Pb(o,i)));let s=0;a.forEach((r=>{r&&(e[r]=t.map[r]||(s>=n.length?t.fallback:n[s++]))}));const l=n=>e[n]||t.fallback;return l._labels=Object.keys(e),l._colors=l._labels.map((t=>e[t])),l}function rx(t,e){const n=[],r=[];let o=[],i=!1;for(let t=0;t<e;t++)n[t]=[];const a=Math.round(t.length/(e+1));for(let n=0;n<e;n++)r[n]=t[a*(n+1)];let s=20;do{for(let t=0;t<e;t++)n[t].length=0;i=!1;let a=-1;for(let o=0;o<t.length;o++){let i=-1;for(let n=0;n<e;n++){const e=Math.abs(r[n]-t[o]);(-1===i||e<=i)&&(i=e,a=n)}n[a].push(t[o])}o=r.slice(0);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n[t].length;r++)e+=n[t][r];r[t]=e/n[t].length}for(let t=0;t<e;t++)l=r[t],c=o[t],Math.abs(l-c)<1e-6||(i=!0)}while(i&&s-- >0);var l,c;return n.filter((t=>t.length))}function ox(t){return(+t).toFixed(function(t){return Math.max(0,String(t-Math.floor(t)).replace(/00000*[0-9]+$/,"").replace(/33333*[0-9]+$/,"").replace(/99999*[0-9]+$/,"").length-2)}(t))}function ix(t){let{stops:e,mode:n,stopCount:r,customStops:o,values:i,rangeMin:a,rangeCenter:s,rangeMax:l}=t;if(!function(t){return""===t||null==t}(s)&&"continuous"===n){if("equidistant"===e)return[a,s,l];r++;const t=[],n=[];i.filter((t=>t>=a&&t<=l)).forEach((e=>(e<s?t:n).push(e))),t.push(s),ox(n[0])>s&&n.unshift(s);const o=Math.floor((r-1)/2)+1,c=Ot(o).map(((t,e)=>e/(o-1))).map((e=>St(t,e))),u=Ot(o).map(((t,e)=>e/(o-1))).map((t=>St(n,t)));return c.length+u.length>r?u.shift():u[0]+=1e-7,[...c,...u]}if("continuous"===n&&"equidistant"===e)return[a,l];const c=Math.LOG10E*Math.log(a),u=Math.LOG10E*Math.log(l),f=i.filter((t=>t>=a&&t<=l)),h="custom"===e?o.map((t=>+t)):"pretty"===e?At(a,l,r):"natural"===e?[...rx(f,r).map((t=>t[0])),l]:"logarithmic"===e?Ot(1,r).map((t=>Math.pow(10,c+t/r*(u-c)))):"quantiles"===e?Ot(0,1.001,1/r).map((t=>St(f,t))):Ot(a,l+1e-5,(l-a)/r);return["natural","custom"].includes(e)||(ox(h[0])>a&&h.unshift(a),ox(h[h.length-1])<l&&h.push(l)),h}var ax=db;var sx=function(t,e,n){"__proto__"==e&&ax?ax(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var lx=function(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r};var cx=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++o];if(!1===n(i[l],l,i))break}return e}},ux=cx();var fx=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},hx={exports:{}};var px=function(){return!1};!function(t,e){var n=Nm,r=px,o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,a=i&&i.exports===o?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r;t.exports=s}(hx,hx.exports);var dx=hx.exports,gx=/^(?:0|[1-9]\d*)$/;var mx=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&gx.test(t))&&t>-1&&t%1==0&&t<e},vx=Um,yx=Ab,bx=Uy,xx={};xx["[object Float32Array]"]=xx["[object Float64Array]"]=xx["[object Int8Array]"]=xx["[object Int16Array]"]=xx["[object Int32Array]"]=xx["[object Uint8Array]"]=xx["[object Uint8ClampedArray]"]=xx["[object Uint16Array]"]=xx["[object Uint32Array]"]=!0,xx["[object Arguments]"]=xx["[object Array]"]=xx["[object ArrayBuffer]"]=xx["[object Boolean]"]=xx["[object DataView]"]=xx["[object Date]"]=xx["[object Error]"]=xx["[object Function]"]=xx["[object Map]"]=xx["[object Number]"]=xx["[object Object]"]=xx["[object RegExp]"]=xx["[object Set]"]=xx["[object String]"]=xx["[object WeakMap]"]=!1;var wx=function(t){return bx(t)&&yx(t.length)&&!!xx[vx(t)]},_x={exports:{}};!function(t,e){var n=Tm,r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,i=o&&o.exports===r&&n.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}(_x,_x.exports);var kx=_x.exports,Mx=wx,Ex=zy,Ax=kx&&kx.isTypedArray,Tx=Ax?Ex(Ax):Mx,$x=fx,Sx=Qy,Nx=tb,Ox=dx,Lx=mx,zx=Tx,Cx=Object.prototype.hasOwnProperty;var Rx=function(t,e){var n=Nx(t),r=!n&&Sx(t),o=!n&&!r&&Ox(t),i=!n&&!r&&!o&&zx(t),a=n||r||o||i,s=a?$x(t.length,String):[],l=s.length;for(var c in t)!e&&!Cx.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Lx(c,l))||s.push(c);return s},Dx=Object.prototype;var Px=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dx)};var jx=function(t,e){return function(n){return t(e(n))}},Ix=jx(Object.keys,Object),Fx=Px,Hx=Ix,Bx=Object.prototype.hasOwnProperty;var Ux=function(t){if(!Fx(t))return Hx(t);var e=[];for(var n in Object(t))Bx.call(t,n)&&"constructor"!=n&&e.push(n);return e},qx=Rx,Wx=Ux,Yx=Sb;var Gx=function(t){return Yx(t)?qx(t):Wx(t)},Xx=ux,Vx=Gx;var Zx=function(t,e){return t&&Xx(t,e,Vx)},Kx=Sb;var Jx=function(t,e){return function(n,r){if(null==n)return n;if(!Kx(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Object(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}},Qx=Jx(Zx);var tw=function(t,e,n,r){return Qx(t,(function(t,o,i){e(r,t,n(t),i)})),r},ew=Vv;var nw=Vv,rw=Zv,ow=dy;var iw=function(t,e){var n=this.__data__;if(n instanceof nw){var r=n.__data__;if(!rw||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ow(r)}return n.set(t,e),this.size=n.size,this},aw=Vv,sw=function(){this.__data__=new ew,this.size=0},lw=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},cw=function(t){return this.__data__.get(t)},uw=function(t){return this.__data__.has(t)},fw=iw;function hw(t){var e=this.__data__=new aw(t);this.size=e.size}hw.prototype.clear=sw,hw.prototype.delete=lw,hw.prototype.get=cw,hw.prototype.has=uw,hw.prototype.set=fw;var pw=hw;var gw=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},mw=wy,vw=gw,yw=Cy;var bw=function(t,e,n,r,o,i){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var f=-1,h=!0,p=2&n?new mw:void 0;for(i.set(t,e),i.set(e,t);++f<s;){var d=t[f],g=e[f];if(r)var m=a?r(g,d,f,e,t,i):r(d,g,f,t,e,i);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!vw(e,(function(t,e){if(!yw(p,e)&&(d===t||o(d,t,n,r,i)))return p.push(e)}))){h=!1;break}}else if(d!==g&&!o(d,g,n,r,i)){h=!1;break}}return i.delete(t),i.delete(e),h};var xw=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},ww=Nm.Uint8Array,_w=Cv,kw=bw,Mw=xw,Ew=Ib,Aw=Om?Om.prototype:void 0,Tw=Aw?Aw.valueOf:void 0;var $w=function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new ww(t),new ww(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _w(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Mw;case"[object Set]":var l=1&r;if(s||(s=Ew),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var u=kw(s(t),s(e),r,o,i,a);return a.delete(t),u;case"[object Symbol]":if(Tw)return Tw.call(t)==Tw.call(e)}return!1},Sw=By,Nw=tb;var Ow=function(t,e,n){var r=e(t);return Nw(t)?r:Sw(r,n(t))};var Lw=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i};var zw=Lw,Cw=function(){return[]},Rw=Object.prototype.propertyIsEnumerable,Dw=Object.getOwnPropertySymbols,Pw=Dw?function(t){return null==t?[]:(t=Object(t),zw(Dw(t),(function(e){return Rw.call(t,e)})))}:Cw,jw=Ow,Iw=Pw,Fw=Gx;var Hw=function(t){return jw(t,Fw,Iw)},Bw=Hw,Uw=Object.prototype.hasOwnProperty;var qw=function(t,e,n,r,o,i){var a=1&n,s=Bw(t),l=s.length;if(l!=Bw(e).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in e:Uw.call(e,u)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var p=!0;i.set(t,e),i.set(e,t);for(var d=a;++c<l;){var g=t[u=s[c]],m=e[u];if(r)var v=a?r(m,g,u,e,t,i):r(g,m,u,t,e,i);if(!(void 0===v?g===m||o(g,m,n,r,i):v)){p=!1;break}d||(d="constructor"==u)}if(p&&!d){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(t),i.delete(e),p},Ww=dv(Nm,"DataView"),Yw=Zv,Gw=dv(Nm,"Promise"),Xw=jb,Vw=dv(Nm,"WeakMap"),Zw=Um,Kw=Qm,Jw="[object Map]",Qw="[object Promise]",t_="[object Set]",e_="[object WeakMap]",n_="[object DataView]",r_=Kw(Ww),o_=Kw(Yw),i_=Kw(Gw),a_=Kw(Xw),s_=Kw(Vw),l_=Zw;(Ww&&l_(new Ww(new ArrayBuffer(1)))!=n_||Yw&&l_(new Yw)!=Jw||Gw&&l_(Gw.resolve())!=Qw||Xw&&l_(new Xw)!=t_||Vw&&l_(new Vw)!=e_)&&(l_=function(t){var e=Zw(t),n="[object Object]"==e?t.constructor:void 0,r=n?Kw(n):"";if(r)switch(r){case r_:return n_;case o_:return Jw;case i_:return Qw;case a_:return t_;case s_:return e_}return e});var c_=pw,u_=bw,f_=$w,h_=qw,p_=l_,d_=tb,g_=dx,m_=Tx,v_="[object Arguments]",y_="[object Array]",b_="[object Object]",x_=Object.prototype.hasOwnProperty;var w_=function(t,e,n,r,o,i){var a=d_(t),s=d_(e),l=a?y_:p_(t),c=s?y_:p_(e),u=(l=l==v_?b_:l)==b_,f=(c=c==v_?b_:c)==b_,h=l==c;if(h&&g_(t)){if(!g_(e))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new c_),a||m_(t)?u_(t,e,n,r,o,i):f_(t,e,l,n,r,o,i);if(!(1&n)){var p=u&&x_.call(t,"__wrapped__"),d=f&&x_.call(e,"__wrapped__");if(p||d){var g=p?t.value():t,m=d?e.value():e;return i||(i=new c_),o(g,m,n,r,i)}}return!!h&&(i||(i=new c_),h_(t,e,n,r,o,i))},__=w_,k_=Uy;var M_=function t(e,n,r,o,i){return e===n||(null==e||null==n||!k_(e)&&!k_(n)?e!=e&&n!=n:__(e,n,r,o,t,i))},E_=pw,A_=M_;var T_=function(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var s=n[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var l=(s=n[o])[0],c=t[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in t))return!1}else{var f=new E_;if(r)var h=r(c,u,l,t,e,f);if(!(void 0===h?A_(u,c,3,r,f):h))return!1}}return!0},$_=qm;var S_=function(t){return t==t&&!$_(t)},N_=S_,O_=Gx;var L_=function(t){for(var e=O_(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,N_(o)]}return e};var z_=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}},C_=T_,R_=L_,D_=z_;var P_=function(t){var e=R_(t);return 1==e.length&&e[0][2]?D_(e[0][0],e[0][1]):function(n){return n===t||C_(n,t,e)}},j_=Um,I_=Uy;var F_=function(t){return"symbol"==typeof t||I_(t)&&"[object Symbol]"==j_(t)},H_=tb,B_=F_,U_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q_=/^\w*$/;var W_=function(t,e){if(H_(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!B_(t))||(q_.test(t)||!U_.test(t)||null!=e&&t in Object(e))},Y_=dy;function G_(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(G_.Cache||Y_),n}G_.Cache=Y_;var X_=G_;var V_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z_=/\\(\\)?/g,K_=function(t){var e=X_(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(V_,(function(t,n,r,o){e.push(r?o.replace(Z_,"$1"):n||t)})),e})),J_=K_,Q_=Ly,tk=tb,ek=F_,nk=Om?Om.prototype:void 0,rk=nk?nk.toString:void 0;var ok=function t(e){if("string"==typeof e)return e;if(tk(e))return Q_(e,t)+"";if(ek(e))return rk?rk.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n},ik=ok;var ak=function(t){return null==t?"":ik(t)},sk=tb,lk=W_,ck=J_,uk=ak;var fk=function(t,e){return sk(t)?t:lk(t,e)?[t]:ck(uk(t))},hk=F_;var pk=function(t){if("string"==typeof t||hk(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},dk=fk,gk=pk;var mk=function(t,e){for(var n=0,r=(e=dk(e,t)).length;null!=t&&n<r;)t=t[gk(e[n++])];return n&&n==r?t:void 0},vk=mk;var yk=function(t,e,n){var r=null==t?void 0:vk(t,e);return void 0===r?n:r};var bk=function(t,e){return null!=t&&e in Object(t)},xk=fk,wk=Qy,_k=tb,kk=mx,Mk=Ab,Ek=pk;var Ak=function(t,e,n){for(var r=-1,o=(e=xk(e,t)).length,i=!1;++r<o;){var a=Ek(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&Mk(o)&&kk(a,o)&&(_k(t)||wk(t))},Tk=bk,$k=Ak;var Sk=function(t,e){return null!=t&&$k(t,e,Tk)},Nk=M_,Ok=yk,Lk=Sk,zk=W_,Ck=S_,Rk=z_,Dk=pk;var Pk=function(t,e){return zk(t)&&Ck(e)?Rk(Dk(t),e):function(n){var r=Ok(n,t);return void 0===r&&r===e?Lk(n,t):Nk(e,r,3)}};var jk=function(t){return function(e){return null==e?void 0:e[t]}},Ik=mk;var Fk=function(t){return function(e){return Ik(e,t)}},Hk=jk,Bk=Fk,Uk=W_,qk=pk;var Wk=P_,Yk=Pk,Gk=lb,Xk=tb,Vk=function(t){return Uk(t)?Hk(qk(t)):Bk(t)};var Zk=function(t){return"function"==typeof t?t:null==t?Gk:"object"==typeof t?Xk(t)?Yk(t[0],t[1]):Wk(t):Vk(t)},Kk=lx,Jk=tw,Qk=Zk,tM=tb;var eM=function(t,e){return function(n,r){var o=tM(n)?Kk:Jk,i=e?e():{};return o(n,t,Qk(r),i)}},nM=sx,rM=eM,oM=Object.prototype.hasOwnProperty,iM=Vl(rM((function(t,e,n){oM.call(t,n)?++t[n]:nM(t,n,1)})));function aM(t){if(!t||"object"!=typeof t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}var sM={values:[],margins:null,mode:"continuous",fallback:"#e4e4e4",rangeMin:null,rangeCenter:null,rangeMax:null,colors:[{color:"#ffffff",position:0},{color:"#000000",position:1}],stops:"equidistant",customStops:[],stopCount:5,palette:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],map:{}};function lM(t){return""===t||null==t}function cM(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("categories"===t.mode)return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(t={...aM(sM),...aM(t)},"categories"===t.mode)return t.margins?e(t):nx(t)}(t,uM);const e=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t={...aM(sM),...aM(t)};const e=iM(t.values);t.values.forEach(((n,r)=>{e[n]>1&&e[n]>.1*e.length&&(t.values[r]+=1e-6*(Math.random()-.5))})),t.values=t.values.filter(Number.isFinite).sort(((t,e)=>t-e)),lM(t.rangeMin)&&(t.rangeMin=t.values[0]),lM(t.rangeMax)&&(t.rangeMax=t.values[t.values.length-1]),["rangeMin","rangeMax","rangeCenter","stopCount"].forEach((e=>{lM(t[e])||(t[e]=+t[e])})),t.colors&&t.colors.length||(t.colors=[{color:"#ffffff",position:0},{color:"#000000",position:1}]);const n=ix({...t,rangeCenter:"discrete"===t.mode?void 0:t.rangeCenter,stopCount:t.stopCount-("continuous"===t.mode?1:0)});return{options:t,stops:n}}(t);t=e.options;const n=e.stops,r=Em().domain(t.colors.map((t=>t.position))).range(t.colors.map((t=>t.color))).interpolate(gm);if("continuous"===t.mode){const e=n.map(((t,e)=>e/(n.length-1))),o=Em(n,e).clamp(!0),i=e=>"number"!=typeof e?t.fallback:r(o(e))+"";return i._limits=function(t){return""===t||null==t}(t.rangeCenter)?[t.rangeMin,t.rangeMax]:[t.rangeMin,+t.rangeCenter,t.rangeMax],i._stops=n,i}if("discrete"===t.mode){const e=Ot(0,1.0001,1/(n.length-2)).map(r);e.unshift(e[0]),e.push(e[e.length-1]);const o=r=>"number"!=typeof r?t.fallback:Am(n,e)(r);return o._stops=n,o._colors=e.slice(1,-1),o}}function uM(t){const e=t.margins.sort(((t,e)=>t-e)),n=[e[0],e[e.length-1]],r=nx(t),o={},i=ix({...t,values:e,rangeMin:n[0],rangeMax:n[1]}),a=Ot(i.length-1).map((t=>.5*(i[t]+i[t+1]))),s=Em().domain([a[0],a[a.length-1]]).range([90,20]);function l(t,e){return o[t](e)}return l._stops=i,l._colors={},l._labels=r._labels,l._labels.forEach((t=>{const e=_e(r(t)),n=a.map((t=>_e(s(t),e.a,e.b)+""));o[t]=Am(i.slice(1,-1),n),l._colors[t]=i.slice(0,-1).map(((e,n)=>o[t](.5*(e+i[n+1]))))})),l}const fM="#e4e4e4",hM="#4a4a4a";function pM(t){let{column:e,vis:n,values:r,theme:o,cm:i}=t;return"text"===e.type()?function(t){let{theme:e,vis:n,cm:r,values:o}=t;const i=vc(e,"colors.categories.0",["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]),a=Object.fromEntries(Object.entries(n.get("colorscale.map",{})).map((t=>{let[e,n]=t;return[e,r(n)]}))),s=n.get("colorscale.palette",0);return cM({mode:"categories",palette:r(vc(e,"colors.categories",[i])[Number.isFinite(s)?s:0]),values:o,map:a,categoryOrder:n.get("colorscale.categoryOrder",[]),fallback:n.darkMode()?hM:fM})}({theme:o,vis:n,cm:i,values:r}):function(t){let{theme:e,vis:n,cm:r,values:o}=t;const i=vc(e,"colors.gradients.0",["#f0f9e8","#b6e3bb","#75c8c5","#4ba8c9","#2989bd","#0a6aad","#254b8c"]),a=i.map(((t,e)=>({color:t,position:e/(i.length-1)}))),s=t=>t.join(",").toLowerCase(),l=yc(n.get("colorscale.colors",a)),c=s(l.map((t=>t.color)));let u=!1;if(n.get("dark-mode-invert",!0)&&vc(e,"_computed.origGradients")){const t=e._computed.origGradients.findIndex((t=>c===s(t)||c===s(t.slice().reverse())));if(t>-1){const n=e._computed.origGradients[t],r=vc(e,"colors.gradients",[])[t];if(n.length===r.length){u=!0;const n=c!==s(e._computed.origGradients[t]);for(let t=0;t<l.length;t++)l[t].color=r[n?l.length-t-1:t]}}}const f=l.map((t=>{let{color:e,position:n}=t;return{color:r(e,{noInvert:u}),position:n}}));if("discrete"===n.get("colorscale.mode","continuous")){const t=n.get("colorscale.stopCount",14);let e=yc("custom"===n.get("colorscale.stops")?n.get("colorscale.customStops",[]):null);if(Array.isArray(e)){let n=1/0,r=-1/0;for(let t=o.length-1;t>=0;t--)o[t]<n&&(n=o[t]),o[t]>r&&(r=o[t]);e=e.slice(1,t).map((t=>+t));const i=e[e.length-1];e=[Math.min(n,e[0]),...e,Math.max(r,i)]}return cM({values:o,mode:"discrete",colors:f,stops:n.get("colorscale.stops","equidistant"),customStops:e,stopCount:t,rangeMin:n.get("colorscale.rangeMin"),rangeCenter:n.get("colorscale.rangeCenter"),rangeMax:n.get("colorscale.rangeMax"),fallback:n.darkMode()?hM:fM})}return cM({values:o,mode:"continuous",colors:f,stops:n.get("colorscale.interpolation","equidistant").split("-")[0],stopCount:+(n.get("colorscale.interpolation","equidistant").split("-")[1]||5),rangeMin:n.get("colorscale.rangeMin"),rangeCenter:n.get("colorscale.rangeCenter"),rangeMax:n.get("colorscale.rangeMax"),fallback:n.darkMode()?hM:fM})}({theme:o,vis:n,cm:i,values:r})}const dM="ontouchstart"in window||navigator.msMaxTouchPoints;function gM(t,e){return t.replace(/{{ *([a-zA-Z0-9_]+) *}}/g,((t,n)=>e[n]?"{{ ".concat(Ap(e[n])," }}"):t))}-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Internet Explorer/")>-1||window.navigator.appVersion.indexOf("Trident/7.0"),lt.prototype.append=go,lt.prototype.st=Lu;const mM="d3-maps-core-choropleth";!function(t){dw.visualization.register(t,"base",(function(){let t,e;return{init(t){this.svg=t.node(),this.mapKey=new vg({vis:this,dw:dw});try{const t=this.chart().locales.dayjs;t&&hc.locale(t)}catch(t){console.warn("Couldnt register locale",t)}},initBaseMap(n,r,o,i){const a=this,s=a.size(),l=a.axes(),c=a.theme(),u=JSON.parse(a.chart().asset("".concat(r,".json")));let f=0,h=0,p=s[0],d=s[1],g=+a.get("max-map-height",650),m=!1;const v=o.fitchart,y=o.svgonly,b="custom_upload"===r?a.get("layers",{}):{};if(u){u.meta.attribution&&a.addMapAttribution(u.meta.attribution);const o=ct(n),M=o.append("div.map-outer");let E=!1;const A=window.devicePixelRatio||1;y||(E=M.append("canvas").at({width:p*A,height:d*A}).st({width:"100%",height:d}));const T=M.append("svg.svg-main").classed(r,!0).st({width:"100%",overflow:"hidden",position:"relative"}).at({width:p,height:d});a.init(T),["borders","exteriorBorders","innerborders"].forEach((t=>{b[t]&&(u.meta[t]=b[t])})),function(r,o,M,E,A,T){const $=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t){if(m&&m.direction===t)return void(m.repeat=!0);const e=E.transition().duration(500);if("home"===t)it.zoomBehavior.transform(e,Gr);else{const n=pt(ft().k*Math.pow(2,+("in"===t?1:-1)),1,o.maxZoom);Math.abs(n-1)<1e-4?it.zoomBehavior.transform(e,Gr):it.zoomBehavior.scaleTo(e,n)}return m={direction:t,repeat:!1},function(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}(e.end(),(function(){return Fg((function(){if(!1!==m){const{direction:t,repeat:e}=m;return m=!1,Fg((function(){if(e)return function(t,e){if(!e)return t&&t.then?t.then(Ig):Promise.resolve()}($(t))}))}}))}))})),S=a.get("basemap"),{getBorder:N}=function(t,e,n){return{getBorder:(e,r)=>vc(n,"vis.".concat(t.meta.id,".borders.").concat(e),vc(n,"vis.d3-maps-core.borders.".concat(e),r))}}(a,0,c),O=A?A.node().getContext("2d"):null,L=[],z=[],C=o.projection,R=o.extent;o.maxZoom=o.maxZoom||("custom_upload"===S?20:8),"custom_upload"===S&&"string"==typeof b.extent&&(R.layer=b.extent);const D=!function(t){if(null==t)return!0;var e=Jf(t);return"number"==typeof e&&(If(t)||Rg(t)||Pg(t))?0===e:0===Jf(Hf(t))}(R.exclude);A&&uc(r);const P=ec(r,r.objects[o.regions]),j="geoNaturalEarth"===C.type?"geoNaturalEarth1":C.type,I=C.rotate,F=C.center,H=!1===R.padding||void 0===R.padding?0:R.padding,B={...Gl,geoAlbersUsaTerritories:Jl.geoAlbersUsaTerritories}[j]();I&&B.rotate&&B.rotate(I);const U=JSON.stringify(u.content).length,q=A?function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=t;const n=al({point(t,n,r){if(!r||r>=e){const e=o([t,n]);this.stream.point(e[0],e[1])}}}),r=Bl().stream,o=Bl();let i,a;return o.stream=function(t){const e=o.postclip()||r;return i&&a===t?i:i=n.stream(e(a=t))},o.areaThreshold=n=>{e=n*t},o.log=()=>{},o}(U>5e5?o.weight||.01:-99):Bl(),W=()=>{let t=P.features;return Object.keys(R.exclude).forEach((e=>{R.exclude[e].forEach((n=>{t=t.filter((t=>t.properties[e]!==n))}))})),{type:"FeatureCollection",features:t}};let Y=D?W():P;R.layer&&!a.get("hide-empty-regions")&&(Y=ec(r,r.objects[R.layer]));d=x(q,H,Y),F&&q.center&&console.warn("todo: what to do with projection center?");const G=il().projection(q),X=E.append("g.map"),V=X.append("rect.background").attr("width",p).attr("height",d);R.layer&&!a.get("hide-empty-regions")&&(A?L.push({id:"bg",features:[ec(r,r.objects[R.layer])]}):z.push({id:"bg",selection:X.append("path.bg.geo").datum(ec(r,r.objects[R.layer])).attr("d",G)}));const Z=(t,e)=>{const n=t.features;let r,o,i;if(n.forEach((t=>{t.anchor=mt(t)})),A&&!e)L.push({id:"region",features:n});else{r=X.append("g.regions"),o=r.selectAll(".region").data(n).enter().append("g.region");const t=o.append("path.geo.region").attr("d",(t=>G(t))).attr("data-key",(t=>t.properties[u.meta.keys[0].value])).classed("highlight",(t=>{if("#id="!==location.hash.substr(0,4))return!1;return location.hash.substr(4).split(",").indexOf(t.properties.RS)>-1}));e||(z.push({id:"gregion",selection:o}),z.push({id:"region",selection:t}))}return{regionShapes:n,regions:r,gregion:o,region:i}},{regionShapes:K,regions:Q}=Z(P),tt=[{id:"regions",type:"border",defaultStyle:{lineWidth:1},meshFunc:(t,e)=>t!==e},{id:"borders",type:"border",defaultStyle:{lineWidth:3.33},meshFunc:(t,e)=>t!==e},{id:"innerborders",defaultStyle:{lineWidth:.3,opacity:.9},meshFunc:()=>!0},{id:"exteriorBorders",type:"border",defaultStyle:{lineWidth:2,strokeDasharray:"2,8"},meshFunc:()=>!0}];N("outerBorder")&&(o.outerBorder=o.regions,tt.push({id:"outerBorder",type:"border",defaultStyle:{lineWidth:1},meshFunc:(t,e)=>t===e}));if(tt.forEach((t=>{const{id:e,defaultStyle:n,meshFunc:i}=t;if(!o[e]||!r.objects[o[e]])return;const a=ic(r,r.objects[o[e]],i);if(A)L.push({id:e,type:"border",defaultStyle:n,features:[a]});else{const t=X.append("path.geo.borders.".concat(e)).datum(a).attr("d",G);z.push({id:e,type:"border",selection:t,defaultStyle:n})}})),!A&&"d3-maps-choropleth"===a.meta.id){const t=X.append("g.outlines").selectAll(".region-outline").data(K).enter().append("path.geo.region-outline").attr("d",G);z.push({id:"outlines",type:"border",selection:t,defaultStyle:{lineWidth:2}})}const et=[],nt={};let rt;v||(E.at({height:d}),A&&A.at({height:d*T}).st({height:d}));const ot=Tg({theme:c,type:a.meta.id,darkMode:a.darkMode(),layers:y?z:L,forceSVG:y}),it={svg:E,canvas:A,scale:1,meta:o,getZoom:ft,g:X,data:K,proj:q,mapProj:B,path:G,feat:P,svgBorderList:z.filter((t=>"border"===t.type)),svgLayers:z,canvasLayers:L,isDatawrapperEditor:a.chart().inEditor(),draw:ut,getThemeBgColor:_,SVG_TO_CANVAS_SCALE:Ag,renderPlaces(){!function(t){let{map:e,vis:n,theme:r,getZoom:o}=t;const i=o(),a=/<br *\/?>|\n/g,s=yc(n.get("labels.places")).filter((t=>{t.origAlign=t.align;const n=!!e.mapProj([t.x,t.y]);return t.visible&&n}));if(e.g.selectAll("g.places").remove(),!s.length||!n.get("labels.enabled")||"places"!==n.get("labels.type"))return;const l=e.g.append("g.places"),c=l.appendMany("g.place",s).attr("class",(t=>["place",t.inverted?"inverted":"",t.type,t._visible?"":"place-hidden"].join(" "))),u={country:13},f={capital:Sg.square,point:Sg.circle};c.each((function(t){t.fontSize=vc(r,"vis.d3-maps-core.places.".concat(t.type,".label.fontSize"),vc(r,"vis.d3-maps-core.places.general.label.fontSize",u[t.type]||10)),t.symbolSize=vc(r,"vis.d3-maps-core.places.".concat(t.type,".symbol.size"),vc(r,"vis.d3-maps-core.places.general.symbol.size",3)),t.symbolPath=vc(r,"vis.d3-maps-core.places.".concat(t.type,".symbol.path"),f[t.type]||!1)})),c.attr("transform",(function(t){const n=e.proj(e.mapProj([t.x,t.y]));return t.anchor=n,"translate(".concat(t.anchor,") scale(").concat(1/i.k,")")}));const h=c.append("g.text-wrapper");function p(){c.each((function(t){const e=t.text.replace(/-/g,"- ");t.__lines=(e?e.match(a)?e.trim().split(a):zg(e,10):[]).map((function(t){return t.replace(/- /g,"-")})),"t"===t.align.split("")[0]&&t.__lines.reverse()})),h.attr("transform",(function(t){const[e,n]=t.align.split(""),o=vc(r,"vis.d3-maps-core.places.".concat(t.type,".label.translateX"),0),i=vc(r,"vis.d3-maps-core.places.".concat(t.type,".label.translateY"),0),a=(t.symbolSize+o)*{l:1,c:0,r:-1}[n],s=(t.fontSize+t.symbolSize+i)*{t:-1,m:0,b:1}[e];return"translate(".concat(a,",").concat(s,")")})),c.selectAll("text").style("text-anchor",(function(t){return{l:"end",c:"middle",r:"start"}[t.align.split("")[1]]})),e.g.selectAll("tspan").remove(),c.selectAll("text").tspans((t=>t.__lines),(function(t){const e=t.align;return((t.fontSize||10)+4)*{t:-1,m:1,b:1}[e.split("")[0]]}))}h.append("text.buffer"),h.append("text.place-label"),c.append("path.place-symbol").attr("d",(function(t){return t.symbolPath||""})).attr("transform",(function(t){return"scale(".concat(t.symbolSize,")")})),p(),e.updateLabelOverlaps(l,"g.place"),p(),c.classed("place-hidden",(t=>!t._visible)),e.addZoomLayer("place-labels-layer",l,c),e.updatePlacesAfterZoom=Og((function(){e.updateLabelOverlaps(l,"g.place"),p(),c.classed("place-hidden",(t=>!t._visible));let t=!1;s.forEach((e=>{e.align!==e.origAlign&&(e.align=e.origAlign,t=!0)})),t&&p(),e.updateLabelOverlaps(l,"g.place"),p(),c.classed("place-hidden",(t=>!t._visible))}),200),e.onZoom(e.updatePlacesAfterZoom)}({map:it,vis:a,theme:c,getZoom:ft})},updateLabelOverlaps:_t,clearZoomLayer(){et.forEach((t=>t.g.remove())),et.length=0},addZoomLayer(t,e,n){nt[t]={g:e,feat:n},et.push(nt[t])},updateZoomLayerSelection(t,e){nt[t].feat=e},onZoom(t){rt=t},setBottomMargin:t=>(h=t,ht(a.size()),it),setUserPadding:t=>(f=t,ht(a.size()),it),zoomVisRegions(){Y=it.getVisRegions(),x(q,H,Y),ht(a.size())},getVisRegions:()=>({type:"FeatureCollection",features:Y.features.filter((t=>!it.hasNoData(t)))}),hasNoData:t=>!t.data||void 0===t.data[l.values]||null===t.data[l.values]||"null"===t.data[l.values]||"-"===t.data[l.values],setThemeStyles(){const t=bg(a.chart().emotion,c,k(_()),a.meta.id);e!==t&&(e&&M.classed(e,!1),M.classed(t,!0),e=t)},setLayerThemeStyles(t){it.regionFill=Tg({theme:t,type:a.meta.id,darkMode:a.darkMode(),layers:y?z:L,forceSVG:y}),it.darkMapBackground=k(it.regionFill),it.darkThemeBackground=k(_())},sizeTooltip:vt(s),resizeMap:ht,fixZoom:gt,zoomBehavior:!1,regionFill:ot,darkMapBackground:k(ot),darkThemeBackground:k(_())};A&&ut();const at=M.select(".map-outer").append("div.annotations"),st=a.chart().flags().isEditingAllowed?yt():null;let lt="";wt(at);const ct=Og(it.renderPlaces,100);t&&st&&t.$on("update",(()=>{const{editorState:t}=st.get(),e=JSON.stringify(vc(t,"selectedAnnotationProps",""));vc(t,"selectedTextAnnotations",[]).length&&e!==lt&&ct(),lt=e}));function ut(){!function(t){let{context:e,getZoom:n,proj:r,mapProj:o,width:i,height:a,canvasScale:s,canvasLayers:l,theme:c}=t;const u=n(),f="vis.d3-maps-symbols.labels.clusters",h=[vc(c,"".concat(f,".fontWeight"),Np(c,"fontWeight",400)),vc(c,"".concat(f,".fontSize"),Np(c,"fontSize",14))/u.k+"px",vc(c,"".concat(f,".typeface"),Np(c,"typeface","sans-serif"))].filter((t=>t)).join(" "),p=il(r,e);e.clearRect(0,0,i*s,a*s),e.lineJoin="round",e.lineCap="round",e.save(),e.scale(s,s),e.translate(u.x,u.y),e.scale(u.k,u.k),l.forEach((t=>{const n=t.features.filter((t=>!t.__hidden));e.globalCompositeOperation=t.blendMode||"source-over",n.forEach((n=>{e.beginPath();const i="function"==typeof t.style?t.style(n):t.style,a="Feature"===n.type?n.geometry:n;if(a){if("Point"===a.type){let t;if(n.properties.__projCache?t=n.properties.__projCache:n.properties.__projCache=t=o(n.geometry.coordinates),!t)return;const i=r(t);e.save(),e.translate(i[0],i[1]);const a=void 0!==n.properties.__r?n.properties.__r:1;if(n.properties.__symbol){let t;"y"===n.properties.__symbolProps.scale?(e.scale(1/u.k,1),t=a/u.k):t=Math.pow(a/u.k,2)*Math.PI,n.properties.__symbol.draw(e,t),n.properties.__symbolProps.fill&&e.closePath()}e.restore()}else p(n);e.strokeStyle=i.stroke?i.stroke:null,i.fill&&(e.fillStyle=i.fill,e.fill()),i.stroke&&(e.lineWidth=(i.lineWidth||1)/u.k,e.strokeStyle=i.stroke,e.setLineDash(i.dash?i.dash.map((t=>t/u.k)):[]),e.stroke())}})),e.globalCompositeOperation="source-over",e.font=h,e.textAlign="center",e.textBaseline="middle",n.forEach((n=>{const o="Feature"===n.type?n.geometry:n;if(o&&"Point"===o.type&&n.properties.__label){const o="function"==typeof t.style?t.style(n):t.style;e.fillStyle=o.labelFill||"#000000";const i=n.properties.__projCache;if(!i)return;const a=r(i);if(e.save(),"marker"===n.properties.__symbolProps.id){const t=.85*(void 0!==n.properties.__r?n.properties.__r:1)/u.k;e.translate(a[0],a[1]-t)}else e.translate(a[0],a[1]);e.fillText(n.properties.__label,0,0),e.restore()}}))})),e.restore(),r.log()}({context:O,getZoom:ft,proj:q,mapProj:B,width:p,height:d,canvasScale:T,canvasLayers:L,theme:c})}function ft(){return it&&void 0!==it.zoomBehavior&&!1!==it.zoomBehavior?Xr(E.node()):Gr}if(a.get("zoomable",!1)){it.zoomBehavior=ro().scaleExtent([1,o.maxZoom]).extent(w(q,H,P).extent).translateExtent(w(q,H,P).extent).filter((()=>{const t="wheel"===J.type&&!J.ctrlKey,e=J.touches&&1===J.touches.length;return!J.button&&!t&&!e})).on("zoom",dt),E.call(it.zoomBehavior).style("touch-action","auto");const t={in:"M1,5 h4 v-4 h2 v4 h4 v2 h-4 v4 h-2 v-4 h-4 v-2 Z",out:"M1,5 h10 v2 h-10 v-2 Z",home:"M0,2h2v-2h2v4h-4v-2Z M0,8h4v4h-2v-2h-2v-2z M8,0h2v2h2v2h-4v-4z M8,8h4v2h-2v2h-2v-4z"},e=a.get("zoom-button-pos","br");M.select(".map-outer").append("div.zoom-buttons.zoom-buttons-".concat(e)).selectAll(".zoom-btn").data("b"===e.charAt(0)?["home","in","out"]:["in","out","home"]).enter().append("button").attr("class",(t=>"zoom-btn zoom-btn-".concat(t))).on("click",$).append("svg").at({width:12,height:12}).append("path").attr("d",(e=>t[e]));let n=!1;M.on("keypress",(()=>{if(!n&&J.target.classList.contains("zoom-btn")&&(" "===J.key||"Enter"===J.key)){const t=M.append("div").st({position:"absolute",left:0,right:0,top:0,fontSize:15,textAlign:"center",padding:"10px 40px",zIndex:9,background:"rgba(255,255,255,0.8)",color:"black"}).html("Hint: you can use the <tt>w</tt>,<tt>a</tt>,<tt>s</tt>,<tt>d</tt> keys to pan around the map");setTimeout((()=>{t.remove()}),1e4),n=!0}if("wasd".includes(J.key)){const t=ft();if(t.k>1){const e="a"===J.key?100:"d"===J.key?-100:0,n="w"===J.key?100:"s"===J.key?-100:0;it.zoomBehavior.translateBy(E,e/t.k,n/t.k)}}}))}function ht(e){if(g=+a.get("max-map-height",650),a.size(e[0],e[1]),p=e[0],d=e[1]-h,v){const t=n.querySelector(".annotation-keys:not(.hide)"),e=t?function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return null;const n=t.offsetHeight;if(!e)return n;const r=getComputedStyle(t),o=parseInt(r.marginTop)+parseInt(r.marginBottom);return n+(e?o:0)}(t,!0):0;let r=Array.from(n.querySelectorAll('.legend-container[data-position="above"], .legend-container[data-position="below"]')).reduce(((t,e)=>t+e.offsetHeight),0);r>0&&(r+=5),d-=r+e}if(d=x(q,H,Y),it.zoomBehavior&&it.zoomBehavior.extent(w(q,H,P).extent).translateExtent(w(q,H,P).extent),A?ut():E.selectAll("path.geo").attr("d",(t=>G(t))),E.at({width:p,height:d}),A&&A.at({width:p*T,height:d*T}).st({width:p,height:d}),V.attr("width",p).attr("height",d),it.sizeTooltip=vt(e),A?it.data.forEach((t=>{t.anchor=mt(t)})):Q.selectAll("g.region").each((t=>t.anchor=mt(t))),t){const e=bt(),n=xt();t.$set({dataToPx:e,pxToData:n,visWidth:p,theme:a.theme(),cm:a.colorMap()})}gt()}return i(it);function pt(t,e,n){return Math.max(e,Math.min(n,t))}function dt(){const e=J.transform;if(M.classed("d3-maps-zoomed-in",e.k>1),gt(),t){const e=bt(),n=xt();t.$set({dataToPx:e,pxToData:n})}rt&&rt(e.k,[e.x,e.y])}function gt(){const t=ft(),e=it.scale=t.k;A&&q.areaThreshold(e===o.maxZoom?0:1/Math.pow(e,1.5)/Math.pow(Math.min(600,p)/600,2));const n=(.45+.25*Math.pow(Math.min(1,e-1),.5))/e,r=z.filter((t=>"border"===t.type));A&&ut(),X.attr("transform",t),r.forEach((t=>{let{id:e,selection:r,style:i}=t;if((o[e]||"outlines"===e)&&r.style("stroke-width",n*i.lineWidth+"px"),i.strokeDasharray){const t=i.strokeDasharray.split(",").map((t=>Number(t)*n));r.style("stroke-dasharray",t.join(","))}}));const i=et.length;for(let t=0;t<i;t++)et[t].feat.attr("transform",a);function a(t){return"translate("+t.anchor+") scale("+1/e+")"}}function mt(t){if(void 0===t.properties.cx||void 0===t.properties.cy)return G.centroid(t);const e=B([t.properties.cx,t.properties.cy]);return e?q(e):G.centroid(t)}function vt(t){const e="rtl"===a.textDirection;return(r,o,i)=>{if(t[0]<400){const e=r[1]/t[1],o=!0===a.__chart.get("metadata.describe.hide-title")||""===a.__chart.get("metadata.describe.intro")&&""===a.__chart.get("title"),s=!n.classList.contains("content-below-chart");i.st({top:e<.5?"auto":o?"0px":"-20px",bottom:e<.5?s?"0px":"-20px":"auto",left:0,right:0,"max-width":"100%","max-height":.45*t[1]+"px"})}else{const n=i.property("offsetWidth"),a=i.property("offsetHeight"),s=o.offsetWidth,l=o.offsetHeight,c=e?r[0]-n-10<0:r[0]+10+n<s,u=r[1]+10+a<l;i.st({top:u?r[1]-10+"px":"auto",bottom:u?"auto":Math.min(l-a,l-r[1]+10)+"px",left:c?r[0]+10+"px":"auto",right:c?"auto":s-r[0]+10+"px","max-height":.55*t[1]+"px"}),i.style("max-width",null)}}}function yt(t){if(a.chart().inEditor()){const{results:e}=window.parent.dw.backend.hooks.call("get-annotation-controls");if(e&&e.length)return window.__registerAnnotationControls=void 0,e[e.length-1];t&&(window.__registerAnnotationControls=function(e){t.$set({editMode:!0}),e.syncAnnotationLayer(t)})}return null}function bt(){let t;return(e,n)=>{const r=t||[20,20];if(Math.abs(e)>180||Math.abs(n)>90)return r;const o=B([e,n]);if(!o)return r;const[i,a]=o,[s,l]=q([i,a]),c=ft(),[u,f]=c.apply([s,l]);return t=[u,f].map((t=>isNaN(+t)?void 0:+t.toFixed(1)))}}function xt(){return(t,e)=>{const n=ft(),[r,o]=n.invert([t,e]),[i,a]=q.invert([r,o]);return B.invert([i,a])}}function wt(e){const n=a.chart().inEditor(),r=a.chart().flags().isEditingAllowed,o=yc(a.get("text-annotations",[]));if(!o.length&&!n)return!1;const i=bt(),s=xt(),l=M.append("div.annotation-keys");if(t)try{t.$destroy()}catch{console.warn("Annotation layer not destroyed, error caught to prevent issue in IE")}t=new Dd({target:e.node(),props:{textAnnotations:o,dataToPx:i,pxToData:s,theme:a.theme(),cm:a.colorMap(),visWidth:p,annotationKeysSel:l,rtl:"rtl"===a.textDirection,chroma:a.libraries().chroma,purifyHtml:dw.utils.purifyHtml}});const c=n&&r?yt(t):null;return c&&(t.$set({editMode:!0}),c.syncAnnotationLayer(t),X.on("mousedown",(()=>{const{editorState:t}=c.get();t.selectedTextAnnotations=[],c.set({editorState:t})}))),t}function _t(t,e){const n=ft();let r=!1;if(!a.get("avoid-label-overlap",!0)&&"column"===a.get("labels.type","places"))return;const o=[],i=a.__chart.getElementBounds(it.svg.node()),s=M.selectAll(".text-annotation .text"),l=2;function c(t,e){const r=t.top-i.top-l,a=t.bottom-i.top+l,s=t.left-i.left-l,c=t.right-i.left+l;let u=!1;return(s<0||r<0||a>i.height||c>i.width)&&1===n.k&&(u=!0),u||o.forEach((function(t){r>t.b||c<t.l||a<t.t||s>t.r||e!==t.data&&(u=!0)})),u||o.push({t:r,l:s,b:a,r:c,data:e}),u}return s.each((function(){const t=a.__chart.getElementBounds(this),e=t.top-i.top-l,n=t.bottom-i.top+l,r=t.left-i.left-l,s=t.right-i.left+l;o.push({t:e,l:r,b:n,r:s})})),t.selectAll(e).each((function(t){const e=a.__chart.getElementBounds(this);let o=c(e,t);if(o&&("point"===t.type||"capital"===t.type)&&"places"===a.get("labels.type","places")&&1===n.k){const n=yc(e),a=t.anchor,s=t.symbolSize;dg(["tr","br","bl","tl"]).forEach((e=>{if(o){switch(e){case"tr":n.left=a[0]-s,n.right=a[0]+n.width-s,n.top=a[1]-n.height+i.top+2*s,n.bottom=a[1]+i.top;break;case"tl":n.left=a[0]-n.width+s,n.right=a[0]+s,n.top=a[1]-n.height+i.top+2*s,n.bottom=a[1]+i.top;break;case"bl":n.left=a[0]-n.width+s,n.right=a[0]+s,n.top=a[1]+i.top,n.bottom=a[1]+n.height+i.top-2*s;break;case"br":n.left=a[0]-s,n.right=a[0]+n.width-s,n.top=a[1]+i.top,n.bottom=a[1]+n.height+i.top-2*s}c(n,t)||(t.align=e,r=!0,o=!1)}}))}t._visible=!o})),{alignmentChanged:r}}}(u.content,u.meta,o,T,E,A)}else setTimeout((()=>location.reload()),2e3);function x(t,e,n){const{extent:r,h:o}=w(t,e,n);return t.fitExtent(r,n),o||d}function w(t,e,n){const r=function(t,e,n,r){const o=Math.round(t*n/2)+(r||0),i=Math.round(e*n/2)+(r||0);return{left:o,right:o,top:i,bottom:i}}(p,d,f,e),o=a.get("map-align","center"),i=(p||50)-r.left-r.right,s=(v?d||50:g)-r.top-r.bottom,l=il().projection(t).bounds(n),c=l[1][0]-l[0][0],u=l[1][1]-l[0][1],[h,m]=function(t,e,n,r){const o=t/e;return o>n/r?[n,Math.round(n/o)]:[r*o,r]}(c,u,i,s),y=v?s:m,b=Cg(h,i,o),x=Cg(m,y,"center"),w=[r.left+b,r.top+x];return{extent:[w,[w[0]+h,w[1]+m]],h:y+r.top+r.bottom}}function _(){return a.theme().colors.background}function k(t){return _e(t).l<50}},_svgCanvas(){return this.svg},getFormat(t,e,n){if(!e)return zf;const r=this,o=r.get(t,n),i=o.indexOf("%")>-1,{numeral:a}=r.libraries(),s="number"===e.type()?t=>a(i?.01*t:t).format((t=>{let e;const n={f:"0",".1f":"0.0",".2f":"0.00",".3f":"0.000",".0%":"0%",".1%":"0.0%",".1s":"0a",".2s":"0.0a",".3s":"0.00a"};return e=Object.prototype.hasOwnProperty.call(n,t)?n[t]:t,e})(o)):"date"===e.type()?e=>moment(e).format(r.get(t)||"YYYY"):zf;return t=>"date"===e.type()?jg(t)?s(t):t:s(t)},getColorScale(t){const e=this,n=e.dataset,r=e.axes(!0).values,o=r.type();let i=e.get(t+".colors",function(t){const e=[{c:"#fff",p:0},{c:"#000",p:1}],n=t.theme(),r=n.colors?n.colors.gradients:null;if(!r)return e;const o=r[0];return!o||!Rg(o[0])||o.length<2?e:o.map(((t,e)=>({c:t,p:e/(o.length-1)})))}(e));const a=e.get(t+".stops",function(t,e){const n=[{p:0,v:0},{p:1,v:1}],r=e.name();if(!r)return n;const o=t.column(r).range();return o?[{p:0,v:o[0]},{p:1,v:o[1]}]:n}(n,r));if(window.ds=n,"number"===o){const t=zn().range(a.map(uo("p"))).domain(a.map(uo("v"))),e=zn().clamp(!0).domain(i.map(uo("p"))).range(i.map(uo("c")));return uo(t,e)}{const t=dg(r.values()).filter(zf);return i=e.__categoryColors=function(t,e,n){const r=co(t),o=[].concat(n.colors.palette).concat(n.colors.secondary).filter((t=>r.indexOf(t)<0)),i=Object.assign({},t);return e.forEach((t=>{if(!i[t]){const e=o.shift();i[t]=e}})),i}(e.get("categories",{}),t,e.theme()),Ct().domain(function(t){var e=[];for(var n in t)e.push(n);return e}(i)).range(co(i))}}}}),...dw.visualization.hasVisHash?["0665a66c"]:[])}(mM),dw.visualization.register("d3-maps-choropleth",mM,(function(){let t,e,n,r,o,i,a={},s=!1;const l={},c=["zoomable","zoom-button-pos","hide-empty-regions"],u=new Map,f=new Map;let h,p;return{render:function(d){const g=this,m=d,v=g.chart(),y=g.theme(),b=g.size(),x=g.dataset.list(),w=v.getMetadata("data.column-format",{}),_=v.flags(),k="rtl"===g.textDirection;!function(t,e,n){var r;let{visualize:o={},data:i={},axes:a={}}=e;const s="marker"===o["symbol-shape"];if(o["max-radius"]&&(o["max-size"]=o["max-radius"]*(s?1.5:2),delete o["max-radius"]),o["fixed-radius"]&&(o["fixed-size"]=o["fixed-radius"]*(s?1.5:2),delete o["fixed-radius"]),null!==(r=o.clustering)&&void 0!==r&&r.radius&&(o.clustering.size=o.clustering.radius*(s?1.5:2),delete o.clustering.radius),o.gradient||o.categories){const t={mode:"continuous",stops:"quantiles",interpolation:"equidistant",colors:[],rangeMin:"",rangeMax:"",rangeCenter:"",stopCount:5,palette:0,categoryOrder:[],categoryLabels:{},map:{}};if(o.categories&&(t.map=o.categories,delete o.categories),o.gradient){const e=o.gradient;if(e.colors&&(t.colors=e.colors.map((t=>{let{c:e,p:n}=t;return{color:e,position:n}}))),e.stops){const n=e.stops.filter((t=>0===t.p))[0];n&&(t.rangeMin=n.v);const r=e.stops.filter((t=>1===t.p))[0];if(r&&(t.rangeMax=r.v),3===e.stops.length){const n=e.stops.filter((t=>Math.abs(t.p-.5)<.03))[0];n&&(t.rangeCenter=n.v),t.interpolation="quantiles-3"}else e.stops.length>3&&(t.interpolation=e.stops.length<6?"quantiles-5":"quantiles-6")}}o.colorscale=t,delete o.gradient}if(o.colorscale&&!o.colorscale.customStops&&(o.colorscale.customStops=["","","","","","","",""]),o.legend&&!o.legend.hideItems&&(o.legend.hideItems=[]),o.tooltip&&void 0===o.tooltip.enabled){const t={enabled:!1,sticky:!0,body:"",title:""};if(o.tooltip){const{title:e,body:n,fields:r}=o.tooltip;(e||n)&&(t.body=r?gM(n||"",r):n||"",t.title=r?gM(e||"",r):e||"",t.migrated=!0,t.enabled=!0)}o.tooltip=t}if(void 0===o["min-label-zoom"]&&o["map-key-position"]&&(o["min-label-zoom"]=1.5),"d3-maps-choropleth"===t&&o.tooltip&&(a.keys&&(o.tooltip.title=String(o.tooltip.title).replace("%REGION_NAME%","{{ ".concat(Ap(a.keys)," }}"))),a.values&&(o.tooltip.body=String(o.tooltip.body).replace("%REGION_VALUE%","{{ ".concat(Ap(a.values)," }}")))),o["map-key-position"]){const e="d3-maps-choropleth"===t?"hidden"!==o["map-key-position"]||!1===o["map-key-auto"]&&""===o["map-key-stops"]:!1!==o["show-map-key"];o.legend={enabled:e,orientation:"vertical",position:e?o["map-key-position"]:"mt",title:o["map-key-title"]||"",labelFormat:(l=o["map-key-format"],{"0,0.[00]":"0,0.[00]",f:"0",".1f":"0.0",".2f":"0.00",".3f":"0.000",".0%":"0%",".1%":"0.0%",".2%":"0.00%",".0s":"0a",".1s":"0.0a",".2s":"0.00a",".3s":"0.000a"}[l]||l),size:100,offsetY:0,offsetX:0,labels:"ranges",reverse:!1,interactive:!1},delete o["map-key-position"],delete o["map-key-title"],delete o["map-key-format"],delete o["map-key-position"]}var l;if(void 0===o["zoom-button-pos"]&&(o["zoom-button-pos"]="inside-right-bottom"===vc(o,"legends.color.position")?"tr":"br"),o["cluster-symbols"]){const t=["noverlap","hexbin"].includes(o["cluster-symbols"]);o.clustering={enabled:t,type:t?o["cluster-symbols"]:"noverlap",showCount:vc(o,"cluster-count",!0),gridSize:vc(o,"hexbin-gridsize",15),aggregation:vc(o,"cluster-aggregation","none"),radius:vc(o,"cluster-radius",9),iterations:vc(o,"iterations",1),tolerance:vc(o,"tolerance",0),color:vc(o,"cluster-color",0)},delete o["cluster-color"],delete o["cluster-symbols"],delete o["cluster-count"],delete o["hexbin-gridsize"],delete o["cluster-aggregation"],delete o["cluster-radius"],delete o.iterations,delete o.tolerance}if(null===vc(o,"clustering.aggregationColor")&&vc(o,"clustering.aggregationColor",vc(o,"cluster-aggregation","none")),o["cluster-tooltip"]){const{title:t,body:e,fields:n}=vc(o,"cluster-tooltip",{});o.clusterTooltip=(t||e)&&n?{enabled:!0,sticky:!0,title:gM(t||"",n),body:gM(e||"",n),migrated:!0}:{enabled:t||e,sticky:!0,title:t||"",body:e||""},delete o["cluster-tooltip"]}if(o["map-align"]||(o["map-align"]="center"),"d3-maps-symbols"===t&&void 0===o["blend-multiply"]&&(o["blend-multiply"]=!0),n&&a&&!n.hasColumn(a.values)&&delete a.values,a.values&&o["map-key-stops"]&&"number"===n.column(a.values).type()){const t={},e=n.column(a.values).values();let r=!0;o["map-key-stops"].split("\n").forEach((e=>{const n=e.split(",");t[n[0]]=n[1]}));for(let n=0;n<e.length;n++)if("number"==typeof e[n]&&isFinite(e[n])&&void 0===t[e[n]]){r=!1;break}if(r){i["column-format"][a.values]||(i["column-format"][a.values]={}),i["column-format"][a.values].type="text";const n=cM({values:e,mode:"continuous",colors:o.colorscale.colors,stops:o.colorscale.interpolation.split("-")[0],stopCount:+(o.colorscale.interpolation.split("-")[1]||5),rangeMin:o.colorscale.rangeMin,rangeCenter:o.colorscale.rangeCenter,rangeMax:o.colorscale.rangeMax});o.colorscale.map={};for(const e in t)void 0!==e&&""!==e&&(o.colorscale.map[e]=n(Number(e)),o.colorscale.categoryLabels[e]=t[e],o.colorscale.categoryOrder.push(e))}delete o["map-key-stops"]}if(void 0===o["text-annotations"]&&(o["text-annotations"]=[]),void 0===o.labels){const t=Boolean(a.labels);o.labels={},o.labels.enabled=t,o.labels.type=t?"column":"places",o.labels.places=[],o.labels.max=1}"legends"in o||(o.legends={color:o.legend||{}},o.legends.color.position&&(o.legends.color.position=gg[o.legends.color.position]||"above"),delete o.legend),"number"==typeof vc(o,"legends.color.offsetLeft")&&(o.legends.color.offsetX=o.legends.color.offsetLeft,delete o.legends.color.offsetLeft),"number"==typeof vc(o,"legends.color.offsetTop")&&(o.legends.color.offsetY=o.legends.color.offsetTop,delete o.legends.color.offsetTop),"d3-maps-symbols"!==t||"size"in o.legends||(o.legends.size={enabled:!1,position:"above",type:"stacked",valuesSetting:"auto",values:null,titleEnabled:!0,title:null,titlePosition:"left",titleWidth:200,labelFormat:"auto",labelPosition:"right",offsetX:0,offsetY:0})}(v.get("type"),v.get("metadata"),g.dataset),this.chart().dataset(!0);const M=g.get("zoomable",!0)||g.get("highlighted-series",[]).length>0?g.get("min-label-zoom",1):1,E=g.get("avoid-label-overlap",!0),A=g.axes(),T=v.createPostEvent();let $=!e||e!==g.get("basemap","bl");if($||c.forEach((t=>{void 0!==l[t]&&l[t]!==g.get(t)&&($=!0)})),$)c.forEach((t=>{l[t]=g.get(t)})),n=g.size(),r=g.get("max-map-height"),o=g.get("map-align","center"),d.innerHTML="",e=g.get("basemap","bl"),g.initBaseMap(m,e,_,(function(e){t=e,t.svgLayers.forEach((t=>{let{id:e,selection:n}=t;f.set(e,n)})),t.canvasLayers.forEach((t=>{let{id:e,style:n,features:r}=t;u.set(e,{style:n,features:r})})),t.highlight=e=>{g.get("legends.color.interactive")&&(h=e,t.canvas?t.draw():f.get("region").style("opacity",(function(t){return!h||N(t)?1:.1})))},p=function(t){let{cont:e,vis_get:n}=t;const r=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div");let a="",s="",l=[];return{updateNodePositions:function(t){let{width:c,theme:u,rtl:f}=t;l.filter((t=>{let{node:e}=t;return e.parentNode})).forEach((t=>{let{node:e}=t;e.removeAttribute("style"),e.className="",delete e.dataset.position,e.parentNode.removeChild(e)}));const h=c<450,p="top"===vc(u,"vis.base.legend.position",h?"bottom":"top")?"above":"below",d=n("legends.color.enabled",!0),g=n("legends.size.enabled");s=n("legends.size.position",p),h&&s.includes("inside")&&(s=p),a=n("legends.color.position",p),h&&a.includes("inside")&&(a=p);const m=d&&g&&a===s;m&&(i.appendChild(r),i.appendChild(o)),l=[{name:"combined",node:i,position:a,enabled:m,xOffset:n("legends.color.offsetX",n("legends.size.offsetX",0)),yOffset:n("legends.color.offsetY",n("legends.size.offsetY",0))},{name:"category",node:r,position:a,enabled:!m&&d,xOffset:n("legends.color.offsetX",0),yOffset:n("legends.color.offsetY",0)},{name:"size",node:o,position:s,enabled:!m&&g,xOffset:n("legends.size.offsetX",0),yOffset:n("legends.size.offsetY",0)}].filter((t=>t.enabled)),i.className="legend-combined",l.forEach((t=>{t.node.classList.add("legend-container"),t.node.dataset.position=t.position,"center"!==vc(u,"vis.base.legend.alignment")||t.position.includes("inside")||t.node.classList.add("align-center")})),l.filter((t=>{let{position:e}=t;return e.includes("inside")})).forEach((t=>{let{node:e,position:n,xOffset:r,yOffset:o}=t;e.style.position="absolute";const i=n.split("-");let a=i[1];const s=i[2];f&&("left"===a?a="right":"right"===a&&(a="left")),"center"===a?(e.style.left="50%",e.style.transform="translateX(-50%)"):e.style[a]="".concat(r,"%"),e.style[s]="".concat(o,"%")})),l.forEach((t=>{let{node:n,position:r}=t;r.includes("inside")?e.querySelector(".map-outer").appendChild(n):"below"===r?e.appendChild(n):e.prepend(n)}))},colorNode:()=>({node:r,position:a}),sizeNode:()=>({node:o,position:s})}}({cont:m,vis_get(){return g.get(...arguments)}}),S(),g.renderingComplete()}));else{if(t.svg){const e=g.size(),i=g.get("max-map-height"),a=g.get("map-align","center");n[0]===e[0]&&n[1]===e[1]&&i===r&&a===o||(n=e,r=i,o=a,t.resizeMap(e)),S()}g.renderingComplete()}function S(){const e=[],n=g.colorMap(),r=g.get("highlighted-series"),{numeral:o}=g.libraries();if(t.setThemeStyles(),t.setLayerThemeStyles(g.theme()),t.setUserPadding(g.get("map-padding",0)/100),!t.data)return;t.clearZoomLayer();const l=g.get("map-key-attr",function(){const t="id",e=JSON.parse(g.chart().asset("".concat(g.get("basemap"),".json"))),n=e.meta.keys?e.meta.keys:null;if(!n)return t;const r=n[0]?n[0].value:null;return r||t}()),c=t.meta.keys,v=c.find((t=>t.value===l))||c[0],_=void 0===v.alphanum||v.alphanum?Hg:Bg,$=new Map(x.map((t=>[_(t[A.keys]),t])));t.data.forEach((t=>{t.data=$.get(_(t.properties[v.value])),t.data&&e.push(t.data)}));const S=e.map(uo(A.values)),O=pM({vis:g,theme:y,column:g.axes(!0).values,values:S,cm:n}),L=t.regionFill;if(g.get("hide-empty-regions")&&(t.canvas?(u.get("region").features.forEach((e=>{t.hasNoData(e)&&(e.__hidden=!0)})),t.zoomVisRegions()):(f.get("gregion").classed("hidden",t.hasNoData),f.get("outlines").classed("hidden",t.hasNoData),t.zoomVisRegions())),t.canvas){t.canvasLayers.find((t=>"region"===t.id)).style=function(e){const n=e.fill=t.hasNoData(e)?L:O(e.data[A.values]),{r:r,g:o,b:i}=re(n),a=!h||N(e)?1:.1;return{fill:"rgba(".concat(r,",").concat(o,",").concat(i,",").concat(a,")")}},t.draw()}else f.get("region").style("fill",(function(e){return t.hasNoData(e)?e.fill=L:e.fill=O(e.data[A.values])})),f.get("outlines").classed("has-data",(function(e){return!t.hasNoData(e)}));const z=g.get("labels.enabled"),C=g.get("labels.type");if(A.labels&&z&&"column"===C){const e=vc(y,"vis.d3-maps-choropleth.labels.outline.color.inverted")?null:g.darkMode()?Mg("rgb(50, 50, 50)",y._computed.bgDark,y._computed.bgLight):"rgb(50, 50, 50)",n=/<br *\/?>|\n/g,r=g.axes(!0).labels.type();let i;if("number"===r){const t=w[A.labels]||{};i={prepend:t["number-prepend"]||"",append:t["number-append"]||"",minusChar:vc(g.theme(),"vis.base.format.minusCharacter","−"),plusMinusChar:vc(g.theme(),"vis.base.format.plusMinusCharacter"),format:g.get("map-label-format","0,0.[00]"),multiply:Math.pow(10,-t["number-divisor"]||0)}}t.data.forEach((function(e){e.__area=t.path.area(e)}));const a=t.data.sort((function(t,e){return e.__area-t.__area})),s=t.g.append("g.labels");let l=s.selectAll("g.label").data(a).enter().append("g.label").classed("inverted",D).each((function(t){const e=t.data&&("number"===r?isFinite(t.data[A.labels]):t.data[A.labels])?"text"===r?t.data[A.labels].replace(/-/g,"- "):ag(o,t.data[A.labels],i):"";t.__lines=(e?e.match(n)?e.trim().split(n):zg(e,10):[]).map((function(t){return"text"===r?t.replace(/- /g,"-"):t}))}));l.append("text.buffer"),l.append("text.label"),l=s.selectAll("text").filter((t=>t.anchor&&isFinite(t.anchor[0])&&isFinite(t.anchor[1]))).translate((t=>t.anchor)),g.get("hide-empty-regions")&&l.classed("hidden",t.hasNoData),l.tspans(uo("__lines"),12),s.selectAll("g.label").each((function(n){const r=ct(this);r.select("text.label").selectAll("tspan").style("fill",function(e){const n=D(e),r=t.darkThemeBackground?-1:1;return vc(y,"vis.d3-maps-choropleth.labels.color.".concat(n?"inverted":"normal"),n?_e(e.fill).darker((n?-4:2.5)*r):null)}(n)),r.classed("inverted")&&r.selectAll("text.buffer").attr("stroke",e)})),t.updateLabelOverlaps(s,"g.label"),l.classed("lbl-hidden",R),t.addZoomLayer("labels",s,l),t.onZoom((function(){t.updateLabelOverlaps(s,"g.label"),l.classed("lbl-hidden",R)}))}function R(e){return!function(t){return t&&t.data&&r&&r.length&&A.labels&&r.indexOf(t.data[A.labels])>-1}(e)&&(t.scale<M||!!E&&!e._visible)}function D(e){const n=_e(e.fill).l;return t.darkThemeBackground?n>50:n<50}let P;z&&"places"===C&&t.renderPlaces();const j=i&&i.title&&(i.title!==g.get("tooltip.title")||i.body!==g.get("tooltip.body"));if(i={...g.get("tooltip",{title:"",body:"",enabled:!1})},i.enabled){try{i.template=dw.utils.htmlTemplate((i.title?"<h2>".concat(i.title,"</h2>"):"")+i.body)}catch(e){t.isDatawrapperEditor?i.template=dw.utils.htmlTemplate(Qg(e)):i.template=()=>{throw new Error}}if(P=ct(m.querySelector(".dw-tooltip")),P.node())j&&F(a,!1,!0);else{P=ct(m).append("div.dw-tooltip").style("max-height",.55*b[1]+"px").style("overflow-y","auto");const e=t.g.append("path.region-outline.hover-outline.has-data").st({vectorEffect:"non-scaling-stroke",strokeWidth:vc(y,"vis.d3-maps-choropleth.borders.hoverOutline.scale",2)*t.SVG_TO_CANVAS_SCALE,strokeLinejoin:"round",fill:"none"}).attr("d","M0,0");if(t.onZoom((()=>{e.datum()&&(e.attr("d",t.path),I())})),t.canvas){const n=Jg(u.get("region").features,t.mapProj);t.svg.on("mousemove",(()=>{if(s||!i.enabled&&!g.get("legends.color.interactive")||dM)return;const r=ht(t.svg.node()),o=t.getZoom().invert(r),a=t.proj.invert(o),l=n(a);l&&l.data&&null!==l.data[A.values]?(i.enabled&&F(l),e.datum(l).attr("d",t.path),T("region.mouseenter",yc(l.data)),t.onHighlight&&t.onHighlight(l)):(T("region.mouseleave"),t.onHighlight&&t.onHighlight(null),P.style("visibility","hidden"),e.datum(null).attr("d","M0,0"))})).on("click",(()=>{if(s)return I();const r=ht(t.svg.node()),o=t.getZoom().invert(r),i=t.proj.invert(o),a=n(i);a&&T("region.click",yc(a.data)),(g.get("tooltip.sticky")||dM)&&a&&a!==s&&a.data&&null!==a.data[A.values]&&(s=a,P.classed("sticky",!0),e.datum(a).attr("d",t.path),F(a))}))}else f.get("outlines").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("mouseover",(function(e){s||dM||(F(e),t.onHighlight&&t.onHighlight(e),ct(this).classed("hovered-region",!0))})).on("mousemove",(function(t){s||dM||F(t,!0)})).on("mouseout",(function(){s||dM||(t.onHighlight&&t.onHighlight(null),P.style("visibility","hidden"))})).on("click",(function(e){g.get("tooltip.sticky")&&(""===i.title&&""===i.body||(f.get("outlines").classed("sticky",!1),s===e||t.hasNoData(e)?(s&&t.hasNoData(e)||s===e)&&I():(ct(this).classed("sticky",!0),s=e,F(e))))})),ct(m).selectAll("rect.background").on("click",I)}}else{const t=m.querySelector(".dw-tooltip");t&&t.parentNode.removeChild(t)}function I(){s=!1,P.style("visibility","hidden").classed("sticky",!1)}function F(e,n,r){if(a=e,!t.hasNoData(e)&&(""!==i.title||""!==i.body)){if(!n){const{numeral:n}=g.libraries(),r={FORMAT:tm.bind(this,n)};let o;!function(t){let{ctx:e,columns:n,data:r,useKeys:o=!1,colFmts:i}=t;const a=new Set,s=new Map;n.forEach((t=>{const e=Ap(t.name());let n=e,r=0;for(;a.has(n);)n="".concat(e,"_").concat(++r);a.add(n),s.set(t.name(),n)})),n.forEach((t=>{const n=Ap(t.name()),a=s.get(t.name()),l=i[t.name()]||{},c=Math.pow(10,-l["number-divisor"]||0);if(e[a]=r[o?n:t.name()],"number"===t.type()){e[a]*=c;const[n,r]=t.range(),o={min:n,max:r,sum:t.sum(),mean:t.mean(),median:t.median()};Object.keys(o).forEach((t=>{e["".concat(a,"__").concat(t)]=o[t]}))}}))}({ctx:r,columns:g.dataset.columns(),data:e.data,colFmts:w});try{o=i.template(r).replace(/\n\n/g,"<br>")}catch(e){if(!t.isDatawrapperEditor)return;o=Qg(e)}let a;if(a=dM?o+'<div class="dw-tooltip-close">&#x2715;</div>':o,""===o)return;P.style("visibility","visible").html(a)}if(P.select(".dw-tooltip-close").on("click",I),!r){const e=ht(m),n=d.clientWidth<450?.55:.45;t.sizeTooltip(e,m,P),P.style("max-height",d.clientHeight*n+"px")}}}p.updateNodePositions({width:b[0],theme:y,rtl:k}),g.get("legends.color.enabled",!0)&&g.mapKey.update({container:p.colorNode().node,colorScale:O,map:t}),t.fixZoom(),t.resizeMap(g.size())}function N(t){if(!t.data)return!1;if(void 0!==h.min){const e=t.data[A.values];return e>=h.min&&e<h.max}if(h.value){const e=t.data[A.values];return"".concat(t.fill,"///").concat(e)===h.value}}},reset:function(){}}}),...dw.visualization.hasVisHash?["0665a66c"]:[])}();
//# sourceMappingURL=d3-maps-choropleth.js.map
